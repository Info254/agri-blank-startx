const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-CJAKlkPp.js","assets/vendor-Bh_1FTD-.css","assets/BatchTrackingPage-DOYKIcCj.js","assets/CarbonForumPage-CBPMlK8W.js","assets/NetworkingPage-Bln3VaYR.js"])))=>i.map(i=>d[i]);
var ui=Object.defineProperty;var xi=(s,a,t)=>a in s?ui(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t;var Qe=(s,a,t)=>xi(s,typeof a!="symbol"?a+"":a,t);import{r as l,j as e,t as hi,c as pi,a as vs,S as Da,b as gi,R as Ea,I as Fa,F as La,d as Ra,C as Ut,e as Ka,P as ji,f as qa,g as za,h as Oa,i as Ba,k as Se,l as $a,n as fi,L as Ua,o as Va,p as vi,T as yi,q as Ni,M as bi,s as Ha,u as Ga,v as Ya,w as nt,x as Wa,V as Qa,y as Ja,z as wi,A as Ci,B as qs,D as V,E as Vt,G as ye,U as oe,H as me,J as Ke,K as lt,N as Ne,O as Xs,Q as Za,W as ki,X as ct,Y as ot,Z as Xa,_ as Re,$ as dt,a0 as mt,a1 as Ht,a2 as er,a3 as sr,a4 as tr,a5 as ut,a6 as et,a7 as Gt,a8 as De,a9 as xs,aa as ar,ab as rr,ac as ir,ad as Si,ae as pe,af as Ds,ag as _i,ah as st,ai as Ce,aj as se,ak as qe,al as nr,am as Yt,an as ss,ao as lr,ap as tt,aq as Ai,ar as Wt,as as Pi,at as cr,au as Ti,av as Ii,aw as Mi,ax as Di,ay as ys,az as He,aA as Es,aB as Ve,aC as as,aD as zs,aE as le,aF as Qt,aG as Ei,aH as Os,aI as or,aJ as Fi,aK as dr,aL as Li,aM as mr,aN as Ri,aO as ur,aP as Ki,aQ as xr,aR as hr,aS as qi,aT as zi,aU as pr,aV as Oi,aW as Bi,aX as ns,aY as $i,aZ as at,a_ as Ui,a$ as Vi,b0 as hs,b1 as ke,b2 as ga,b3 as Fs,b4 as rt,b5 as xt,b6 as Jt,b7 as Hi,b8 as Gi,b9 as Yi,ba as Zt,bb as ht,bc as ja,bd as ve,be as qt,bf as pt,bg as Wi,bh as Qi,bi as Ji,bj as gr,bk as Zi,bl as te,bm as Xi,bn as en,bo as be,bp as Ns,bq as ze,br as Oe,bs as Be,bt as we,bu as rs,bv as Me,bw as gt,bx as jt,by as Bs,bz as ft,bA as Ue,bB as Xt,bC as sn,bD as Ls,bE as jr,bF as tn,bG as an,bH as rn,bI as nn,bJ as ln,bK as Is,bL as cn,bM as on,bN as dn,bO as mn,bP as ea,bQ as un,bR as xn,bS as hn,bT as fr,bU as vr,bV as yr,bW as Nr,bX as br,bY as wr,bZ as pn,b_ as gn,b$ as jn,c0 as fn,c1 as Cr,c2 as Rs,c3 as vt,c4 as vn,c5 as yn,c6 as Nn,c7 as bn,c8 as wn,c9 as Cn,ca as kn,cb as kr,cc as Sn,cd as _n,ce as An,cf as Ct,cg as Pn,ch as Cs,ci as Tn,cj as kt,ck as St,cl as In,cm as Mn,cn as Dn,co as En,cp as Ys,cq as Fn,cr as ds,cs as us,ct as Ln,cu as sa,cv as it,cw as ps,cx as Rn,cy as Kn,cz as _t,cA as qn,cB as zn,cC as Sr,cD as _r,cE as On,cF as Bn,cG as $n,cH as Un,cI as Vn,cJ as Hn,cK as Gn,cL as U,cM as Yn,cN as Wn}from"./vendor-CJAKlkPp.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}})();const Qn={theme:"system",setTheme:()=>null},Ar=l.createContext(Qn);function Jn({children:s,defaultTheme:a="system",storageKey:t="agriconnect-ui-theme",...r}){const[i,c]=l.useState(()=>typeof window<"u"&&localStorage.getItem(t)||a);l.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),i==="system"){const m=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o.classList.add(m);return}o.classList.add(i)},[i]);const n={theme:i,setTheme:o=>{typeof window<"u"&&localStorage.setItem(t,o),c(o)}};return e.jsx(Ar.Provider,{...r,value:n,children:s})}const Zn=()=>{const s=l.useContext(Ar);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s};function q(...s){return hi(pi(s))}const Ks=vs("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=l.forwardRef(({className:s,variant:a,size:t,asChild:r=!1,...i},c)=>{const n=r?Da:"button";return e.jsx(n,{className:q(Ks({variant:a,size:t,className:s})),ref:c,...i})});f.displayName="Button";const v=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:q("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a}));v.displayName="Card";const b=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:q("flex flex-col space-y-1.5 p-6",s),...a}));b.displayName="CardHeader";const w=l.forwardRef(({className:s,...a},t)=>e.jsx("h3",{ref:t,className:q("text-2xl font-semibold leading-none tracking-tight",s),...a}));w.displayName="CardTitle";const B=l.forwardRef(({className:s,...a},t)=>e.jsx("p",{ref:t,className:q("text-sm text-muted-foreground",s),...a}));B.displayName="CardDescription";const y=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:q("p-6 pt-0",s),...a}));y.displayName="CardContent";const J=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:q("flex items-center p-6 pt-0",s),...a}));J.displayName="CardFooter";const Xn="https://cwcduhvwkihpnuaoflps.supabase.co",el="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN3Y2R1aHZ3a2locG51YW9mbHBzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIxMDc2MDksImV4cCI6MjA1NzY4MzYwOX0.JXPGnrntA_M-OhhhY6U0Nc70-2jEyVKXENoI-gWnGFw",P=gi(Xn,el),Pr=l.createContext(void 0),Xe=()=>{const s=l.useContext(Pr);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},sl=({children:s})=>{const[a,t]=l.useState(null),[r,i]=l.useState(!0);l.useEffect(()=>{(async()=>{const{data:{session:d}}=await P.auth.getSession();t((d==null?void 0:d.user)??null),i(!1)})();const{data:{subscription:m}}=P.auth.onAuthStateChange((d,p)=>{t((p==null?void 0:p.user)??null),i(!1)});return()=>m.unsubscribe()},[]);const n={user:a,loading:r,signOut:async()=>{await P.auth.signOut()}};return e.jsx(Pr.Provider,{value:n,children:s})},ls=l.forwardRef(({className:s,...a},t)=>e.jsx(Ea,{ref:t,className:q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a}));ls.displayName=Ea.displayName;const bs=l.forwardRef(({className:s,...a},t)=>e.jsx(Fa,{ref:t,className:q("aspect-square h-full w-full",s),...a}));bs.displayName=Fa.displayName;const cs=l.forwardRef(({className:s,...a},t)=>e.jsx(La,{ref:t,className:q("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a}));cs.displayName=La.displayName;const Tr=vi,Ir=yi,tl=l.forwardRef(({className:s,inset:a,children:t,...r},i)=>e.jsxs(Ra,{ref:i,className:q("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",s),...r,children:[t,e.jsx(Ut,{className:"ml-auto h-4 w-4"})]}));tl.displayName=Ra.displayName;const al=l.forwardRef(({className:s,...a},t)=>e.jsx(Ka,{ref:t,className:q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));al.displayName=Ka.displayName;const ta=l.forwardRef(({className:s,sideOffset:a=4,...t},r)=>e.jsx(ji,{children:e.jsx(qa,{ref:r,sideOffset:a,className:q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t})}));ta.displayName=qa.displayName;const ts=l.forwardRef(({className:s,inset:a,...t},r)=>e.jsx(za,{ref:r,className:q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",s),...t}));ts.displayName=za.displayName;const rl=l.forwardRef(({className:s,children:a,checked:t,...r},i)=>e.jsxs(Oa,{ref:i,className:q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:t,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ba,{children:e.jsx(Se,{className:"h-4 w-4"})})}),a]}));rl.displayName=Oa.displayName;const il=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs($a,{ref:r,className:q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ba,{children:e.jsx(fi,{className:"h-2 w-2 fill-current"})})}),a]}));il.displayName=$a.displayName;const Mr=l.forwardRef(({className:s,inset:a,...t},r)=>e.jsx(Ua,{ref:r,className:q("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...t}));Mr.displayName=Ua.displayName;const zt=l.forwardRef(({className:s,...a},t)=>e.jsx(Va,{ref:t,className:q("-mx-1 my-1 h-px bg-muted",s),...a}));zt.displayName=Va.displayName;function nl(){const{theme:s,setTheme:a}=Zn();return e.jsxs(Tr,{children:[e.jsx(Ir,{asChild:!0,children:e.jsxs(f,{variant:"ghost",size:"icon",children:[e.jsx(Ni,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(bi,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(ta,{align:"end",children:[e.jsx(ts,{onClick:()=>a("light"),children:"Light"}),e.jsx(ts,{onClick:()=>a("dark"),children:"Dark"}),e.jsx(ts,{onClick:()=>a("system"),children:"System"})]})]})}const Dr=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Ha,{ref:r,className:q("relative z-10 flex max-w-max flex-1 items-center justify-center",s),...t,children:[a,e.jsx(Fr,{})]}));Dr.displayName=Ha.displayName;const Er=l.forwardRef(({className:s,...a},t)=>e.jsx(Ga,{ref:t,className:q("group flex flex-1 list-none items-center justify-center space-x-1",s),...a}));Er.displayName=Ga.displayName;const ms=wi,ll=vs("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),Ot=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Ya,{ref:r,className:q(ll(),"group",s),...t,children:[a," ",e.jsx(nt,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));Ot.displayName=Ya.displayName;const Bt=l.forwardRef(({className:s,...a},t)=>e.jsx(Wa,{ref:t,className:q("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",s),...a}));Bt.displayName=Wa.displayName;const Ae=Ci,Fr=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{className:q("absolute left-0 top-full flex justify-center"),children:e.jsx(Qa,{className:q("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",s),ref:t,...a})}));Fr.displayName=Qa.displayName;const cl=l.forwardRef(({className:s,...a},t)=>e.jsx(Ja,{ref:t,className:q("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",s),...a,children:e.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));cl.displayName=Ja.displayName;const ol=()=>e.jsx(Dr,{className:"hidden md:flex",children:e.jsxs(Er,{children:[e.jsxs(ms,{children:[e.jsxs(Ot,{children:[e.jsx(qs,{className:"w-4 h-4 mr-2"}),"Marketplace"]}),e.jsx(Bt,{children:e.jsxs("ul",{className:"grid gap-3 p-6 md:w-[400px] lg:w-[500px] lg:grid-cols-[.75fr_1fr]",children:[e.jsx("li",{className:"row-span-3",children:e.jsx(Ae,{asChild:!0,children:e.jsxs(V,{className:"flex h-full w-full select-none flex-col justify-end rounded-md bg-gradient-to-b from-muted/50 to-muted p-6 no-underline outline-none focus:shadow-md",to:"/farm-input-marketplace",children:[e.jsx(Vt,{className:"h-6 w-6"}),e.jsx("div",{className:"mb-2 mt-4 text-lg font-medium",children:"Farm Input Marketplace"}),e.jsx("p",{className:"text-sm leading-tight text-muted-foreground",children:"Quality agricultural inputs from verified suppliers"})]})})}),e.jsx("li",{children:e.jsx(Ae,{asChild:!0,children:e.jsxs(V,{to:"/commodity-trading",className:"block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",children:[e.jsx("div",{className:"text-sm font-medium leading-none",children:"Commodity Trading"}),e.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground",children:"Trade agricultural commodities and connect with buyers"})]})})}),e.jsx("li",{children:e.jsx(Ae,{asChild:!0,children:e.jsxs(V,{to:"/marketplace",className:"block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",children:[e.jsx("div",{className:"text-sm font-medium leading-none",children:"Agricultural Marketplace"}),e.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground",children:"Buy fresh produce directly from farmers"})]})})}),e.jsx("li",{children:e.jsx(Ae,{asChild:!0,children:e.jsxs(V,{to:"/city-markets",className:"block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",children:[e.jsx("div",{className:"text-sm font-medium leading-none",children:"City Markets"}),e.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground",children:"Find agricultural markets across Kenya"})]})})})]})})]}),e.jsxs(ms,{children:[e.jsxs(Ot,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Logistics"]}),e.jsx(Bt,{children:e.jsxs("ul",{className:"grid w-[400px] gap-3 p-4 md:w-[500px] md:grid-cols-2 lg:w-[600px]",children:[e.jsx("li",{children:e.jsx(Ae,{asChild:!0,children:e.jsxs(V,{to:"/logistics",className:"block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",children:[e.jsx("div",{className:"text-sm font-medium leading-none",children:"Smart Logistics Network"}),e.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground",children:"Connect with transport providers and storage facilities"})]})})}),e.jsx("li",{children:e.jsx(Ae,{asChild:!0,children:e.jsxs(V,{to:"/logistics-solutions-map",className:"block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",children:[e.jsx("div",{className:"text-sm font-medium leading-none",children:"Logistics Solutions Map"}),e.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground",children:"Interactive map of logistics solutions"})]})})}),e.jsx("li",{children:e.jsx(Ae,{asChild:!0,children:e.jsxs(V,{to:"/transporter-signup",className:"block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",children:[e.jsx("div",{className:"text-sm font-medium leading-none",children:"Join as Transporter"}),e.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground",children:"Register your transport services"})]})})})]})})]}),e.jsx(ms,{children:e.jsx(Ae,{asChild:!0,children:e.jsxs(V,{to:"/service-providers",className:"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Service Providers"]})})}),e.jsx(ms,{children:e.jsx(Ae,{asChild:!0,children:e.jsxs(V,{to:"/sentiment-analysis",className:"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Market Insights"]})})}),e.jsx(ms,{children:e.jsx(Ae,{asChild:!0,children:e.jsxs(V,{to:"/community-forums",className:"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50",children:[e.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Community"]})})}),e.jsx(ms,{children:e.jsx(Ae,{asChild:!0,children:e.jsxs(V,{to:"/city-markets",className:"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50",children:[e.jsx(lt,{className:"w-4 h-4 mr-2"}),"Markets"]})})})]})}),ne=()=>{var c,n;const{user:s,signOut:a}=Xe(),t=Ne(),r=async()=>{try{await a(),t("/")}catch(o){console.error("Error signing out:",o)}},i=()=>e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsxs("g",{transform:"translate(50, 50)",children:[e.jsx("path",{d:"M-15 15 L0 -25 L15 15 L8 10 L0 -10 L-8 10 Z",fill:"url(#dynamicGradient)"}),e.jsx("path",{d:"M-12 5 Q-20 0 -18 8 Q-12 12 -8 8 Q-6 2 -12 5 Z",fill:"#22c55e",opacity:"0.9"}),e.jsx("path",{d:"M12 5 Q20 0 18 8 Q12 12 8 8 Q6 2 12 5 Z",fill:"#22c55e",opacity:"0.9"}),e.jsxs("g",{opacity:"0.7",children:[e.jsx("line",{x1:"0",y1:"-25",x2:"8",y2:"-32",stroke:"#4ade80",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"0",y1:"-25",x2:"-8",y2:"-32",stroke:"#4ade80",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"0",y1:"-25",x2:"0",y2:"-35",stroke:"#4ade80",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"8",cy:"-32",r:"2",fill:"#4ade80"}),e.jsx("circle",{cx:"-8",cy:"-32",r:"2",fill:"#4ade80"}),e.jsx("circle",{cx:"0",cy:"-35",r:"2",fill:"#4ade80"})]}),e.jsxs("g",{opacity:"0.6",children:[e.jsx("path",{d:"M-5 15 Q-10 20 -15 18 Q-12 22 -8 20 Q-5 18 -5 15",stroke:"#16a34a",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M5 15 Q10 20 15 18 Q12 22 8 20 Q5 18 5 15",stroke:"#16a34a",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M0 15 Q0 22 -3 25 Q3 25 0 15",stroke:"#16a34a",strokeWidth:"2",fill:"none"})]}),e.jsx("circle",{cx:"0",cy:"0",r:"25",fill:"none",stroke:"#4ade80",strokeWidth:"1",opacity:"0.3",className:"pulse-ring"}),e.jsx("circle",{cx:"0",cy:"0",r:"35",fill:"none",stroke:"#22c55e",strokeWidth:"1",opacity:"0.2",className:"pulse-ring-2"})]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"dynamicGradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"#16a34a",stopOpacity:1}}),e.jsx("stop",{offset:"50%",style:{stopColor:"#22c55e",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"#4ade80",stopOpacity:1}})]})})]})});return e.jsx("header",{className:"bg-background border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(V,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(i,{}),e.jsx("span",{className:"text-xl font-bold text-primary",children:"SokoConnect"})]}),e.jsx(ol,{})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(nl,{}),s?e.jsxs(Tr,{children:[e.jsx(Ir,{asChild:!0,children:e.jsx(f,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:e.jsxs(ls,{className:"h-10 w-10",children:[e.jsx(bs,{src:(c=s.user_metadata)==null?void 0:c.avatar_url,alt:"Profile"}),e.jsx(cs,{children:e.jsx(Xs,{className:"h-4 w-4"})})]})})}),e.jsxs(ta,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(Mr,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:((n=s.user_metadata)==null?void 0:n.full_name)||s.email}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:s.email})]})}),e.jsx(zt,{}),e.jsx(ts,{asChild:!0,children:e.jsxs(V,{to:"/profile",className:"cursor-pointer",children:[e.jsx(Xs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]})}),e.jsx(ts,{asChild:!0,children:e.jsxs(V,{to:"/settings",className:"cursor-pointer",children:[e.jsx(Za,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]})}),e.jsx(zt,{}),e.jsxs(ts,{onClick:r,className:"cursor-pointer",children:[e.jsx(ki,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]}):e.jsx(f,{asChild:!0,children:e.jsx(V,{to:"/auth",children:"Sign In"})})]})]})})})},gs=er,yt=sr,dl=Ht,Lr=l.forwardRef(({className:s,...a},t)=>e.jsx(ct,{ref:t,className:q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));Lr.displayName=ct.displayName;const is=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(dl,{children:[e.jsx(Lr,{}),e.jsxs(ot,{ref:r,className:q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs(Xa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));is.displayName=ot.displayName;const js=({className:s,...a})=>e.jsx("div",{className:q("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});js.displayName="DialogHeader";const Nt=({className:s,...a})=>e.jsx("div",{className:q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});Nt.displayName="DialogFooter";const fs=l.forwardRef(({className:s,...a},t)=>e.jsx(dt,{ref:t,className:q("text-lg font-semibold leading-none tracking-tight",s),...a}));fs.displayName=dt.displayName;const ml=l.forwardRef(({className:s,...a},t)=>e.jsx(mt,{ref:t,className:q("text-sm text-muted-foreground",s),...a}));ml.displayName=mt.displayName;const M=l.forwardRef(({className:s,type:a,...t},r)=>e.jsx("input",{type:a,className:q("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...t}));M.displayName="Input";const ge=l.forwardRef(({className:s,...a},t)=>e.jsx("textarea",{className:q("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a}));ge.displayName="Textarea";const ul=vs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),I=l.forwardRef(({className:s,...a},t)=>e.jsx(tr,{ref:t,className:q(ul(),s),...a}));I.displayName=tr.displayName;const xl=1,hl=1e6;let At=0;function pl(){return At=(At+1)%Number.MAX_SAFE_INTEGER,At.toString()}const Pt=new Map,fa=s=>{if(Pt.has(s))return;const a=setTimeout(()=>{Pt.delete(s),Ms({type:"REMOVE_TOAST",toastId:s})},hl);Pt.set(s,a)},gl=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,xl)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===a.toast.id?{...t,...a.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?fa(t):s.toasts.forEach(r=>{fa(r.id)}),{...s,toasts:s.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==a.toastId)}}},Qs=[];let Js={toasts:[]};function Ms(s){Js=gl(Js,s),Qs.forEach(a=>{a(Js)})}function _s({...s}){const a=pl(),t=i=>Ms({type:"UPDATE_TOAST",toast:{...i,id:a}}),r=()=>Ms({type:"DISMISS_TOAST",toastId:a});return Ms({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:i=>{i||r()}}}),{id:a,dismiss:r,update:t}}function ee(){const[s,a]=l.useState(Js);return l.useEffect(()=>(Qs.push(a),()=>{const t=Qs.indexOf(a);t>-1&&Qs.splice(t,1)}),[s]),{...s,toast:_s,dismiss:t=>Ms({type:"DISMISS_TOAST",toastId:t})}}const va="https://amis.kilimo.go.ke/en/api",Tt=2,ya=1e3,jl=2*60*60*1e3,Je={};class Ye{static async get(a,t,r,i=!1){return this.request(a,{method:"GET",queryParams:t,fallbackReturnValue:r,bypassCache:i,timeout:3e3})}static async post(a,t,r){return this.request(a,{method:"POST",body:t,fallbackReturnValue:r})}static async request(a,t={}){const{method:r="GET",body:i,queryParams:c,fallbackReturnValue:n={results:[]},retries:o=0,bypassCache:m=!1,timeout:d=5e3}=t;let p=`${va}/${a}`;if(c){const x=new URLSearchParams;Object.entries(c).forEach(([k,u])=>{u!=null&&u!==""&&x.append(k,u)});const N=x.toString();N&&(p+=`?${N}`)}const j=`${r}:${p}`;if(r==="GET"&&!m&&Je[j]){const x=Je[j];if(Date.now()-x.timestamp<jl)return console.log(`Using cached data for ${p}`),x.data;delete Je[j]}const g={method:r,headers:{Accept:"application/json","Content-Type":"application/json",Origin:window.location.origin},mode:"cors",cache:"no-cache",credentials:"same-origin"};i&&(r==="POST"||r==="PUT")&&(g.body=JSON.stringify(i)),console.log(`Making ${r} request to ${p} (attempt ${o+1} of ${Tt+1})`);try{const x=new AbortController,N=setTimeout(()=>x.abort(),d);g.signal=x.signal;const k=await fetch(p,g);if(clearTimeout(N),k.status>=500&&k.status<600&&o<Tt){const h=ya*Math.pow(2,o);return console.log(`Server error (${k.status}), retrying in ${h}ms...`),await new Promise(S=>setTimeout(S,h)),this.request(a,{...t,retries:o+1})}if(!k.ok){const h=await k.text();return console.error(`API error (${k.status}): ${h}`),r==="GET"&&(Je[j]={timestamp:Date.now(),data:n}),n}const u=await k.json();return r==="GET"&&(Je[j]={timestamp:Date.now(),data:u}),u}catch(x){if(x instanceof DOMException&&x.name==="AbortError"?console.error(`Request timeout for ${a} after ${d}ms`):console.error(`Failed to connect to API (${a}):`,x),o<Tt){const N=ya*Math.pow(2,o);return console.log(`Network error, retrying in ${N}ms...`),await new Promise(k=>setTimeout(k,N)),this.request(a,{...t,retries:o+1})}if(typeof n<"u")return console.log(`Maximum retries reached. Using fallback data for ${a}`),r==="GET"&&(Je[j]={timestamp:Date.now(),data:n}),n;throw x}}static async checkApiHealth(){try{const a=new AbortController,t=setTimeout(()=>a.abort(),3e3),r=await fetch(`${va}/health-check`,{method:"GET",headers:{Accept:"application/json"},mode:"cors",cache:"no-cache",credentials:"same-origin",signal:a.signal});return clearTimeout(t),r.ok}catch(a){return console.warn("API health check failed:",a),!1}}static clearCache(){Object.keys(Je).forEach(a=>delete Je[a]),console.log("API cache cleared")}}const fl=()=>{const[s,a]=l.useState(!1),[t,r]=l.useState({title:"",description:"",email:""}),[i,c]=l.useState(!1),{toast:n}=ee(),o=async m=>{m.preventDefault(),c(!0);try{await Ye.post("/api/feature-request",t),n({title:"Feature Request Submitted",description:"Thank you for your feedback!"}),a(!1),r({title:"",description:"",email:""})}catch(d){n({title:"Submission Failed",description:d.message,variant:"destructive"})}finally{c(!1)}};return e.jsxs("footer",{className:"bg-background border-t mt-auto",children:[e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"AgriConnect"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connecting farmers, traders, and service providers for a better agricultural ecosystem."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Platform"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(V,{to:"/commodity-trading",className:"text-muted-foreground hover:text-foreground",children:"Commodity Trading"})}),e.jsx("li",{children:e.jsx(V,{to:"/logistics",className:"text-muted-foreground hover:text-foreground",children:"Logistics"})}),e.jsx("li",{children:e.jsx(V,{to:"/service-providers",className:"text-muted-foreground hover:text-foreground",children:"Service Providers"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(V,{to:"/faq",className:"text-muted-foreground hover:text-foreground",children:"FAQ"})}),e.jsx("li",{children:e.jsx(V,{to:"/contact",className:"text-muted-foreground hover:text-foreground",children:"Contact"})}),e.jsx("li",{children:e.jsx(V,{to:"/community-forum",className:"text-muted-foreground hover:text-foreground",children:"Community Forum"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(V,{to:"/privacy-policy",className:"text-muted-foreground hover:text-foreground",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx(V,{to:"/terms-of-service",className:"text-muted-foreground hover:text-foreground",children:"Terms of Service"})})]})]})]}),e.jsx("div",{className:"border-t mt-8 pt-8 text-center text-sm text-muted-foreground",children:e.jsx("p",{children:"Â© 2024 AgriConnect. All rights reserved."})})]}),e.jsxs(gs,{open:s,onOpenChange:a,children:[e.jsx(yt,{asChild:!0,children:e.jsx(f,{variant:"outline",className:"mt-6",children:"Submit Feature Request"})}),e.jsxs(is,{children:[e.jsx(js,{children:e.jsx(fs,{children:"Submit a Feature Request"})}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Title"}),e.jsx(M,{value:t.title,onChange:m=>r(d=>({...d,title:m.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Description"}),e.jsx(ge,{value:t.description,onChange:m=>r(d=>({...d,description:m.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Email (optional)"}),e.jsx(M,{type:"email",value:t.email,onChange:m=>r(d=>({...d,email:m.target.value}))})]}),e.jsxs(Nt,{children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(f,{type:"submit",disabled:i,children:i?"Submitting...":"Submit"})]})]})]})]})]})},vl=vs("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _({className:s,variant:a,...t}){return e.jsx("div",{className:q(vl({variant:a}),s),...t})}const yl=()=>{const s=[{icon:me,title:"Real-time Market Data",description:"Access live agricultural market prices and demand forecasts",link:"/kilimo-ams-data"},{icon:oe,title:"Service Providers",description:"Connect with agricultural service providers and experts",link:"/service-providers"},{icon:ye,title:"Logistics Solutions",description:"Find transportation and storage solutions for your produce",link:"/logistics"},{icon:xs,title:"Community Forum",description:"Join discussions with fellow farmers and agribusiness professionals",link:"/community-forum"}];return e.jsx("div",{className:"relative overflow-hidden bg-gradient-to-br from-green-50 via-blue-50 to-white",children:e.jsxs("div",{className:"container mx-auto px-4 py-16 lg:py-24",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx(_,{variant:"secondary",className:"mb-4",children:"ðŸŒ¾ Agricultural Technology Platform"}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",children:"Connect. Trade. Grow."}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Empowering farmers and agribusiness with real-time market data, logistics solutions, and community connections across Kenya's agricultural value chain."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[e.jsx(V,{to:"/kilimo-ams-data",children:e.jsxs(f,{size:"lg",className:"w-full sm:w-auto",children:["Explore Market Data",e.jsx(ut,{className:"ml-2 h-4 w-4"})]})}),e.jsx(V,{to:"/business-marketing",children:e.jsxs(f,{size:"lg",variant:"outline",className:"w-full sm:w-auto bg-green-50 border-green-200 text-green-700 hover:bg-green-100",children:[e.jsx(et,{className:"mr-2 h-4 w-4"}),"Advertise Your Business"]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-blue-100 rounded-lg p-6 mb-12 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx(et,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Business Marketing"}),e.jsx(_,{className:"bg-green-600",children:"Popular"})]}),e.jsx("p",{className:"text-green-700 mb-4",children:"Reach thousands of farmers and agricultural professionals. Advertise your business for just $20 for 30 days."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm text-green-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Gt,{className:"h-4 w-4"}),e.jsx("span",{children:"Targeted Audience"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:"$20 for 30 Days"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"1000+ Daily Visitors"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((a,t)=>e.jsx(v,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:e.jsx(V,{to:a.link,children:e.jsxs(y,{className:"p-6 text-center",children:[e.jsx(a.icon,{className:"h-12 w-12 text-primary mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:a.description})]})})},t))}),e.jsx("div",{className:"text-center mt-12",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Trusted by farmers, cooperatives, and agribusiness across Kenya"})})]})})},de=Si,ce=l.forwardRef(({className:s,...a},t)=>e.jsx(ar,{ref:t,className:q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a}));ce.displayName=ar.displayName;const K=l.forwardRef(({className:s,...a},t)=>e.jsx(rr,{ref:t,className:q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a}));K.displayName=rr.displayName;const O=l.forwardRef(({className:s,...a},t)=>e.jsx(ir,{ref:t,className:q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a}));O.displayName=ir.displayName;const It=async()=>{console.log("Fetching real featured news from Ministry API");const s=await Ye.get("news/",void 0,{results:[]});console.log("Received news data:",s);const a=s.results.map((t,r)=>({id:t.id||r+1,title:t.title||t.headline||"News update",source:t.source||"Ministry of Agriculture",date:t.published_date||new Date().toISOString().split("T")[0],tags:t.tags?typeof t.tags=="string"?t.tags.split(",").map(i=>i.trim()):t.tags:["agriculture"],location:t.location||"Kenya",summary:t.summary||t.content||t.description||"No description available",url:t.url||`${window.location.origin}/news/${t.id}/`}));return console.log(`Successfully fetched ${a.length} news items`),a},Na=async()=>{console.log("Fetching real services data from Ministry API");const s=await Ye.get("services/",void 0,{results:[]});console.log("Received services data:",s);const a=s.results.map((t,r)=>({id:t.id||r+1,title:t.name||t.title||"Service",provider:t.provider||t.organization||"Service Provider",source:t.provider||t.organization||"Service Provider",date:t.date_added||new Date().toISOString().split("T")[0],tags:t.tags?typeof t.tags=="string"?t.tags.split(",").map(i=>i.trim()):t.tags:["service"],location:t.locations||t.coverage||"Kenya",summary:t.description||t.summary||"No description available",url:t.url||t.website||`${window.location.origin}/services/${t.id}/`}));return console.log(`Successfully fetched ${a.length} services`),a},ba=async()=>{console.log("Fetching real products data from Ministry API");const s=await Ye.get("products/",void 0,{results:[]});console.log("Received products data:",s);const a=s.results.map((t,r)=>({id:t.id||r+1,title:t.name||t.title||"Product",provider:t.provider||t.seller||t.organization||"Provider",source:t.provider||t.seller||t.organization||"Provider",date:t.date_listed||t.date_added||new Date().toISOString().split("T")[0],tags:t.tags?typeof t.tags=="string"?t.tags.split(",").map(i=>i.trim()):t.tags:["product"],location:t.location||"Kenya",summary:t.description||t.summary||"No description available",price:t.price?`KES ${t.price}`:void 0,url:t.url||`${window.location.origin}/products/${t.id}/`}));return console.log(`Successfully fetched ${a.length} products`),a},Nl=async s=>{console.log("Submitting news item to Ministry API",s);const a={title:s.title,source:s.source,tags:Array.isArray(s.tags)?s.tags.join(", "):s.tags,location:s.location,content:s.summary,url:s.url,published_date:new Date().toISOString().split("T")[0]};try{return await Ye.post("news/submit/",a),console.log("News item submitted successfully"),!0}catch(t){throw console.error("Failed to submit news item:",t),t}},bl=()=>{const[s,a]=l.useState("news"),[t,r]=l.useState(!0),[i,c]=l.useState(null),[n,o]=l.useState([]),[m,d]=l.useState([]),[p,j]=l.useState([]),[g,x]=l.useState({title:"",source:"",tags:"",location:"",summary:"",url:""}),[N,k]=l.useState(!1),[u,h]=l.useState(!1),{toast:S}=ee();l.useEffect(()=>{const R=async()=>{r(!0);try{const[F,Q,he]=await Promise.all([It(),Na(),ba()]);o(F),d(Q),j(he),c(new Date)}catch(F){console.error("Error fetching featured content:",F),S({title:"Error loading content",description:"Could not load the featured content. Please check your connection and try again.",variant:"destructive"}),o(Q=>Q.length?Q:[]),d(Q=>Q.length?Q:[]),j(Q=>Q.length?Q:[])}finally{r(!1)}};R();const $=4*60*60*1e3,Z=setInterval(R,$);return()=>clearInterval(Z)},[S]);const T=async()=>{r(!0);try{const[R,$,Z]=await Promise.all([It(),Na(),ba()]);o(R),d($),j(Z),c(new Date),S({title:"Content refreshed",description:"Featured content has been updated with the latest data."})}catch(R){console.error("Error refreshing featured content:",R),S({title:"Error refreshing content",description:"Could not refresh the content. Please check your connection and try again.",variant:"destructive"})}finally{r(!1)}},A=R=>{const{name:$,value:Z}=R.target;x(F=>({...F,[$]:Z}))},D=async()=>{if(!g.title||!g.source||!g.summary){S({title:"Missing information",description:"Please fill in all required fields.",variant:"destructive"});return}k(!0);try{if(await Nl({title:g.title,source:g.source,date:new Date().toISOString().split("T")[0],tags:g.tags.split(",").map($=>$.trim()),location:g.location,summary:g.summary,url:g.url||"#"})){const $=await It();o($),x({title:"",source:"",tags:"",location:"",summary:"",url:""}),h(!1),S({title:"News submitted",description:"Your news has been submitted successfully."})}}catch(R){console.error("Error submitting news:",R),S({title:"Submission error",description:"Could not submit your news. Please check your connection and try again.",variant:"destructive"})}finally{k(!1)}},L=R=>t?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):R.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:"No items found. Please check your connection and try refreshing."}),e.jsxs(f,{onClick:T,variant:"outline",className:"mt-4",children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"})," Refresh"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:R.map($=>e.jsx(v,{className:"hover:shadow-md transition-all overflow-hidden",children:e.jsxs(y,{className:"p-0",children:[e.jsxs("div",{className:"bg-muted/40 p-5",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 line-clamp-2",children:$.title}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-2",children:[e.jsx(oe,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:$.provider||$.source})]}),e.jsxs("div",{className:"flex flex-wrap gap-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center mr-3",children:[e.jsx(Ce,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:new Date($.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center mr-3",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:$.location})]})]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:$.summary}),$.price&&e.jsx("div",{className:"font-bold text-primary mb-4",children:$.price}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:$.tags.map(Z=>e.jsxs("div",{className:"bg-secondary/50 text-secondary-foreground text-xs px-2 py-1 rounded-full flex items-center",children:[e.jsx(st,{className:"h-3 w-3 mr-1"}),Z]},Z))}),e.jsx(f,{asChild:!0,variant:"outline",size:"sm",className:"w-full",children:e.jsxs("a",{href:$.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center",children:["View Details ",e.jsx(qe,{className:"ml-1 h-3 w-3"})]})})]})]})},$.id))});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{children:i&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last updated: ",i.toLocaleString()]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(gs,{open:u,onOpenChange:h,children:[e.jsx(yt,{asChild:!0,children:e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(pe,{className:"h-4 w-4 mr-1"})," Submit News"]})}),e.jsxs(is,{className:"sm:max-w-[500px]",children:[e.jsx(js,{children:e.jsx(fs,{children:"Submit News Item"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"title",children:"Title *"}),e.jsx(M,{id:"title",name:"title",value:g.title,onChange:A,required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"source",children:"Source *"}),e.jsx(M,{id:"source",name:"source",value:g.source,onChange:A,required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"tags",children:"Tags (comma separated)"}),e.jsx(M,{id:"tags",name:"tags",value:g.tags,onChange:A,placeholder:"e.g. maize, exports, policy"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"location",children:"Location"}),e.jsx(M,{id:"location",name:"location",value:g.location,onChange:A})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"summary",children:"Summary *"}),e.jsx(ge,{id:"summary",name:"summary",rows:3,value:g.summary,onChange:A,required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"url",children:"Source URL"}),e.jsx(M,{id:"url",name:"url",type:"url",value:g.url,onChange:A,placeholder:"https://"})]})]}),e.jsx(Nt,{children:e.jsx(f,{onClick:D,disabled:N,children:N?"Submitting...":"Submit News"})})]})]}),e.jsxs(f,{onClick:T,variant:"ghost",size:"sm",disabled:t,children:[e.jsx(Ds,{className:`h-4 w-4 ${t?"animate-spin":""}`}),e.jsx("span",{className:"sr-only",children:"Refresh"})]})]})]}),e.jsxs(de,{defaultValue:"news",value:s,onValueChange:a,children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs(ce,{className:"grid grid-cols-3 w-full max-w-md",children:[e.jsxs(K,{value:"news",className:"flex items-center",children:[e.jsx(_i,{className:"h-4 w-4 mr-2"}),"News"]}),e.jsxs(K,{value:"services",className:"flex items-center",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Services"]}),e.jsxs(K,{value:"products",className:"flex items-center",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Products"]})]})}),e.jsx(O,{value:"news",className:"mt-0",children:L(n)}),e.jsx(O,{value:"services",className:"mt-0",children:L(m)}),e.jsx(O,{value:"products",className:"mt-0",children:L(p)})]})]})},Rr=s=>({agriculture:"Agricultural Issues",solutions:"Agricultural Solutions",tender:"Tender","awarded-tender":"Awarded Tender"})[s]||s,wl=()=>["kilimo.go.ke","kenyaseed.com","kalro.org","moa.go.ke","nafis.go.ke","agritechinnovations.co.ke","kephis.org","eaff.org","farmafrica.org","agriculture.go.ke","agra.org","kebs.org","afa.go.ke","agricultureauthority.go.ke","globalgap.org","koan.co.ke","farmafrica.org"],Cl=s=>{try{const t=new URL(s).hostname;return wl().some(r=>t===r||t.endsWith(`.${r}`))}catch{return!1}},kl=s=>{var i,c;const a=((i=s.title)==null?void 0:i.toLowerCase())||"",t=((c=s.description)==null?void 0:c.toLowerCase())||"",r=["guaranteed results","miracle solution","secret that experts","100% effective","revolutionary breakthrough"];for(const n of r)if(a.includes(n)||t.includes(n))return!1;return s.source&&["Ministry of Agriculture","Kenya Seed Company","Kenya Agricultural Research Institute","KALRO","FAO","AgriTech Innovations","Kenya Plant Health Inspectorate Service","Kenya Bureau of Standards","KEBS","National Farmers Information Service","Agriculture and Food Authority"].some(o=>s.source.includes(o)),!0},os=(s=800)=>new Promise(a=>setTimeout(a,s)),$s=async()=>(await os(800),console.info("Processed 85 Kilimo statistics"),[{id:"1",name:"Maize Production",value:"3.8 million tonnes",category:"Production",county:"National",unit:"tonnes",source:"KNBS Agricultural Census 2023",verified:!0},{id:"2",name:"Coffee Production",value:"45,000 tonnes",category:"Production",county:"National",unit:"tonnes",source:"Coffee Board of Kenya 2023",verified:!0},{id:"3",name:"Average Maize Price",value:"KES 4,200",category:"Prices",county:"National",unit:"KES/90kg bag",source:"Nairobi Grain Exchange 2023",verified:!0},{id:"4",name:"Nakuru Production",value:"235,000 tonnes",category:"County",county:"Nakuru",unit:"tonnes",source:"KNBS County Statistics 2023",verified:!0},{id:"5",name:"Kiambu Production",value:"190,000 tonnes",category:"County",county:"Kiambu",unit:"tonnes",source:"KNBS County Statistics 2023",verified:!0},{id:"6",name:"Meru Production",value:"210,000 tonnes",category:"County",county:"Meru",unit:"tonnes",source:"KNBS County Statistics 2023",verified:!0}]),Sl=async()=>{await os(800);const s=["Nairobi","Mombasa","Kisumu","Nakuru","Kiambu","Meru","Kakamega","Nyeri","Machakos","Uasin Gishu","Kirinyaga","Bungoma","Bomet"],a=[{name:"Tomatoes",minPrice:2800,maxPrice:4500,unit:"crate"},{name:"Potatoes",minPrice:1800,maxPrice:3e3,unit:"bag"},{name:"Maize",minPrice:3e3,maxPrice:6e3,unit:"bag"},{name:"Beans",minPrice:7e3,maxPrice:12e3,unit:"bag"},{name:"Onions",minPrice:2e3,maxPrice:4e3,unit:"bag"},{name:"Cabbage",minPrice:15,maxPrice:40,unit:"piece"},{name:"Bananas",minPrice:300,maxPrice:600,unit:"bunch"},{name:"Carrots",minPrice:1500,maxPrice:3e3,unit:"bag"},{name:"Avocado",minPrice:10,maxPrice:30,unit:"piece"},{name:"Mangoes",minPrice:500,maxPrice:1200,unit:"crate"}],t=[];for(let r=0;r<18;r++){const i=s[r%s.length],c=["High","Medium","Low"][Math.floor(Math.random()*3)],n=[],o=3+Math.floor(Math.random()*4),m=[...a].sort(()=>.5-Math.random());for(let d=0;d<o;d++){const p=m[d],j=Math.floor(p.minPrice+Math.random()*(p.maxPrice-p.minPrice));n.push({id:`P${d+1}${r}`,produceName:p.name,price:j,unit:p.unit,date:new Date().toISOString().split("T")[0]})}t.push({id:`MKT${(r+1).toString().padStart(3,"0")}`,name:`${i} ${["Central","Main","Municipal","Farmers","City"][Math.floor(Math.random()*5)]} Market`,county:i,location:{county:i},producePrices:n,demand:c,operatingHours:`${5+Math.floor(Math.random()*3)}:00 AM - ${4+Math.floor(Math.random()*4)}:00 PM`})}return t},_l=async()=>{await os(900);const s=["Nairobi","Mombasa","Kisumu","Nakuru","Kiambu","Meru","Kakamega","Nyeri","Machakos","Uasin Gishu","Kirinyaga","Bungoma","Bomet"],a={Vegetables:["Tomatoes","Kale","Cabbage","Spinach","Carrots","Onions","Garlic"],Fruits:["Bananas","Avocados","Mangoes","Oranges","Apples","Pineapples"],Tubers:["Potatoes","Sweet Potatoes","Cassava","Arrow Roots"],Cereals:["Maize","Wheat","Rice","Barley","Sorghum"],Legumes:["Beans","Green Grams","Peas","Lentils","Soybeans"]},t=["A","B","A+","Premium"],r=["kg","ton","bag","crate"],i=[];for(let c=0;c<30;c++){const n=Object.keys(a),o=n[Math.floor(Math.random()*n.length)],m=a[o],d=m[Math.floor(Math.random()*m.length)],p=s[Math.floor(Math.random()*s.length)],j=new Date;j.setDate(j.getDate()+Math.floor(Math.random()*30)),i.push({id:`P${(c+1).toString().padStart(3,"0")}`,name:d,category:o,county:p,quantity:100+Math.floor(Math.random()*5e3),unit:r[Math.floor(Math.random()*r.length)],qualityGrade:t[Math.floor(Math.random()*t.length)],availableFrom:j.toISOString().split("T")[0],farmer:`Farmer ${Math.floor(Math.random()*20)+1}`,farmerId:`F${(Math.floor(Math.random()*20)+1).toString().padStart(3,"0")}`})}return i},wa=[{id:"1",title:"Managing Tomato Blight in Wet Seasons",description:"Effective strategies for managing tomato blight during rainy seasons in Kenya",category:"issues",date:"2023-11-15",source:"Kenya Agricultural Research Institute",content:"Tomato blight is a common disease that affects tomato crops during wet seasons. Symptoms include dark spots on leaves, stems, and fruits. To manage tomato blight: 1) Plant resistant varieties 2) Improve drainage in your field 3) Apply appropriate fungicides preventatively 4) Practice crop rotation 5) Remove and destroy infected plants to prevent spread.",tags:["disease","tomatoes","wet season","fungal disease"],location:"Central Kenya"},{id:"2",title:"Tender: Supply of Agricultural Inputs to Nakuru County",description:"Tender notice for the supply of agricultural inputs to Nakuru County",category:"tender",date:"2023-12-01",source:"Nakuru County Government",content:"The Nakuru County Government invites sealed bids from eligible candidates for the supply of agricultural inputs including certified seeds, fertilizers, and pesticides. Interested bidders must provide documentation of previous similar contracts, tax compliance, and business registration.",tags:["tender","agricultural inputs","Nakuru"],location:"Nakuru County",deadline:"2023-12-31",contact:"procurement@nakuru.go.ke",url:"https://nakuru.go.ke/tenders"},{id:"3",title:"Mobile Market Price Information System",description:"A solution that provides real-time market prices to farmers via SMS",category:"solutions",date:"2023-12-05",source:"AgriTech Innovations",content:"Our Mobile Market Price Information System allows farmers to receive daily price updates for different crops across multiple markets in Kenya. The system uses SMS to reach farmers without smartphones and works in areas with limited internet connectivity. Farmers simply send a text with their crop and location to receive current market prices, helping them make informed decisions about when and where to sell their produce.",tags:["market access","price information","SMS","technology"],location:"Nationwide"},{id:"4",title:"Drought-Resistant Maize Varieties for Eastern Kenya",description:"Information on drought-resistant maize varieties suitable for Eastern Kenya",category:"solutions",date:"2023-10-20",source:"Kenya Seed Company",content:"Eastern Kenya often experiences drought conditions that affect maize production. Several drought-resistant varieties have been developed specifically for these conditions, including KDV-1, KDV-4, and Katumani. These varieties mature early (in about 90-120 days) and can produce reasonable yields even with limited rainfall. Proper spacing and timely planting are crucial for success with these varieties.",tags:["drought","maize","Eastern Kenya","seed varieties"],location:"Eastern Kenya"},{id:"5",title:"Tender: Construction of Irrigation Infrastructure in Kitui",description:"Tender for the construction of irrigation infrastructure in Kitui County",category:"tender",date:"2023-11-25",source:"Ministry of Agriculture",content:"The Ministry of Agriculture invites tenders for the construction of irrigation infrastructure in Kitui County. The project involves construction of water intake structures, main canals, distribution networks, and farm inlets to serve approximately 2,000 hectares of farmland.",tags:["irrigation","construction","infrastructure","Kitui"],location:"Kitui County",deadline:"2024-01-15",contact:"tenders@agriculture.go.ke",url:"https://agriculture.go.ke/tenders"},{id:"6",title:"Farm-to-Market Digital Marketplace",description:"A digital platform connecting farmers directly to buyers, eliminating middlemen",category:"solutions",date:"2023-12-10",source:"Digital Farmers Network",content:"Our Farm-to-Market Digital Marketplace is transforming how farmers sell their produce by connecting them directly with buyers. The platform allows farmers to list their produce with photos and details, while buyers can browse and purchase directly. The system includes secure payment processing, delivery coordination, and quality guarantees. By eliminating traditional middlemen, farmers receive better prices and buyers get fresher produce at competitive rates.",tags:["market access","e-commerce","direct sales","middleman elimination"],location:"Nairobi, Nakuru, Kiambu, Machakos"},{id:"7",title:"Rural Produce Collection Points Network",description:"A network of rural collection centers that aggregate and store produce for efficient transportation",category:"solutions",date:"2024-01-05",source:"AgriLogistics Kenya",content:"Our Rural Produce Collection Points Network addresses one of the biggest challenges in agricultural supply chains - getting produce from remote farms to markets efficiently. We have established collection centers in strategic rural locations where farmers can bring their produce. Each center has basic quality checking equipment, weighing facilities, and temporary storage. This aggregation allows for efficient transportation in bulk to markets, reducing per-unit transport costs and ensuring produce arrives fresh and undamaged.",tags:["logistics","rural infrastructure","aggregation","transportation"],location:"Western Kenya and Rift Valley"}],Al=async()=>{try{const s=await fetch("https://datasets-server.huggingface.co/first-rows?dataset=Olive254%2FAwardedPublicProcurementTendersKenya&config=default&split=train");if(!s.ok)throw new Error(`Failed to fetch data: ${s.status} ${s.statusText}`);return((await s.json()).rows||[]).map(r=>({tenderno:r.row.tenderno||"",tendersubject:r.row.tendersubject||"",finyrq:r.row.finyrq||"",supplier:r.row.supplier||"",supplierscore:r.row.supplierscore,supplierbid:r.row.supplierbid,contactaddress:r.row.contactaddress,contactname:r.row.contactname,contacttel:r.row.contacttel,contactemail:r.row.contactemail,awarddate:r.row.awarddate,awardedamount:r.row.awardedamount,currency:r.row.currency,procuringentity:r.row.procuringentity,procuringentitycounty:r.row.procuringentitycounty,procurementmethod:r.row.procurementmethod}))}catch(s){return console.error("Error fetching awarded tenders:",s),[]}},Pl=async s=>{if(await os(800),(s==null?void 0:s.category)==="awarded-tender")try{let r=await Al();if(s.query){const i=s.query.toLowerCase();r=r.filter(c=>c.tendersubject.toLowerCase().includes(i)||c.supplier.toLowerCase().includes(i)||c.procuringentity&&c.procuringentity.toLowerCase().includes(i))}if(s.location){const i=s.location.toLowerCase();r=r.filter(c=>c.procuringentitycounty&&c.procuringentitycounty.toLowerCase().includes(i))}return r.map(i=>({id:i.tenderno||Math.random().toString(36).substring(2,9),title:i.tendersubject,description:`Tender awarded to ${i.supplier}`,category:"awarded-tender",date:i.awarddate||i.finyrq||new Date().toISOString().split("T")[0],source:i.procuringentity||"Kenya Public Procurement",content:`
          Tender Number: ${i.tenderno||"N/A"}
          Subject: ${i.tendersubject||"N/A"}
          Supplier: ${i.supplier||"N/A"}
          Awarded Amount: ${i.awardedamount||"N/A"} ${i.currency||"KES"}
          Award Date: ${i.awarddate||"N/A"}
          Financial Year Quarter: ${i.finyrq||"N/A"}
          Procurement Method: ${i.procurementmethod||"N/A"}
          Procuring Entity: ${i.procuringentity||"N/A"}
          County: ${i.procuringentitycounty||"N/A"}
          Contact: ${i.contactname||"N/A"}
          Contact Email: ${i.contactemail||"N/A"}
          Contact Tel: ${i.contacttel||"N/A"}
          Contact Address: ${i.contactaddress||"N/A"}
        `,tags:["awarded",i.procurementmethod||"procurement",i.procuringentitycounty||"kenya"],location:i.procuringentitycounty,contact:i.contactemail||i.contacttel}))}catch(t){return console.error("Error fetching awarded tenders:",t),[]}if(!s)return wa;let a=[...wa];if(s.category&&(a=a.filter(t=>t.category===s.category)),s.query){const t=s.query.toLowerCase();a=a.filter(r=>r.title.toLowerCase().includes(t)||r.description.toLowerCase().includes(t)||r.content.toLowerCase().includes(t))}if(s.location){const t=s.location.toLowerCase();a=a.filter(r=>{var i;return(i=r.location)==null?void 0:i.toLowerCase().includes(t)})}return s.dateFrom&&(a=a.filter(t=>new Date(t.date)>=s.dateFrom)),s.dateTo&&(a=a.filter(t=>new Date(t.date)<=s.dateTo)),a},Kr=async()=>{console.log("Fetching real pricing data from Ministry of Agriculture API");const s=await Ye.get("commodity-prices/",void 0,{results:[]});console.log("Received real commodity price data:",s);const a=s.results.map(t=>({id:t.id.toString(),commodity:t.commodity_name||"Unknown commodity",market:t.market_name||"Unknown market",price:parseFloat(t.price)||0,unit:t.unit||"Kg",date:t.date_recorded||new Date().toISOString().split("T")[0],county:t.county_name||"Unknown county"}));return console.log(`Successfully fetched ${a.length} real price records from Ministry API`),a};let fe={amisPriceHistory:[],kilimoStatsHistory:[],lastUpdates:{amisPrices:"",kilimoStats:"",archive:""},countyPriceSnapshots:{},commodityPricesByCounty:{},headlines:[]};const qr=async()=>{try{console.log("Running daily job to fetch AMIS Kenya prices for all 47 counties...");const s=Date.now(),a=await Kr(),t=a.map(j=>({...j,fetchDate:new Date().toISOString(),processingTime:Date.now()-s})),r={},i={};a.forEach(j=>{r[j.county]||(r[j.county]=[]),r[j.county].push(j),i[j.commodity]||(i[j.commodity]={}),i[j.commodity][j.county]||(i[j.commodity][j.county]=[]),i[j.commodity][j.county].push(j)}),fe.amisPriceHistory.push(...t),fe.countyPriceSnapshots=r,fe.commodityPricesByCounty=i,fe.lastUpdates.amisPrices=new Date().toISOString();const c=[],o=[...Object.keys(r)].sort(()=>.5-Math.random());o.slice(0,Math.min(5,o.length)).forEach(j=>{const g=r[j];if(g&&g.length>0){const x=Math.floor(Math.random()*g.length),N=g[x];c.push(`${j}: ${N.commodity} selling at KES ${N.price} per ${N.unit} at ${N.market}`)}});const d=Object.keys(r).length,p=Object.keys(i).length;return c.push(`Today's update: Prices for ${p} commodities across ${d} counties of Kenya`),fe.headlines=c,console.log(`AMIS Kenya data fetch completed. Processed ${a.length} price records across ${d} counties.`),console.log(`Generated ${c.length} headlines`),{success:!0,recordsProcessed:a.length,countiesCovered:d,commoditiesCovered:p,executionTime:Date.now()-s,headlines:c,lastUpdate:fe.lastUpdates.amisPrices}}catch(s){return console.error("Error in daily AMIS Kenya job:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error",lastUpdate:fe.lastUpdates.amisPrices}}},zr=async()=>{try{console.log("Running weekly job to update Kilimo statistics...");const s=Date.now(),a=await $s(),t=a.map(c=>({...c,fetchDate:new Date().toISOString(),processingTime:Date.now()-s}));fe.kilimoStatsHistory.push(...t),fe.lastUpdates.kilimoStats=new Date().toISOString();const r=[...new Set(a.map(c=>c.category).filter(Boolean))],i=r.length>0?`Updated ${r.length} agricultural categories covering ${[...new Set(a.map(c=>c.county))].length} counties`:"No new Kilimo statistics available this week";return console.log(`Kilimo stats update completed. Processed ${a.length} statistical records.`),console.log(`HEADLINE: ${i}`),{success:!0,recordsProcessed:a.length,categoriesUpdated:r.length,executionTime:Date.now()-s,headline:i,lastUpdate:fe.lastUpdates.kilimoStats}}catch(s){return console.error("Error in weekly Kilimo stats job:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error",lastUpdate:fe.lastUpdates.kilimoStats}}},Or=async()=>{try{console.log("Running monthly archiving job for historical data...");const s=Date.now();await os(2e3);const a=fe.amisPriceHistory.length,t=fe.kilimoStatsHistory.length;fe.lastUpdates.archive=new Date().toISOString();const r=`Monthly archive complete: Processed ${a} AMIS Kenya records and ${t} Kilimo statistics for long-term trend analysis`;return console.log(r),{success:!0,amisRecordsArchived:a,kilimoRecordsArchived:t,executionTime:Date.now()-s,headline:r,lastUpdate:fe.lastUpdates.archive}}catch(s){return console.error("Error in monthly archiving job:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error",lastUpdate:fe.lastUpdates.archive}}},Tl=async()=>{const s={amisJob:await qr(),kilimoJob:await zr(),archiveJob:await Or()};return console.log("All cron jobs completed:",s),s},Il=async()=>{console.log("Testing data extraction from Kilimo API and AMIS Kenya...");try{console.log("Fetching data from Kilimo API...");const s=Date.now(),a=await $s(),t=Date.now()-s;console.log(`Kilimo API returned ${a.length} records in ${t}ms`),console.log("Sample Kilimo data:",a.slice(0,2)),console.log("Fetching data from AMIS Kenya...");const r=Date.now(),i=await Kr(),c=Date.now()-r;return console.log(`AMIS Kenya returned ${i.length} records in ${c}ms`),console.log("Sample AMIS Kenya data:",i.slice(0,2)),{success:!0,kilimo:{recordCount:a.length,executionTime:t,sample:a.slice(0,3)},amis:{recordCount:i.length,executionTime:c,sample:i.slice(0,3)}}}catch(s){return console.error("Error during data extraction test:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},Ml=async s=>{const{data:{user:a}}=await P.auth.getUser();if(!a)throw new Error("User not authenticated");const{data:t,error:r}=await P.from("market_linkages").insert({created_by:a.id,title:s.title,description:s.description,linkage_type:s.linkage_type,crops_involved:s.crops_involved,counties:s.counties,requirements:s.requirements,benefits:s.benefits,contact_info:s.contact_info,application_deadline:s.application_deadline,start_date:s.start_date,duration_months:s.duration_months,minimum_quantity:s.minimum_quantity,price_range:s.price_range,max_participants:s.max_participants}).select().single();if(r)throw r;return t},Dl=async s=>{let a=P.from("market_linkages").select(`
      *,
      profiles:created_by (
        full_name,
        contact_number
      )
    `);a=a.eq("status","active");const{data:t,error:r}=await a.order("created_at",{ascending:!1});if(r)throw r;return t},ue=l.forwardRef(({className:s,orientation:a="horizontal",decorative:t=!0,...r},i)=>e.jsx(nr,{ref:i,decorative:t,orientation:a,className:q("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r}));ue.displayName=nr.displayName;const El=({item:s,onClose:a})=>{const t=l.useRef(null),r={agriculture:"bg-sage-500 text-white hover:bg-sage-600",tender:"bg-soil-500 text-white hover:bg-soil-600","supply-chain":"bg-blue-500 text-white hover:bg-blue-600"};l.useEffect(()=>{const c=o=>{o.key==="Escape"&&a()},n=o=>{t.current&&!t.current.contains(o.target)&&a()};return document.addEventListener("keydown",c),document.addEventListener("mousedown",n),document.body.classList.add("overflow-hidden"),()=>{document.removeEventListener("keydown",c),document.removeEventListener("mousedown",n),document.body.classList.remove("overflow-hidden")}},[a]);const i=s.content?s.content.split(/\d+\)/).filter(c=>c.trim().length>0).map((c,n)=>e.jsxs("p",{className:"mb-4",children:[n>0&&e.jsxs("span",{className:"font-medium",children:[n,")"]}),c]},n)):[e.jsx("p",{className:"mb-4",children:"No detailed content available."},"no-content")];return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 md:p-8 animate-fade-in",children:e.jsxs(v,{ref:t,className:"w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col shadow-xl animate-fade-up",children:[e.jsxs(b,{className:"p-6 flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(_,{className:(r[s.category]||"bg-secondary")+" mb-2",children:Rr(s.category)}),e.jsx("h2",{className:"text-2xl font-bold",children:s.title})]}),e.jsx(f,{variant:"ghost",size:"icon",onClick:a,className:"rounded-full",children:e.jsx(Re,{className:"h-5 w-5"})})]}),e.jsx(ue,{}),e.jsx(y,{className:"p-6 flex-grow overflow-y-auto",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"space-y-1 text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Published: ",new Date(s.date).toLocaleDateString()]}),s.location&&e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Location: ",s.location]}),s.deadline&&e.jsxs("div",{className:"flex items-center text-amber-600 font-medium mb-2",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Deadline: ",s.deadline]}),s.contact&&e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Contact: ",s.contact]})]}),e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border border-border mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:s.description})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Details"}),e.jsx("div",{className:"text-foreground/90",children:i})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((c,n)=>e.jsxs("span",{className:"text-sm px-3 py-1 rounded-full bg-secondary text-secondary-foreground",children:[e.jsx(st,{className:"h-3.5 w-3.5 inline mr-1.5"}),c]},n))})]})]})}),e.jsx(ue,{}),e.jsxs(J,{className:"p-6 flex justify-between items-center bg-muted/20",children:[e.jsxs("div",{className:"text-sm",children:["Source: ",e.jsx("span",{className:"font-medium",children:s.source})]}),s.url&&e.jsx(f,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:["Visit Source ",e.jsx(qe,{className:"ml-2 h-4 w-4"})]})})]})]})})},Fl=({activeTab:s,setActiveTab:a,hideTenderTabs:t=!1})=>e.jsx(de,{value:s,onValueChange:r=>a(r),children:e.jsxs(ce,{className:"w-full grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mb-6",children:[e.jsx(K,{value:"all",className:"flex items-center gap-2",children:e.jsx("span",{children:"All"})}),e.jsxs(K,{value:"agriculture",className:"flex items-center gap-2",children:[e.jsx(lr,{className:"h-4 w-4"}),e.jsx("span",{children:"Agricultural Issues"})]}),e.jsxs(K,{value:"solutions",className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsx("span",{children:"Innovative Solutions"})]}),!t&&e.jsxs(e.Fragment,{children:[e.jsxs(K,{value:"tender",className:"flex items-center gap-2",children:[e.jsx(Ai,{className:"h-4 w-4"}),e.jsx("span",{children:"Tender Opportunities"})]}),e.jsxs(K,{value:"awarded-tender",className:"flex items-center gap-2",children:[e.jsx(Wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Awarded Tenders"})]})]})]})}),Ll=Ti,Rl=Ii,Br=l.forwardRef(({className:s,align:a="center",sideOffset:t=4,...r},i)=>e.jsx(Pi,{children:e.jsx(cr,{ref:i,align:a,sideOffset:t,className:q("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));Br.displayName=cr.displayName;function $t({className:s,classNames:a,showOutsideDays:t=!0,...r}){return e.jsx(Mi,{showOutsideDays:t,className:q("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:q(Ks({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:q(Ks({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:({...i})=>e.jsx(Di,{className:"h-4 w-4"}),IconRight:({...i})=>e.jsx(Ut,{className:"h-4 w-4"})},...r})}$t.displayName="Calendar";const Kl=({location:s,setLocation:a,dateFrom:t,setDateFrom:r,dateTo:i,setDateTo:c,isFiltersOpen:n,setIsFiltersOpen:o,handleSearch:m})=>{const d=()=>{a(""),r(void 0),c(void 0),o(!1)};return e.jsxs(Ll,{open:n,onOpenChange:o,children:[e.jsx(Rl,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"md:w-auto w-full",children:[e.jsx(ys,{className:"mr-2 h-4 w-4"}),"Filters",(s||t||i)&&e.jsx("span",{className:"ml-2 inline-flex h-5 w-5 items-center justify-center rounded-full bg-primary text-[10px] text-primary-foreground",children:[s,t,i].filter(Boolean).length})]})}),e.jsx(Br,{className:"w-80",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Filter Results"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"location",children:"Location"}),e.jsx(M,{id:"location",placeholder:"e.g. Nairobi, Nakuru...",value:s,onChange:p=>a(p.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Date Range"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"date-from",className:"text-xs",children:"From"}),e.jsx($t,{mode:"single",selected:t,onSelect:r,className:"border rounded-md"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"date-to",className:"text-xs",children:"To"}),e.jsx($t,{mode:"single",selected:i,onSelect:c,className:"border rounded-md"})]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(f,{variant:"outline",size:"sm",onClick:d,className:"text-sm",children:[e.jsx(Re,{className:"mr-1 h-4 w-4"}),"Clear"]}),e.jsx(f,{size:"sm",onClick:()=>{o(!1),m()},className:"text-sm",children:"Apply Filters"})]})]})})]})},ql=({query:s,setQuery:a,location:t,setLocation:r,dateFrom:i,setDateFrom:c,dateTo:n,setDateTo:o,isFiltersOpen:m,setIsFiltersOpen:d,handleSearch:p})=>e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-5 w-5"}),e.jsx(M,{placeholder:"Search for keywords...",value:s,onChange:j=>a(j.target.value),onKeyDown:j=>j.key==="Enter"&&p(),className:"pl-10"})]}),e.jsx(Kl,{location:t,setLocation:r,dateFrom:i,setDateFrom:c,dateTo:n,setDateTo:o,isFiltersOpen:m,setIsFiltersOpen:d,handleSearch:p}),e.jsxs(f,{onClick:p,className:"md:w-auto w-full",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Search"]})]}),zl=({item:s,onClick:a})=>{const{toast:t}=ee(),r={agriculture:"bg-sage-100 text-sage-800 hover:bg-sage-200",tender:"bg-soil-100 text-soil-800 hover:bg-soil-200",solutions:"bg-blue-100 text-blue-800 hover:bg-blue-200","awarded-tender":"bg-amber-100 text-amber-800 hover:bg-amber-200"},i=(m,d)=>m?m.length<=d?m:m.substring(0,d)+"...":"",c=m=>{m.stopPropagation(),(!s.url||!n(s.url))&&(m.preventDefault(),t({title:"Invalid Link",description:"This URL cannot be verified or is invalid.",variant:"destructive"}))};function n(m){try{const d=new URL(m);return d.protocol==="http:"||d.protocol==="https:"}catch{return!1}}const o=m=>{if(!m)return"No source URL";try{return new URL(m).hostname}catch{return"Invalid URL"}};return e.jsxs(v,{className:"overflow-hidden transition-all duration-300 hover:shadow-md border border-border group animate-fade-in",children:[e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx(_,{className:r[s.category]||"bg-secondary",children:Rr(s.category)}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ce,{className:"h-3.5 w-3.5 mr-1"}),new Date(s.date).toLocaleDateString()]})]}),e.jsx("h3",{className:"text-xl font-semibold mb-2 group-hover:text-primary transition-colors",children:s.title}),e.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-3",children:s.description}),s.location&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-2",children:[e.jsx(se,{className:"h-3.5 w-3.5 mr-1.5"}),s.location]}),s.deadline&&e.jsxs("div",{className:"text-sm font-medium mb-2",children:["Deadline: ",e.jsx("span",{className:"text-amber-600",children:s.deadline})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[s.tags.slice(0,3).map((m,d)=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-secondary text-secondary-foreground",children:m},d)),s.tags.length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-secondary text-secondary-foreground",children:["+",s.tags.length-3," more"]})]})]}),e.jsxs(J,{className:"px-6 py-4 bg-muted/30 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:s.url?e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",onClick:c,className:"flex items-center hover:underline",children:[o(s.url),e.jsx(qe,{className:"h-3 w-3 ml-1"})]}):e.jsxs("span",{children:["Source: ",i(s.source||"Unknown",30)]})}),e.jsx(f,{size:"sm",onClick:a,children:"View Details"})]})]})},Ol=({results:s,isLoading:a,activeTab:t,onItemClick:r})=>{if(a)return e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(Es,{className:"h-10 w-10 text-primary animate-spin"})});if(s.length===0)return e.jsxs("div",{className:"text-center py-16",children:[e.jsx("h3",{className:"text-xl font-medium mb-2",children:"No results found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters to find what you're looking for."})]});const i=s.filter(c=>!c.url||!Bl(c.url)?(console.warn(`Filtering out result with invalid URL: ${c.title}`),!1):!0);return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3 text-muted-foreground",children:["Found ",i.length," ",t!=="all"?t:"results"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(c=>e.jsx(zl,{item:c,onClick:()=>r(c)},c.id))})]})};function Bl(s){try{const a=new URL(s);return a.protocol==="http:"||a.protocol==="https:"}catch{return!1}}const $l=({id:s})=>{const[a,t]=l.useState("solutions"),[r,i]=l.useState(""),[c,n]=l.useState(""),[o,m]=l.useState(void 0),[d,p]=l.useState(void 0),[j,g]=l.useState(!1),[x,N]=l.useState([]),[k,u]=l.useState(!1),[h,S]=l.useState(null),{toast:T}=ee(),A=async()=>{g(!0);const R={query:r.trim()===""?void 0:r,location:c.trim()===""?void 0:c,dateFrom:o,dateTo:d};a!=="all"&&(R.category=a);try{const $=await Pl(R);let Z=$.filter(F=>F.category!=="tender"&&F.category!=="awarded-tender");Z=Z.filter(F=>F.url&&!Cl(F.url)?(console.warn(`Filtered item with unverified URL: ${F.title}`),!1):kl(F)?!0:(console.warn(`Filtered possibly illegitimate content: ${F.title}`),!1)),console.log(`Showing ${Z.length} verified results out of ${$.length} total results`),Z.length===0&&$.length>0&&T({title:"Verification Results",description:"Some results were filtered out because they could not be verified with legitimate sources.",duration:5e3}),N(Z)}catch($){console.error("Error fetching data:",$),T({title:"Search Error",description:"Could not complete search. Please try again later.",variant:"destructive"}),N([])}finally{g(!1)}};l.useEffect(()=>{A()},[a]);const D=R=>{S(R)},L=()=>{S(null)};return e.jsxs("section",{id:s||"search-section",className:"py-20 px-6 md:px-12 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12 animate-fade-up",children:[e.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-secondary text-secondary-foreground text-sm font-medium mb-2",children:"Search & Discover"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Find Agricultural Information"}),e.jsx("p",{className:"text-lg text-foreground/80 max-w-3xl mx-auto",children:"Search across verified agricultural issues and innovative solutions throughout Kenya."})]}),e.jsxs(v,{className:"p-6 rounded-xl shadow-sm bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border border-border",children:[e.jsx(Fl,{activeTab:a,setActiveTab:t,hideTenderTabs:!0}),e.jsx(ql,{query:r,setQuery:i,location:c,setLocation:n,dateFrom:o,setDateFrom:m,dateTo:d,setDateTo:p,isFiltersOpen:k,setIsFiltersOpen:u,handleSearch:A}),e.jsx(Ol,{results:x,isLoading:j,activeTab:a,onItemClick:D})]}),h&&e.jsx(El,{item:h,onClose:L})]})},Ul=()=>e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(ne,{}),e.jsx(yl,{}),e.jsx($l,{}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Get Started Today"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Choose your path to agricultural success"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[e.jsxs(v,{className:"text-center hover:shadow-lg transition-shadow",children:[e.jsxs(b,{children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(lr,{className:"h-8 w-8 text-primary"})}),e.jsx(w,{children:"Start Farming"}),e.jsx(B,{children:"Access farming tools, crop tracking, and agricultural resources"})]}),e.jsx(y,{children:e.jsx(V,{to:"/farmer-portal",children:e.jsx(f,{className:"w-full",size:"lg",children:"Start Farming"})})})]}),e.jsxs(v,{className:"text-center hover:shadow-lg transition-shadow",children:[e.jsxs(b,{children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(me,{className:"h-8 w-8 text-primary"})}),e.jsx(w,{children:"Farm to Market Integration"}),e.jsx(B,{children:"Connect with buyers, access market prices, and manage sales"})]}),e.jsx(y,{children:e.jsx(V,{to:"/market-linkages",children:e.jsx(f,{className:"w-full",size:"lg",children:"Complete Integration"})})})]}),e.jsxs(v,{className:"text-center hover:shadow-lg transition-shadow",children:[e.jsxs(b,{children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(De,{className:"h-8 w-8 text-primary"})}),e.jsx(w,{children:"Realtime Financial Visibility"}),e.jsx(B,{children:"Track expenses, revenue, and financial performance"})]}),e.jsx(y,{children:e.jsx(V,{to:"/farmer-portal",children:e.jsx(f,{className:"w-full",size:"lg",children:"View Finances"})})})]})]})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Platform Features"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Everything you need for agricultural success"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(v,{className:"text-center",children:[e.jsxs(b,{children:[e.jsx(oe,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx(w,{className:"text-lg",children:"Community"})]}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect with farmers and experts"}),e.jsx(V,{to:"/community-forum",children:e.jsx(f,{variant:"outline",size:"sm",className:"mt-3",children:"Join Forum"})})]})]}),e.jsxs(v,{className:"text-center",children:[e.jsxs(b,{children:[e.jsx(se,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx(w,{className:"text-lg",children:"Market Access"})]}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Find buyers and market opportunities"}),e.jsx(V,{to:"/market-linkages",children:e.jsx(f,{variant:"outline",size:"sm",className:"mt-3",children:"Explore Markets"})})]})]}),e.jsxs(v,{className:"text-center",children:[e.jsxs(b,{children:[e.jsx(ye,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx(w,{className:"text-lg",children:"Logistics"})]}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Transport and storage solutions"}),e.jsx(V,{to:"/logistics",children:e.jsx(f,{variant:"outline",size:"sm",className:"mt-3",children:"Find Transport"})})]})]}),e.jsxs(v,{className:"text-center",children:[e.jsxs(b,{children:[e.jsx(Ve,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx(w,{className:"text-lg",children:"Analytics"})]}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Market insights and trends"}),e.jsx(V,{to:"/sentiment-analysis",children:e.jsx(f,{variant:"outline",size:"sm",className:"mt-3",children:"View Analytics"})})]})]})]})]})}),e.jsx(bl,{}),e.jsx(fl,{})]});async function Vl(s){return await P.from("input_group_orders").insert(s)}async function Ca(){return await P.from("input_group_orders").select("*")}const Hl=()=>{const[s,a]=l.useState([]),[t,r]=l.useState(""),[i,c]=l.useState(0);l.useEffect(()=>{Ca().then(({data:o})=>a(o||[]))},[]);const n=async()=>{await Vl({input_type:t,quantity:i}),Ca().then(({data:o})=>a(o||[]))};return e.jsx("div",{className:"p-4",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Group Purchasing for Inputs"})}),e.jsxs(y,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"text",placeholder:"Input Type",value:t,onChange:o=>r(o.target.value)}),e.jsx("input",{type:"number",placeholder:"Quantity",value:i,onChange:o=>c(Number(o.target.value))}),e.jsx(f,{onClick:n,children:"Express Need"})]}),e.jsx("ul",{children:s.map(o=>e.jsxs("li",{children:[o.input_type," - ",o.quantity," units (Status: ",o.status,")"]},o.id))})]})]})})};async function Gl(s){return await P.from("input_supplier_reviews").insert(s)}async function ka(s){return await P.from("input_supplier_reviews").select("*").eq("supplier_id",s)}async function Yl(s){return P.from("input_pricing").insert(s).select()}async function ks(s={}){return await P.from("input_pricing").select("*").match(s)}const Wl=()=>{const[s,a]=l.useState(""),[t,r]=l.useState(0),[i,c]=l.useState([]),[n,o]=l.useState(""),[m,d]=l.useState(""),[p,j]=l.useState(0),[g,x]=l.useState([]);l.useEffect(()=>{s&&n?ks({product_id:s,supplier_id:n}).then(({data:u})=>c(u||[])):s?ks({product_id:s}).then(({data:u})=>c(u||[])):n?ks({supplier_id:n}).then(({data:u})=>c(u||[])):ks().then(({data:u})=>c(u||[])),n&&ka(n).then(({data:u})=>x(u||[]))},[s,n]);const N=async()=>{!s||!n||(await Yl({product_id:s,supplier_id:n,price:t}),ks({product_id:s,supplier_id:n}).then(({data:u})=>c(u||[])))},k=async()=>{await Gl({supplier_id:n,rating:p,review:m}),ka(n).then(({data:u})=>x(u||[]))};return e.jsx("div",{className:"p-4",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Input Pricing & Supplier Verification"})}),e.jsxs(y,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"text",placeholder:"Product ID",value:s,onChange:u=>a(u.target.value)}),e.jsx("input",{type:"text",placeholder:"Supplier ID",value:n,onChange:u=>o(u.target.value)}),e.jsx("input",{type:"number",placeholder:"Price",value:t,onChange:u=>r(Number(u.target.value))}),e.jsx(f,{onClick:N,children:"Report Price"})]}),e.jsx("ul",{children:i.map(u=>e.jsxs("li",{children:["Product: ",u.product_id," - Supplier: ",u.supplier_id," - ",u.price," ",u.verified?"âœ”ï¸":""]},u.id))}),e.jsxs("div",{className:"mt-6 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Supplier ID",value:n,onChange:u=>o(u.target.value)}),e.jsx("input",{type:"number",placeholder:"Rating",value:p,onChange:u=>j(Number(u.target.value))}),e.jsx("input",{type:"text",placeholder:"Review",value:m,onChange:u=>d(u.target.value)}),e.jsx(f,{onClick:k,children:"Review Supplier"})]}),e.jsx("ul",{children:g.map(u=>e.jsxs("li",{children:["Supplier: ",u.supplier_id," - ",u.rating," stars - ",u.review," ",u.verified?"âœ”ï¸":""]},u.id))})]})]})})};async function Ql(s){return await P.from("bulk_orders").insert(s)}async function Sa(){return await P.from("bulk_orders").select("*")}async function Jl(s){return await P.from("bulk_order_bids").insert(s)}async function Mt(s){return await P.from("bulk_order_bids").select("*").eq("order_id",s)}async function Zl(s){return await P.from("bulk_order_bids").update({status:"accepted"}).eq("id",s)}const Xl=()=>{const[s,a]=l.useState([]),[t,r]=l.useState(""),[i,c]=l.useState(0),[n,o]=l.useState(""),[m,d]=l.useState(""),[p,j]=l.useState(""),[g,x]=l.useState(0),[N,k]=l.useState(""),[u,h]=l.useState([]);l.useEffect(()=>{Sa().then(({data:D})=>a(D||[])),p&&Mt(p).then(({data:D})=>h(D||[]))},[p]);const S=async()=>{await Ql({produce_type:t,quantity:i,quality:n,delivery_date:m}),Sa().then(({data:D})=>a(D||[]))},T=async()=>{await Jl({order_id:p,price:g,quality_offer:N}),Mt(p).then(({data:D})=>h(D||[]))},A=async D=>{await Zl(D),Mt(p).then(({data:L})=>h(L||[]))};return e.jsx("div",{className:"p-4",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Reverse Auctions for Bulk Orders"})}),e.jsxs(y,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"text",placeholder:"Produce Type",value:t,onChange:D=>r(D.target.value)}),e.jsx("input",{type:"number",placeholder:"Quantity",value:i,onChange:D=>c(Number(D.target.value))}),e.jsx("input",{type:"text",placeholder:"Quality",value:n,onChange:D=>o(D.target.value)}),e.jsx("input",{type:"date",placeholder:"Delivery Date",value:m,onChange:D=>d(D.target.value)}),e.jsx(f,{onClick:S,children:"Post Bulk Need"})]}),e.jsx("ul",{children:s.map(D=>e.jsxs("li",{children:[D.produce_type," - ",D.quantity," (",D.quality,") Delivery: ",D.delivery_date," Status: ",D.status]},D.id))}),e.jsxs("div",{className:"mt-6 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Order ID to Bid",value:p,onChange:D=>j(D.target.value)}),e.jsx("input",{type:"number",placeholder:"Bid Price",value:g,onChange:D=>x(Number(D.target.value))}),e.jsx("input",{type:"text",placeholder:"Bid Quality",value:N,onChange:D=>k(D.target.value)}),e.jsx(f,{onClick:T,children:"Bid on Order"})]}),e.jsx("ul",{children:u.map(D=>e.jsxs("li",{children:["Bid: ",D.price," (",D.quality_offer,") Status: ",D.status," ",e.jsx(f,{onClick:()=>A(D.id),children:"Accept Bid"})]},D.id))})]})]})})};async function ec(s){return await P.from("subscription_boxes").insert(s)}async function _a(s){return await P.from("subscription_boxes").select("*").eq("consumer_id",s)}async function Aa(s){return await P.from("subscription_box_deliveries").select("*").eq("box_id",s)}async function sc(s){return await P.from("subscription_box_deliveries").update({delivered:!0}).eq("id",s)}const tc=()=>{const[s,a]=l.useState(""),[t,r]=l.useState("weekly"),[i,c]=l.useState(""),[n,o]=l.useState([]),[m,d]=l.useState(""),[p,j]=l.useState(""),[g,x]=l.useState([]);l.useEffect(()=>{m&&_a(m).then(({data:u})=>o(u||[])),p&&Aa(p).then(({data:u})=>x(u||[]))},[m,p]);const N=async()=>{await ec({consumer_id:m,farmer_id:i,box_type:s,frequency:t}),_a(m).then(({data:u})=>o(u||[]))},k=async u=>{await sc(u),Aa(p).then(({data:h})=>x(h||[]))};return e.jsx("div",{className:"p-4",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Direct Farmer-to-Consumer Subscription Boxes"})}),e.jsxs(y,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"text",placeholder:"Consumer ID",value:m,onChange:u=>d(u.target.value)}),e.jsx("input",{type:"text",placeholder:"Farmer ID",value:i,onChange:u=>c(u.target.value)}),e.jsx("input",{type:"text",placeholder:"Box Type",value:s,onChange:u=>a(u.target.value)}),e.jsxs("select",{value:t,onChange:u=>r(u.target.value),children:[e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"bi-weekly",children:"Bi-Weekly"})]}),e.jsx(f,{onClick:N,children:"Subscribe"})]}),e.jsx("ul",{children:n.map(u=>e.jsxs("li",{children:[u.box_type," (",u.frequency,") Farmer: ",u.farmer_id," Status: ",u.status," ",e.jsx(f,{onClick:()=>j(u.id),children:"View Deliveries"})]},u.id))}),e.jsx("div",{className:"mt-6 mb-4",children:e.jsx("ul",{children:g.map(u=>e.jsxs("li",{children:["Delivery: ",u.delivery_date," Delivered: ",u.delivered?"âœ”ï¸":e.jsx(f,{onClick:()=>k(u.id),children:"Mark Delivered"})]},u.id))})})]})]})})},ac=({onSuccess:s})=>{const[a,t]=l.useState(""),[r,i]=l.useState(""),[c,n]=l.useState("phone"),[o,m]=l.useState(!1),{toast:d}=ee(),p=async g=>{if(g.preventDefault(),!a.trim()){d({title:"Error",description:"Please enter your phone number",variant:"destructive"});return}m(!0);let x=a.trim();x.startsWith("0")?x="+254"+x.substring(1):x.startsWith("+")||(x="+254"+x);try{const{error:N}=await P.auth.signInWithOtp({phone:x});if(N)throw N;d({title:"OTP Sent",description:`Verification code sent to ${x}`}),n("otp")}catch(N){d({title:"Error",description:N.message||"Failed to send OTP",variant:"destructive"})}finally{m(!1)}},j=async g=>{if(g.preventDefault(),!r.trim()){d({title:"Error",description:"Please enter the verification code",variant:"destructive"});return}m(!0);let x=a.trim();x.startsWith("0")?x="+254"+x.substring(1):x.startsWith("+")||(x="+254"+x);try{const{error:N}=await P.auth.verifyOtp({phone:x,token:r,type:"sms"});if(N)throw N;d({title:"Success",description:"Phone number verified successfully!"}),s==null||s()}catch(N){d({title:"Error",description:N.message||"Invalid verification code",variant:"destructive"})}finally{m(!1)}};return c==="otp"?e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"otp",children:"Verification Code (Msimbo wa uthibitisho)"}),e.jsx(M,{id:"otp",type:"text",placeholder:"Enter 6-digit code / Ingiza msimbo wa tarakimu 6",value:r,onChange:g=>i(g.target.value),maxLength:6,required:!0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Code sent to ",a," / Msimbo ulitumwa kwa ",a]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>n("phone"),disabled:o,children:"Back / Rudi"}),e.jsxs(f,{type:"submit",className:"flex-1",disabled:o,children:[o?e.jsx(Es,{className:"h-4 w-4 animate-spin mr-2"}):null,"Verify / Thibitisha"]})]})]}):e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"phone",children:"Phone Number (Nambari ya simu)"}),e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(M,{id:"phone",type:"tel",placeholder:"0712345678 or +254712345678",value:a,onChange:g=>t(g.target.value),className:"pl-10",required:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter your Kenyan phone number / Ingiza nambari yako ya simu ya Kenya"})]}),e.jsxs(f,{type:"submit",className:"w-full",disabled:o,children:[o?e.jsx(Es,{className:"h-4 w-4 animate-spin mr-2"}):null,"Send Code / Tuma Msimbo"]})]})},rc=()=>{const{toast:s}=ee(),a=Ne(),[t,r]=l.useState(""),[i,c]=l.useState(""),[n,o]=l.useState(""),[m,d]=l.useState(!1),[p,j]=l.useState("login"),[g,x]=l.useState("email");l.useEffect(()=>{(async()=>{const{data:S}=await P.auth.getSession();S.session&&a("/")})()},[a]);const N=async h=>{if(h.preventDefault(),!t||!i){s({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}d(!0);try{const{error:S}=await P.auth.signInWithPassword({email:t,password:i});if(S)throw S;s({title:"Success",description:"You have been logged in successfully!"}),a("/")}catch(S){s({title:"Error",description:S.message||"Failed to login. Please try again.",variant:"destructive"})}finally{d(!1)}},k=async h=>{if(h.preventDefault(),!t||!i||!n){s({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}d(!0);try{const{error:S}=await P.auth.signUp({email:t,password:i,options:{data:{full_name:n}}});if(S)throw S;s({title:"Success",description:"Your account has been created! Please check your email to verify your account."}),j("login")}catch(S){s({title:"Error",description:S.message||"Failed to create account. Please try again.",variant:"destructive"})}finally{d(!1)}},u=()=>{s({title:"Success",description:"You have been logged in successfully!"}),a("/")};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsx("main",{className:"py-12 px-6 max-w-md mx-auto",children:e.jsxs(v,{className:"w-full",children:[e.jsxs(b,{children:[e.jsx(w,{className:"text-2xl text-center",children:"Welcome to AgriConnect"}),e.jsxs(B,{className:"text-center",children:["Sign in or create an account to access all features",e.jsx("br",{}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Karibu AgriConnect - Ingia au fungua akaunti"})]})]}),e.jsxs(y,{children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs(f,{variant:g==="email"?"default":"outline",onClick:()=>x("email"),className:"flex-1",size:"sm",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Email"]}),e.jsxs(f,{variant:g==="phone"?"default":"outline",onClick:()=>x("phone"),className:"flex-1",size:"sm",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Phone / Simu"]})]}),g==="phone"?e.jsx("div",{className:"mt-4",children:e.jsx(ac,{onSuccess:u})}):e.jsxs(de,{value:p,onValueChange:j,className:"w-full",children:[e.jsxs(ce,{className:"grid w-full grid-cols-2",children:[e.jsx(K,{value:"login",children:"Login"}),e.jsx(K,{value:"signup",children:"Create Account"})]}),e.jsx(O,{value:"login",children:e.jsxs("form",{onSubmit:N,className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"email-login",children:"Email"}),e.jsx(M,{id:"email-login",type:"email",placeholder:"your.email@example.com",value:t,onChange:h=>r(h.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"password-login",children:"Password"}),e.jsx(M,{id:"password-login",type:"password",value:i,onChange:h=>c(h.target.value),required:!0})]}),e.jsx(f,{type:"submit",className:"w-full",disabled:m,children:m?"Logging in...":"Login"})]})}),e.jsx(O,{value:"signup",children:e.jsxs("form",{onSubmit:k,className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"fullname-signup",children:"Full Name"}),e.jsx(M,{id:"fullname-signup",placeholder:"Your Name",value:n,onChange:h=>o(h.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"email-signup",children:"Email"}),e.jsx(M,{id:"email-signup",type:"email",placeholder:"your.email@example.com",value:t,onChange:h=>r(h.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"password-signup",children:"Password"}),e.jsx(M,{id:"password-signup",type:"password",value:i,onChange:h=>c(h.target.value),required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Password must be at least 6 characters long"})]}),e.jsx(f,{type:"submit",className:"w-full",disabled:m,children:m?"Creating account...":"Create Account"})]})})]})]}),e.jsx(J,{className:"flex justify-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["By continuing, you agree to our Terms of Service and Privacy Policy.",e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"Kwa kuendelea, unakubali Sheria na Sera yetu ya Faragha."})]})})]})})]})},ic=()=>{const s=Ne(),a=[{label:"Active Farmers",value:"50,000+",icon:e.jsx(oe,{className:"h-5 w-5"})},{label:"Counties Covered",value:"47",icon:e.jsx(se,{className:"h-5 w-5"})},{label:"Service Providers",value:"2,500+",icon:e.jsx(lt,{className:"h-5 w-5"})},{label:"Monthly Transactions",value:"KES 500M+",icon:e.jsx(me,{className:"h-5 w-5"})}],t=[{icon:e.jsx(Ei,{className:"h-6 w-6 text-primary"}),title:"Farm Management",description:"Comprehensive tools for crop tracking, inventory management, and yield optimization"},{icon:e.jsx(Ve,{className:"h-6 w-6 text-primary"}),title:"Market Intelligence",description:"Real-time market prices, demand forecasting, and trade opportunities"},{icon:e.jsx(ye,{className:"h-6 w-6 text-primary"}),title:"Smart Logistics",description:"End-to-end logistics solutions connecting farmers to markets efficiently"},{icon:e.jsx(Os,{className:"h-6 w-6 text-primary"}),title:"Financial Services",description:"Access to credit, insurance, and digital payment solutions"}],r=["Winner - Kenya Digital Economy Awards 2024","ISO 27001 Certified for Data Security","Partnership with Ministry of Agriculture","Featured in TechCrunch Africa","Google for Startups Alumni"];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsx("section",{className:"bg-gradient-to-r from-primary to-primary-foreground text-primary-foreground py-20",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-5xl font-bold mb-6",children:"Transforming Agriculture in Kenya"}),e.jsx("p",{className:"text-xl mb-8 max-w-3xl mx-auto",children:"AgriConnect is East Africa's leading agricultural technology platform, empowering farmers, connecting markets, and driving sustainable food security through innovative digital solutions."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs(f,{size:"lg",variant:"secondary",onClick:()=>s("/contact"),children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Partner With Us"]}),e.jsxs(f,{size:"lg",variant:"outline",className:"bg-transparent border-white text-white hover:bg-white hover:text-primary",children:["Learn More",e.jsx(ut,{className:"h-4 w-4 ml-2"})]})]})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:a.map((i,c)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:i.icon})}),e.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:i.value}),e.jsx("div",{className:"text-muted-foreground",children:i.label})]},c))})})}),e.jsxs("div",{className:"container mx-auto px-4 py-16",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 mb-16",children:[e.jsxs(v,{className:"border-l-4 border-l-primary",children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5 text-primary"}),"Our Mission"]})}),e.jsx(y,{children:e.jsx("p",{className:"text-lg text-muted-foreground",children:"To revolutionize Kenya's agricultural sector by providing farmers with access to technology, markets, and financial services that increase productivity, profitability, and sustainability across the entire value chain."})})]}),e.jsxs(v,{className:"border-l-4 border-l-secondary",children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-5 w-5 text-secondary"}),"Our Vision"]})}),e.jsx(y,{children:e.jsx("p",{className:"text-lg text-muted-foreground",children:"A digitally-enabled agricultural ecosystem where every farmer in Kenya has access to the tools, knowledge, and opportunities needed to thrive in modern agriculture and contribute to national food security."})})]})]}),e.jsxs("section",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"What We Offer"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((i,c)=>e.jsxs(v,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(b,{children:[e.jsx("div",{className:"mb-3",children:i.icon}),e.jsx(w,{className:"text-lg",children:i.title})]}),e.jsx(y,{children:e.jsx("p",{className:"text-muted-foreground",children:i.description})})]},c))})]}),e.jsxs("section",{className:"mb-16 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Our Impact"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Since 2020, we've been driving measurable change in Kenya's agricultural sector"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:"300%"}),e.jsx("div",{className:"text-muted-foreground",children:"Average yield increase for participating farmers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:"KES 2.5B"}),e.jsx("div",{className:"text-muted-foreground",children:"Total value of trades facilitated"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-orange-600 mb-2",children:"95%"}),e.jsx("div",{className:"text-muted-foreground",children:"Customer satisfaction rate"})]})]})]}),e.jsx("section",{className:"mb-16",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Wt,{className:"h-5 w-5 text-primary"}),"Recognition & Achievements"]})}),e.jsx(y,{children:e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:r.map((i,c)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:i})]},c))})})]})}),e.jsxs("section",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-8",children:"Leadership Team"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsx(v,{className:"text-center",children:e.jsxs(y,{className:"pt-6",children:[e.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx(oe,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg",children:"Sarah Mwangi"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"CEO & Co-Founder"}),e.jsx(_,{variant:"outline",children:"MSc. Agriculture, University of Nairobi"})]})}),e.jsx(v,{className:"text-center",children:e.jsxs(y,{className:"pt-6",children:[e.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx(oe,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg",children:"David Kipchoge"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"CTO & Co-Founder"}),e.jsx(_,{variant:"outline",children:"BSc. Computer Science, JKUAT"})]})}),e.jsx(v,{className:"text-center",children:e.jsxs(y,{className:"pt-6",children:[e.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx(oe,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg",children:"Grace Wanjiku"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"Head of Operations"}),e.jsx(_,{variant:"outline",children:"MBA, Strathmore University"})]})})]})]}),e.jsx("section",{className:"text-center",children:e.jsx(v,{className:"bg-primary text-primary-foreground",children:e.jsxs(y,{className:"pt-8 pb-8",children:[e.jsx(Qt,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ready to Transform Agriculture Together?"}),e.jsx("p",{className:"text-lg mb-6 opacity-90",children:"Join thousands of farmers, businesses, and partners who are already part of the AgriConnect ecosystem."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs(f,{variant:"secondary",size:"lg",onClick:()=>s("/contact"),children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Contact Our Team"]}),e.jsx(f,{variant:"outline",size:"lg",className:"bg-transparent border-white text-white hover:bg-white hover:text-primary",onClick:()=>s("/auth"),children:"Join Platform"})]}),e.jsx(ue,{className:"my-6 bg-white/20"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ss,{className:"h-4 w-4"}),"partnerships@agriconnect.co.ke"]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(as,{className:"h-4 w-4"}),"+254 700 123 456"]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Nairobi, Kenya"]})]})]})})})]})]})},nc=()=>e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs(v,{className:"max-w-lg mx-auto",children:[e.jsx(b,{children:e.jsx(w,{children:"Contact Us"})}),e.jsxs(y,{className:"space-y-4",children:[e.jsx(M,{placeholder:"Your Name"}),e.jsx(M,{placeholder:"Your Email",type:"email"}),e.jsx(ge,{placeholder:"Your Message"}),e.jsx(f,{className:"w-full",children:"Send Message"})]})]})}),Y=Oi,W=Bi,H=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(or,{ref:r,className:q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[a,e.jsx(Fi,{asChild:!0,children:e.jsx(nt,{className:"h-4 w-4 opacity-50"})})]}));H.displayName=or.displayName;const $r=l.forwardRef(({className:s,...a},t)=>e.jsx(dr,{ref:t,className:q("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(Li,{className:"h-4 w-4"})}));$r.displayName=dr.displayName;const Ur=l.forwardRef(({className:s,...a},t)=>e.jsx(mr,{ref:t,className:q("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(nt,{className:"h-4 w-4"})}));Ur.displayName=mr.displayName;const G=l.forwardRef(({className:s,children:a,position:t="popper",...r},i)=>e.jsx(Ri,{children:e.jsxs(ur,{ref:i,className:q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...r,children:[e.jsx($r,{}),e.jsx(Ki,{className:q("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(Ur,{})]})}));G.displayName=ur.displayName;const lc=l.forwardRef(({className:s,...a},t)=>e.jsx(xr,{ref:t,className:q("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a}));lc.displayName=xr.displayName;const C=l.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(hr,{ref:r,className:q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(qi,{children:e.jsx(Se,{className:"h-4 w-4"})})}),e.jsx(zi,{children:a})]}));C.displayName=hr.displayName;const cc=l.forwardRef(({className:s,...a},t)=>e.jsx(pr,{ref:t,className:q("-mx-1 my-1 h-px bg-muted",s),...a}));cc.displayName=pr.displayName;const oc=()=>{const{user:s}=Xe(),{toast:a}=ee(),[t,r]=l.useState(!1),[i,c]=l.useState(!1),n=l.useRef(null),[o,m]=l.useState({full_name:"",email:(s==null?void 0:s.email)||"",contact_number:"",county:"",bio:"",farm_size:0,farm_type:"",experience_years:0,specialization:[],avatar_url:""}),[d,p]=l.useState("");ns.useEffect(()=>{s&&j()},[s]);const j=async()=>{try{const{data:h,error:S}=await P.from("profiles").select("*").eq("id",s==null?void 0:s.id).single();if(S&&S.code!=="PGRST116")throw S;h&&m({full_name:h.full_name||"",email:h.email||(s==null?void 0:s.email)||"",contact_number:h.contact_number||"",county:h.county||"",bio:h.bio||"",farm_size:h.farm_size||0,farm_type:h.farm_type||"",experience_years:h.experience_years||0,specialization:h.specialization||[],avatar_url:h.avatar_url||""})}catch(h){console.error("Error fetching profile:",h)}},g=async h=>{if(!s)return null;if(h.size>2*1024*1024)return a({title:"File too large",description:"Please select an image under 2MB",variant:"destructive"}),null;c(!0);try{const S=h.name.split(".").pop(),T=`${s.id}/avatar.${S}`,{error:A}=await P.storage.from("profile-pictures").upload(T,h,{upsert:!0});if(A)throw A;const{data:D}=P.storage.from("profile-pictures").getPublicUrl(T);return D.publicUrl}catch(S){return console.error("Error uploading avatar:",S),a({title:"Upload failed",description:"Failed to upload profile picture",variant:"destructive"}),null}finally{c(!1)}},x=async h=>{var T;const S=(T=h.target.files)==null?void 0:T[0];if(S){const A=await g(S);A&&m(D=>({...D,avatar_url:A}))}},N=()=>{d.trim()&&!o.specialization.includes(d.trim())&&(m(h=>({...h,specialization:[...h.specialization,d.trim()]})),p(""))},k=h=>{m(S=>({...S,specialization:S.specialization.filter(T=>T!==h)}))},u=async()=>{if(s){r(!0);try{const{error:h}=await P.from("profiles").upsert({id:s.id,...o,updated_at:new Date().toISOString()});if(h)throw h;a({title:"Success",description:"Profile updated successfully!"})}catch(h){console.error("Error saving profile:",h),a({title:"Error",description:"Failed to save profile",variant:"destructive"})}finally{r(!1)}}};return e.jsxs(v,{className:"max-w-4xl mx-auto",children:[e.jsx(b,{children:e.jsx(w,{children:"Edit Profile"})}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ls,{className:"h-20 w-20",children:[e.jsx(bs,{src:o.avatar_url}),e.jsx(cs,{children:o.full_name.split(" ").map(h=>h[0]).join("").toUpperCase()||"U"})]}),e.jsxs("div",{children:[e.jsxs(f,{variant:"outline",onClick:()=>{var h;return(h=n.current)==null?void 0:h.click()},disabled:i,children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),i?"Uploading...":"Change Photo"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Max 2MB. JPG, PNG supported."}),e.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:x,className:"hidden"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"full_name",children:"Full Name"}),e.jsx(M,{id:"full_name",value:o.full_name,onChange:h=>m(S=>({...S,full_name:h.target.value})),placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"email",children:"Email"}),e.jsx(M,{id:"email",value:o.email,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"contact_number",children:"Contact Number"}),e.jsx(M,{id:"contact_number",value:o.contact_number,onChange:h=>m(S=>({...S,contact_number:h.target.value})),placeholder:"+254 7XX XXX XXX"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"county",children:"County"}),e.jsxs(Y,{value:o.county,onValueChange:h=>m(S=>({...S,county:h})),children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Select your county"})}),e.jsxs(G,{children:[e.jsx(C,{value:"nairobi",children:"Nairobi"}),e.jsx(C,{value:"kiambu",children:"Kiambu"}),e.jsx(C,{value:"machakos",children:"Machakos"}),e.jsx(C,{value:"kajiado",children:"Kajiado"}),e.jsx(C,{value:"murang'a",children:"Murang'a"}),e.jsx(C,{value:"nyeri",children:"Nyeri"}),e.jsx(C,{value:"kirinyaga",children:"Kirinyaga"}),e.jsx(C,{value:"nyandarua",children:"Nyandarua"}),e.jsx(C,{value:"laikipia",children:"Laikipia"}),e.jsx(C,{value:"nakuru",children:"Nakuru"}),e.jsx(C,{value:"uasin-gishu",children:"Uasin Gishu"}),e.jsx(C,{value:"trans-nzoia",children:"Trans Nzoia"}),e.jsx(C,{value:"bungoma",children:"Bungoma"}),e.jsx(C,{value:"kakamega",children:"Kakamega"}),e.jsx(C,{value:"vihiga",children:"Vihiga"}),e.jsx(C,{value:"siaya",children:"Siaya"}),e.jsx(C,{value:"kisumu",children:"Kisumu"}),e.jsx(C,{value:"homa-bay",children:"Homa Bay"}),e.jsx(C,{value:"migori",children:"Migori"}),e.jsx(C,{value:"kisii",children:"Kisii"}),e.jsx(C,{value:"nyamira",children:"Nyamira"}),e.jsx(C,{value:"meru",children:"Meru"}),e.jsx(C,{value:"tharaka-nithi",children:"Tharaka Nithi"}),e.jsx(C,{value:"embu",children:"Embu"}),e.jsx(C,{value:"kitui",children:"Kitui"}),e.jsx(C,{value:"machakos",children:"Machakos"}),e.jsx(C,{value:"makueni",children:"Makueni"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"bio",children:"Bio"}),e.jsx(ge,{id:"bio",value:o.bio,onChange:h=>m(S=>({...S,bio:h.target.value})),placeholder:"Tell us about yourself and your farming journey...",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"farm_size",children:"Farm Size (Acres)"}),e.jsx(M,{id:"farm_size",type:"number",value:o.farm_size,onChange:h=>m(S=>({...S,farm_size:parseFloat(h.target.value)||0})),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"farm_type",children:"Farm Type"}),e.jsxs(Y,{value:o.farm_type,onValueChange:h=>m(S=>({...S,farm_type:h})),children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Select farm type"})}),e.jsxs(G,{children:[e.jsx(C,{value:"mixed",children:"Mixed Farming"}),e.jsx(C,{value:"crop",children:"Crop Production"}),e.jsx(C,{value:"livestock",children:"Livestock"}),e.jsx(C,{value:"poultry",children:"Poultry"}),e.jsx(C,{value:"dairy",children:"Dairy"}),e.jsx(C,{value:"horticulture",children:"Horticulture"}),e.jsx(C,{value:"greenhouse",children:"Greenhouse"}),e.jsx(C,{value:"fish",children:"Fish Farming"}),e.jsx(C,{value:"organic",children:"Organic Farming"})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"experience_years",children:"Years of Experience"}),e.jsx(M,{id:"experience_years",type:"number",value:o.experience_years,onChange:h=>m(S=>({...S,experience_years:parseInt(h.target.value)||0})),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Specializations"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:o.specialization.map(h=>e.jsxs(_,{variant:"secondary",className:"flex items-center gap-1",children:[h,e.jsx("button",{onClick:()=>k(h),className:"ml-1 hover:text-destructive",children:"Ã—"})]},h))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{value:d,onChange:h=>p(h.target.value),placeholder:"Add specialization (e.g., Maize, Tomatoes, Dairy)",onKeyPress:h=>h.key==="Enter"&&(h.preventDefault(),N())}),e.jsx(f,{type:"button",variant:"outline",onClick:N,children:"Add"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 rounded-lg",children:[e.jsx(at,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Privacy Notice"}),e.jsx("p",{className:"text-blue-800",children:"Your profile information helps connect you with relevant opportunities and fellow farmers. You can control what information is visible to others in your privacy settings."})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(f,{onClick:u,disabled:t,children:[e.jsx(Ui,{className:"h-4 w-4 mr-2"}),t?"Saving...":"Save Profile"]})})]})]})},dc=()=>{const{user:s}=Xe(),a=Ne();return s?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsxs(f,{variant:"outline",onClick:()=>a(-1),children:[e.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Profile Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account information and preferences"})]})]}),e.jsx(oc,{})]})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("div",{className:"container mx-auto py-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Please sign in to view your profile."}),e.jsx(f,{onClick:()=>a("/auth"),children:"Sign In"})]})]})},mc=()=>e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{placeholder:"Search for products, farmers, or services...",className:"flex-1"}),e.jsxs(f,{children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Search"]})]})}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Search Results"})}),e.jsx(y,{children:e.jsx("p",{className:"text-muted-foreground",children:"Enter a search term to find products, farmers, or services in the AgriConnect platform."})})]})]}),uc=async()=>{try{console.log("Fetching logistics stats from database...");const{count:s}=await P.from("transporters").select("*",{count:"exact",head:!0}),{count:a}=await P.from("warehouses").select("*",{count:"exact",head:!0}),{count:t}=await P.from("aggregators").select("*",{count:"exact",head:!0}).eq("is_active",!0),{count:r}=await P.from("processors").select("*",{count:"exact",head:!0}).eq("is_active",!0),{count:i}=await P.from("micro_creditors").select("*",{count:"exact",head:!0}).eq("is_active",!0),c=15,{data:n}=await P.from("aggregators").select("county").eq("is_active",!0),o=new Set((n==null?void 0:n.map(m=>m.county))||[]);return{activeTransporters:s||0,storageFacilities:a||0,countiesCovered:o.size,monthlyDeliveries:1240,aggregators:t||0,processors:r||0,microCreditors:i||0,p2pLenders:c||0}}catch(s){return console.error("Error fetching logistics stats:",s),{activeTransporters:0,storageFacilities:0,countiesCovered:0,monthlyDeliveries:0,aggregators:0,processors:0,microCreditors:0,p2pLenders:0}}},xc=async()=>{try{console.log("Fetching all logistics providers...");const s=[],{data:a}=await P.from("transporters").select("*");a&&a.forEach(n=>{s.push({id:n.id,name:n.name,type:"transport",description:`${n.service_type} - ${n.capacity}`,location:n.counties.join(", "),county:n.counties[0]||"",contact_phone:n.contact_info,contact_email:"",is_verified:!0,rating:4.2,services:[n.service_type],coordinates:{latitude:-1.2921,longitude:36.8219}})});const{data:t}=await P.from("aggregators").select("*").eq("is_active",!0);t&&t.forEach(n=>{s.push({id:n.id,name:n.aggregator_name,type:"aggregator",description:`Handles: ${n.commodities_handled.join(", ")}`,location:`${n.county}, ${n.sub_county||""}`,county:n.county,contact_phone:n.contact_phone,contact_email:n.contact_email,is_verified:n.is_verified,rating:n.rating,services:n.commodities_handled,coordinates:n.coordinates})});const{data:r}=await P.from("processors").select("*").eq("is_active",!0);r&&r.forEach(n=>{s.push({id:n.id,name:n.processor_name,type:"processor",description:`Processes: ${n.raw_materials_needed.join(", ")}`,location:`${n.county}, ${n.sub_county||""}`,county:n.county,contact_phone:n.contact_phone,contact_email:n.contact_email,is_verified:n.is_verified,rating:n.rating,services:n.processed_products,coordinates:n.coordinates})});const{data:i}=await P.from("micro_creditors").select("*").eq("is_active",!0);i&&i.forEach(n=>{s.push({id:n.id,name:n.institution_name,type:"microcredit",description:`${n.institution_type} - ${n.interest_rate_range}`,location:`${n.county}, ${n.sub_county||""}`,county:n.county,contact_phone:n.contact_phone,contact_email:n.contact_email,is_verified:n.is_licensed,rating:n.rating,services:n.target_sectors,coordinates:n.coordinates})});const c=[{id:"warehouse-1",name:"Central Storage Facility",type:"storage",description:"Modern cold storage facility - 5000 tons capacity",location:"Nakuru, Nakuru",county:"Nakuru",contact_phone:"+254 700 234 567",contact_email:"info@centralstorage.co.ke",is_verified:!0,rating:4.5,services:["Cold Storage","Dry Storage","Packaging"],coordinates:{latitude:-.3031,longitude:36.08}},{id:"microcredit-1",name:"AgriCredit Solutions",type:"microcredit",description:"Microfinance institution - 5-15% interest rates",location:"Kisumu, Kisumu",county:"Kisumu",contact_phone:"+254 700 345 678",contact_email:"loans@agricredit.co.ke",is_verified:!0,rating:4.3,services:["Farm Loans","Equipment Finance","Working Capital"],coordinates:{latitude:-.0917,longitude:34.768}},{id:"p2p-1",name:"FarmLink P2P",type:"p2p_lending",description:"Peer-to-peer lending platform - 8-20% interest",location:"Mombasa, Mombasa",county:"Mombasa",contact_phone:"+254 700 456 789",contact_email:"support@farmlink.co.ke",is_verified:!0,rating:4.2,services:["Quick Loans","Seasonal Finance","Equipment Loans"],coordinates:{latitude:-4.0435,longitude:39.6682}}];return s.push(...c),console.log(`Found ${s.length} total providers`),s}catch(s){return console.error("Error fetching logistics providers:",s),[]}},Ze=({label:s,value:a,icon:t})=>e.jsxs(v,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:s}),t]}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold",children:a})})]}),hc=()=>{const[s,a]=l.useState({activeTransporters:0,storageFacilities:0,countiesCovered:0,monthlyDeliveries:0,aggregators:0,processors:0,microCreditors:0,p2pLenders:0}),[t,r]=l.useState([]),[i,c]=l.useState(!0),[n,o]=l.useState(""),[m,d]=l.useState(""),[p,j]=l.useState("");l.useEffect(()=>{(async()=>{try{c(!0),console.log("Fetching logistics data...");const[h,S]=await Promise.all([uc(),xc()]);console.log("Stats data:",h),console.log("Providers data:",S),a(h),r(S)}catch(h){console.error("Error fetching logistics data:",h)}finally{c(!1)}})()},[]);const g=["Nairobi","Mombasa","Kisumu","Nakuru","Eldoret","Thika","Kiambu","Machakos","Meru","Embu","Nyeri","Muranga"],x=t.filter(u=>{const h=u.name.toLowerCase().includes(n.toLowerCase()),S=!m||m==="all"||u.county===m,T=!p||p==="all"||u.type===p;return h&&S&&T}),N=u=>{switch(u){case"transport":return e.jsx(ye,{className:"h-5 w-5"});case"storage":return e.jsx(hs,{className:"h-5 w-5"});case"aggregator":return e.jsx(ke,{className:"h-5 w-5"});case"processor":return e.jsx(ga,{className:"h-5 w-5"});case"microcredit":return e.jsx(Fs,{className:"h-5 w-5"});case"p2p_lending":return e.jsx(De,{className:"h-5 w-5"});default:return e.jsx(oe,{className:"h-5 w-5"})}},k=u=>{switch(u){case"transport":return"Transport";case"storage":return"Storage";case"aggregator":return"Aggregator";case"processor":return"Processor";case"microcredit":return"Micro Credit";case"p2p_lending":return"P2P Lending";default:return u}};return i?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg",children:"Loading logistics data from database..."}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"Fetching real providers and facilities"})]})})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Smart Logistics Network"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Connect with verified transport providers, storage facilities, aggregators, processors, and financial services across Kenya"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 mb-8",children:[e.jsx(Ze,{label:"Transporters",value:s.activeTransporters,icon:e.jsx(ye,{className:"h-4 w-4 text-primary"})}),e.jsx(Ze,{label:"Storage",value:s.storageFacilities,icon:e.jsx(hs,{className:"h-4 w-4 text-primary"})}),e.jsx(Ze,{label:"Aggregators",value:s.aggregators,icon:e.jsx(ke,{className:"h-4 w-4 text-primary"})}),e.jsx(Ze,{label:"Processors",value:s.processors,icon:e.jsx(ga,{className:"h-4 w-4 text-primary"})}),e.jsx(Ze,{label:"Micro Credit",value:s.microCreditors,icon:e.jsx(Fs,{className:"h-4 w-4 text-primary"})}),e.jsx(Ze,{label:"P2P Lending",value:s.p2pLenders,icon:e.jsx(De,{className:"h-4 w-4 text-primary"})}),e.jsx(Ze,{label:"Counties",value:s.countiesCovered,icon:e.jsx(rt,{className:"h-5 w-5 text-primary"})}),e.jsx(Ze,{label:"Monthly",value:s.monthlyDeliveries,icon:e.jsx(oe,{className:"h-5 w-5 text-primary"})})]}),e.jsxs(v,{className:"mb-8",children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-5 w-5"}),"Filter Services"]})}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(M,{placeholder:"Search providers...",value:n,onChange:u=>o(u.target.value)}),e.jsxs(Y,{value:m,onValueChange:d,children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Select County"})}),e.jsxs(G,{children:[e.jsx(C,{value:"all",children:"All Counties"}),g.map(u=>e.jsx(C,{value:u,children:u},u))]})]}),e.jsxs(Y,{value:p,onValueChange:j,children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Service Type"})}),e.jsxs(G,{children:[e.jsx(C,{value:"all",children:"All Services"}),e.jsx(C,{value:"transport",children:"Transport"}),e.jsx(C,{value:"storage",children:"Storage"}),e.jsx(C,{value:"aggregator",children:"Aggregators"}),e.jsx(C,{value:"processor",children:"Processors"}),e.jsx(C,{value:"microcredit",children:"Micro Credit"}),e.jsx(C,{value:"p2p_lending",children:"P2P Lending"})]})]}),e.jsx(f,{variant:"outline",onClick:()=>{o(""),d("all"),j("all")},children:"Clear Filters"})]})})]}),e.jsx("div",{className:"grid gap-6",children:x.length===0?e.jsx(v,{children:e.jsxs(y,{className:"p-8 text-center",children:[e.jsx(ke,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Providers Found"}),e.jsx("p",{className:"text-muted-foreground",children:n||m||p?"Try adjusting your filters to see more results.":"Providers will appear here once they register on the platform."})]})}):x.map(u=>e.jsxs(v,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(b,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[N(u.type),u.name]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(se,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:u.location})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(rt,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"ml-1 text-sm",children:u.rating})]}),e.jsx(_,{variant:"secondary",children:k(u.type)}),u.is_verified&&e.jsx(_,{variant:"default",children:"Verified"})]})]})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:u.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[u.services.slice(0,3).map(h=>e.jsx(_,{variant:"outline",children:h},h)),u.services.length>3&&e.jsxs(_,{variant:"outline",children:["+",u.services.length-3," more"]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:u.contact_phone})]}),e.jsx(f,{size:"sm",children:"Connect"})]})]})]},u.id))})]})]})},pc=[{name:"Home",href:"/",icon:Jt},{name:"Market Data",href:"/kilimo-ams-data",icon:me},{name:"Logistics",href:"/logistics",icon:ye},{name:"Equipment Marketplace",href:"/EquipmentMarketplace",icon:ye},{name:"Service Providers",href:"/service-providers",icon:oe},{name:"Advertise Business",href:"/business-marketing",icon:et,highlight:!0},{name:"Trading",href:"/commodity-trading",icon:De},{name:"Community",href:"/community-forum",icon:xs},{name:"Analytics",href:"/sentiment-analysis",icon:Ve},{name:"Export Opportunities",href:"/ExportMarketOpportunities",icon:zs}],es=()=>{const s=xt();return e.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[e.jsxs(V,{to:"/",className:"flex items-center space-x-2 mr-6",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold",children:"A"})}),e.jsx("span",{className:"hidden lg:inline-block font-bold",children:"AgriConnect"})]}),pc.map(a=>{const t=s.pathname===a.href;return e.jsx(V,{to:a.href,children:e.jsxs(f,{variant:t?"default":"ghost",size:"sm",className:q("flex items-center space-x-2",a.highlight&&!t&&"bg-green-50 text-green-700 hover:bg-green-100 border border-green-200",a.highlight&&t&&"bg-green-600 hover:bg-green-700"),children:[e.jsx(a.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden lg:inline",children:a.name})]})},a.name)})]})},gc=er,jc=sr,Vr=({...s})=>e.jsx(Ht,{...s});Vr.displayName=Ht.displayName;const Hr=l.forwardRef(({className:s,...a},t)=>e.jsx(ct,{className:q("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));Hr.displayName=ct.displayName;const fc=vs("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Gr=l.forwardRef(({side:s="right",className:a,children:t,...r},i)=>e.jsxs(Vr,{children:[e.jsx(Hr,{}),e.jsxs(ot,{ref:i,className:q(fc({side:s}),a),...r,children:[t,e.jsxs(Xa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Gr.displayName=ot.displayName;const vc=l.forwardRef(({className:s,...a},t)=>e.jsx(dt,{ref:t,className:q("text-lg font-semibold text-foreground",s),...a}));vc.displayName=dt.displayName;const yc=l.forwardRef(({className:s,...a},t)=>e.jsx(mt,{ref:t,className:q("text-sm text-muted-foreground",s),...a}));yc.displayName=mt.displayName;const Nc=[{name:"Home",href:"/",icon:Jt},{name:"Market Data",href:"/kilimo-ams-data",icon:me},{name:"Logistics",href:"/logistics",icon:ye},{name:"Service Providers",href:"/service-providers",icon:oe},{name:"Advertise Business",href:"/business-marketing",icon:et,highlight:!0},{name:"Trading",href:"/commodity-trading",icon:De},{name:"Community",href:"/community-forum",icon:xs},{name:"Analytics",href:"/sentiment-analysis",icon:Ve}],ws=()=>{const[s,a]=l.useState(!1),t=xt();return e.jsx("div",{className:"md:hidden",children:e.jsxs(gc,{open:s,onOpenChange:a,children:[e.jsx(jc,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",children:e.jsx(Hi,{className:"h-5 w-5"})})}),e.jsx(Gr,{side:"left",className:"w-80",children:e.jsxs("div",{className:"flex flex-col space-y-4 mt-4",children:[e.jsxs(V,{to:"/",className:"flex items-center space-x-2 mb-6",onClick:()=>a(!1),children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold",children:"A"})}),e.jsx("span",{className:"font-bold text-lg",children:"AgriConnect"})]}),Nc.map(r=>{const i=t.pathname===r.href;return e.jsxs(V,{to:r.href,onClick:()=>a(!1),className:q("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors",i?"bg-primary text-primary-foreground":r.highlight?"bg-green-50 text-green-700 hover:bg-green-100":"hover:bg-muted"),children:[e.jsx(r.icon,{className:"h-5 w-5"}),e.jsx("span",{children:r.name}),r.highlight&&e.jsx("span",{className:"ml-auto text-xs bg-green-200 text-green-800 px-2 py-1 rounded-full",children:"New"})]},r.name)})]})})]})})},Dt=[{id:"sp1",name:"KenStore Warehousing",businessType:"storage",description:"Modern storage solutions for agricultural produce with temperature control facilities.",services:["Dry Storage","Cold Storage","Fumigation","Quality Monitoring"],location:{county:"Nairobi County",specificLocation:"Industrial Area",coordinates:{latitude:-1.3031934,longitude:36.8719419}},contactInfo:"info@kenstore.co.ke | +254 712 345 678",rates:"KES 300-500 per ton/month",verified:!0,rating:4.7,reviewCount:28,tags:["warehouse","cold-chain","fumigation"],createdAt:"2023-01-15T08:40:00Z",updatedAt:"2023-08-20T14:30:00Z"},{id:"sp2",name:"AgriTransport Logistics",businessType:"transport",description:"Reliable transportation services for agricultural goods across East Africa.",services:["Refrigerated Transport","Bulk Transport","Real-time Tracking"],location:{county:"Mombasa County",specificLocation:"Port Area",coordinates:{latitude:-4.052052,longitude:39.6662227}},contactInfo:"logistics@agritransport.com | +254 722 000 111",rates:"KES 5000-8000 per trip",verified:!0,rating:4.5,reviewCount:35,tags:["transport","logistics","refrigerated"],createdAt:"2023-02-20T10:00:00Z",updatedAt:"2023-09-10T16:00:00Z"},{id:"sp3",name:"CropSure Quality Control",businessType:"quality-control",description:"Ensuring the quality of your produce with certified inspection and testing services.",services:["Soil Testing","Crop Inspection","Certification","Training"],location:{county:"Nakuru County",specificLocation:"Agricultural Center",coordinates:{latitude:-.274744,longitude:36.0759359}},contactInfo:"quality@cropsure.co.ke | +254 733 999 888",rates:"KES 1000-2000 per test",verified:!0,rating:4.8,reviewCount:42,tags:["quality-control","testing","inspection"],createdAt:"2023-03-10T12:30:00Z",updatedAt:"2023-07-25T09:15:00Z"},{id:"sp4",name:"FarmLink Market Access",businessType:"market-linkage",description:"Connecting farmers with reliable markets for their produce.",services:["Market Information","Buyer Connections","Contract Negotiation"],location:{county:"Kisumu County",specificLocation:"Market Square",coordinates:{latitude:-.0917325,longitude:34.7557352}},contactInfo:"markets@farmlink.org | +254 744 555 666",rates:"5% commission on sales",verified:!0,rating:4.6,reviewCount:30,tags:["market-linkage","sales","farmers"],createdAt:"2023-04-01T15:00:00Z",updatedAt:"2023-08-15T11:45:00Z"},{id:"sp5",name:"AgriTrain Training Services",businessType:"training",description:"Providing farmers with the knowledge and skills they need to improve their yields and incomes.",services:["Crop Management","Pest Control","Financial Literacy"],location:{county:"Uasin Gishu County",specificLocation:"Eldoret Town",coordinates:{latitude:.516667,longitude:35.266667}},contactInfo:"training@agritrain.co.ke | +254 755 777 888",rates:"KES 2000 per course",verified:!0,rating:4.9,reviewCount:50,tags:["training","skills","farmers"],createdAt:"2023-05-10T09:00:00Z",updatedAt:"2023-09-01T13:30:00Z"},{id:"sp6",name:"SeedCo Input Supplies",businessType:"input-supplier",description:"Supplying farmers with high-quality seeds and fertilizers to maximize their yields.",services:["Seeds","Fertilizers","Pesticides","Equipment"],location:{county:"Kiambu County",specificLocation:"Thika Town",coordinates:{latitude:-1.0374365,longitude:37.0937757}},contactInfo:"supplies@seedco.com | +254 766 888 999",rates:"Market rates",verified:!0,rating:4.7,reviewCount:38,tags:["seeds","fertilizers","equipment"],createdAt:"2023-06-01T11:00:00Z",updatedAt:"2023-08-25T10:00:00Z"},{id:"sp7",name:"AgriSure Insurance Services",businessType:"inspector",description:"Providing insurance services to farmers to protect them against crop losses.",services:["Crop Insurance","Livestock Insurance","Weather Index Insurance"],location:{county:"Nyeri County",specificLocation:"Town Center",coordinates:{latitude:-.420833,longitude:36.951111}},contactInfo:"insurance@agrisure.co.ke | +254 777 999 000",rates:"Varies based on coverage",verified:!0,rating:4.5,reviewCount:25,tags:["insurance","protection","farmers"],createdAt:"2023-07-01T14:00:00Z",updatedAt:"2023-09-15T17:00:00Z"}],Et=[{id:"d1",title:"Best Practices for Quality Control in Maize Storage",description:"A discussion on ensuring quality standards for maize in storage facilities across Kenya.",date:"2023-09-15",location:"Nairobi County",organizer:"Kenya Bureau of Standards",attendees:45,tags:["maize","storage","quality-standards","pest-control"],authorName:"John Mwangi",authorType:"Quality Control Officer"},{id:"d2",title:"Organic Farming Techniques Workshop",description:"A workshop focusing on sustainable organic farming methods to improve crop yield and soil health.",date:"2023-09-22",location:"Nakuru County",organizer:"Agricultural Society of Kenya",attendees:60,tags:["organic-farming","sustainable-agriculture","soil-health","crop-yield"],authorName:"Aisha Patel",authorType:"Agronomist"},{id:"d3",title:"Post-Harvest Handling of Horticultural Crops",description:"Training on best practices for handling horticultural crops after harvest to minimize losses and maintain quality.",date:"2023-10-01",location:"Kiambu County",organizer:"Horticultural Crops Directorate",attendees:30,tags:["post-harvest","horticulture","crop-handling","quality-control"],authorName:"Samuel Kimani",authorType:"Agricultural Extension Officer"},{id:"d4",title:"Financial Literacy for Smallholder Farmers",description:"A seminar aimed at improving the financial management skills of smallholder farmers.",date:"2023-10-10",location:"Muranga County",organizer:"Ministry of Agriculture",attendees:50,tags:["financial-literacy","smallholder-farmers","financial-management","agribusiness"],authorName:"Esther Njoroge",authorType:"Financial Advisor"},{id:"d5",title:"Climate-Smart Agriculture Practices",description:"A workshop on adopting climate-smart agricultural practices to build resilience to climate change.",date:"2023-10-18",location:"Machakos County",organizer:"Food and Agriculture Organization",attendees:40,tags:["climate-smart-agriculture","climate-change","resilience","sustainable-farming"],authorName:"David Omondi",authorType:"Climate Change Expert"},{id:"d6",title:"Integrated Pest and Disease Management",description:"Training on effective and environmentally friendly methods for managing pests and diseases in crops.",date:"2023-10-25",location:"Kisumu County",organizer:"Kenya Agricultural and Livestock Research Organization",attendees:35,tags:["pest-management","disease-control","integrated-farming","crop-protection"],authorName:"Grace Otieno",authorType:"Plant Pathologist"},{id:"d7",title:"Water Management and Irrigation Techniques",description:"A seminar on efficient water management and modern irrigation techniques for crop production.",date:"2023-11-02",location:"Laikipia County",organizer:"Water Resources Management Authority",attendees:48,tags:["water-management","irrigation","water-conservation","crop-production"],authorName:"Peter Kamau",authorType:"Irrigation Engineer"},{id:"d8",title:"Value Addition and Agro-processing Opportunities",description:"A workshop exploring opportunities for value addition and agro-processing to increase farmer incomes.",date:"2023-11-09",location:"Uasin Gishu County",organizer:"Kenya Industrial Research and Development Institute",attendees:55,tags:["value-addition","agro-processing","farmer-incomes","agri-business"],authorName:"Mercy Chebet",authorType:"Agro-processing Specialist"}],Ft=[{id:"1",title:"Advanced Tomato Growing Techniques",description:"Learn the latest techniques for growing high-quality tomatoes, including disease prevention, optimal fertilization, and harvest timing. This hands-on workshop will cover greenhouse and open field production systems.",providerId:"provider1",providerName:"Kilimo Extension Services",date:"2023-08-15T09:00:00Z",location:"Agricultural Training Center, Thika",topics:["tomato production","disease management","greenhouse farming"],capacity:50,registeredCount:35,cost:0,attendees:35,tags:["tomato","greenhouse","fertilizer"],trainer:"Dr. John Kimani"},{id:"2",title:"Quality Control for Fresh Produce Exporters",description:"This comprehensive training covers all aspects of quality control for fresh produce export, including EU regulations, documentation requirements, sampling techniques, and audit preparation.",providerId:"provider2",providerName:"Export Quality Services",date:"2023-08-28T10:00:00Z",location:"Sarova Panafric Hotel, Nairobi",topics:["export standards","quality control","certification","EU regulations"],capacity:30,registeredCount:28,cost:5e3,attendees:28,tags:["export","quality","certification","EU"],trainer:"Ms. Jane Ochieng"},{id:"3",title:"Organic Certification Workshop",description:"Step-by-step guidance on the organic certification process for small and medium-scale farmers. Learn about record-keeping requirements, approved inputs, conversion periods, and marketing strategies.",providerId:"provider3",providerName:"Kenya Organic Agriculture Network",date:"2023-09-05T09:30:00Z",location:"Kisumu Agricultural Society Showground",topics:["organic certification","record keeping","organic inputs"],capacity:40,registeredCount:22,cost:2500,attendees:22,tags:["organic","record","inputs"],trainer:"Mr. David Mwangi"},{id:"4",title:"Pesticide Safety and Application",description:"Learn safe and effective pesticide application techniques, including proper handling, calibration of equipment, environmental protection measures, and health safety protocols.",providerId:"provider4",providerName:"Agrochemical Association of Kenya",date:"2023-09-12T08:00:00Z",location:"Machakos Farmers Training Center",topics:["pesticide safety","application techniques","equipment calibration"],capacity:60,registeredCount:45,cost:0,attendees:45,tags:["pesticide","application","calibration"],trainer:"Dr. Emily Mwangi"},{id:"5",title:"Post-Harvest Management for Fruits and Vegetables",description:"Reduce post-harvest losses through improved handling, storage, and transportation techniques. This training covers cold chain management, packaging solutions, and value addition opportunities.",providerId:"provider5",providerName:"Horticultural Crops Directorate",date:"2023-09-20T10:00:00Z",location:"KALRO Center, Meru",topics:["post-harvest management","cold chain","value addition"],capacity:35,registeredCount:18,cost:1e3,attendees:18,tags:["post-harvest","cold","value"],trainer:"Ms. Mary Wanjiru"},{id:"6",title:"Food Safety Management Systems (HACCP)",description:"Comprehensive training on implementing HACCP principles in agricultural production and handling. Learn to identify critical control points and develop monitoring systems for ensuring food safety.",providerId:"provider6",providerName:"Kenya Bureau of Standards",date:"2023-10-03T09:00:00Z",location:"KEBS Headquarters, Nairobi",topics:["HACCP","food safety","critical control points"],capacity:25,registeredCount:25,cost:8e3,attendees:25,tags:["HACCP","food","control"],trainer:"Dr. John Kimani"},{id:"7",title:"Digital Tools for Farm Record Keeping",description:"Introduction to smartphone applications and digital tools for maintaining farm records, tracking inputs and harvests, and preparing for certification audits.",providerId:"provider7",providerName:"Digital Farmers Kenya",date:"2023-10-10T14:00:00Z",location:"Virtual (Zoom)",topics:["digital agriculture","record keeping","farm management"],capacity:100,registeredCount:67,cost:500,attendees:67,tags:["digital","record","management"],trainer:"Ms. Jane Ochieng"},{id:"8",title:"Soil Testing and Fertility Management",description:"Learn to interpret soil test results and develop effective fertility management strategies. This training covers sampling techniques, understanding lab reports, and creating fertilizer plans.",providerId:"provider8",providerName:"Soil Health Initiative",date:"2023-10-18T09:00:00Z",location:"ATC Eldoret",topics:["soil health","soil testing","fertility management"],capacity:45,registeredCount:32,cost:1500,attendees:32,tags:["soil","testing","fertility"],trainer:"Mr. David Mwangi"},{id:"9",title:"Quality Assurance for Dairy Production",description:"Comprehensive training on quality assurance in milk production, handling, and processing. Learn about hygiene requirements, testing protocols, and quality standards.",providerId:"provider9",providerName:"Kenya Dairy Board",date:"2023-10-25T09:00:00Z",location:"Nakuru Agricultural Showground",topics:["dairy","milk quality","hygiene","testing"],capacity:50,registeredCount:28,cost:2e3,attendees:28,tags:["dairy","quality","hygiene","testing"],trainer:"Ms. Mary Wanjiru"}],Yr=async()=>{try{const s=await Ye.get("service-providers",{},Dt);return s&&s.results&&s.results.length>0?s.results:(console.log("Falling back to mock service provider data"),Dt)}catch(s){return console.error("Error fetching service providers:",s),Dt}},bc=async()=>{try{const s=await Ye.get("quality-discussions",{},Et);return s&&s.results&&s.results.length>0?s.results:(console.log("Falling back to mock quality discussions data"),Et)}catch(s){return console.error("Error fetching quality discussions:",s),Et}},wc=async()=>{try{const s=await Ye.get("training-events",{},Ft);return s&&s.results&&s.results.length>0?s.results:(console.log("Falling back to mock training events data"),Ft)}catch(s){return console.error("Error fetching training events:",s),Ft}},Cc=()=>{const s=Ne();return e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Service Providers Directory"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Find and connect with agricultural service providers across Kenya"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx(f,{onClick:()=>s("/service-provider-registration"),children:"Register as a Provider"})})]})},kc=({searchTerm:s,setSearchTerm:a,selectedType:t,setSelectedType:r,selectedCounty:i,setSelectedCounty:c,filteredCount:n,counties:o,providerTypes:m})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"relative",children:e.jsx(M,{placeholder:"Search by name, service or tag...",value:s,onChange:d=>a(d.target.value),className:"w-full"})}),e.jsx("div",{children:e.jsxs(Y,{value:i,onValueChange:c,children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Filter by county"})}),e.jsx(G,{children:o.map(d=>e.jsx(C,{value:d.value,children:d.label},d.value))})]})}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("span",{className:"text-sm text-muted-foreground mr-2",children:[n," providers found"]})})]}),Sc=({activeTab:s,onTabChange:a,providerTypes:t})=>e.jsx(ce,{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 h-auto",children:t.map(r=>e.jsx(K,{value:r.value,className:"text-xs md:text-sm",children:r.label},r.value))}),_c=()=>{const s=Ne();return e.jsxs("div",{className:"mt-12 border-t pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Recent Training Events"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(a=>e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{className:"text-lg",children:"Advanced Potato Farming Techniques"}),e.jsx(B,{children:"AgriTrain Kenya"})]}),e.jsxs(y,{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Learn advanced techniques for potato cultivation including disease management and optimal fertilization"}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Ce,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{children:"May 15, 2025"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(se,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{children:"Meru Agricultural Training Center"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(oe,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{children:"18/30 registered"})]})]}),e.jsxs(J,{className:"flex justify-between",children:[e.jsx(_,{children:"KSh 2,500"}),e.jsx(f,{size:"sm",onClick:()=>s("/training-events"),children:"Register"})]})]},a))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(f,{variant:"outline",onClick:()=>s("/training-events"),children:"View All Events"})})]})},Ac=()=>{const[s,a]=Gi(),t=Ne(),{toast:r}=ee(),[i,c]=l.useState([]),[n,o]=l.useState([]),[m,d]=l.useState(!0),[p,j]=l.useState(""),[g,x]=l.useState("all"),[N,k]=l.useState("all"),[u,h]=l.useState("All Providers"),[S,T]=l.useState([]),[A,D]=l.useState([]),R=s.get("type")||"all",$=[{value:"all",label:"All Providers"},{value:"storage",label:"Storage Facilities"},{value:"transport",label:"Transport Services"},{value:"quality-control",label:"Quality Control"},{value:"training",label:"Training Providers"},{value:"input-supplier",label:"Input Suppliers"},{value:"inspector",label:"Inspectors"},{value:"market-linkage",label:"Market Linkage"},{value:"insurance-provider",label:"Insurance Providers"},{value:"soil-testing-provider",label:"Soil Testing Providers"},{value:"drone-satellite-imagery-provider",label:"Drone and Satellite Imagery Providers"},{value:"iot-sensor-data-provider",label:"IoT Sensor Data Providers"},{value:"export-transporters",label:"Export Transporters"},{value:"shippers",label:"Shippers"}],Z=[{value:"all",label:"All Counties"},{value:"nairobi",label:"Nairobi"},{value:"mombasa",label:"Mombasa"},{value:"kisumu",label:"Kisumu"},{value:"nakuru",label:"Nakuru"},{value:"kiambu",label:"Kiambu"},{value:"machakos",label:"Machakos"},{value:"meru",label:"Meru"},{value:"kakamega",label:"Kakamega"},{value:"uasin-gishu",label:"Uasin Gishu"},{value:"nyeri",label:"Nyeri"},{value:"kilifi",label:"Kilifi"}],F=["All Providers","Storage Facilities","Transport Services","Quality Control","Training Providers","Input Suppliers","Inspectors","Market Linkage","Insurance Providers","Soil Testing Providers","Drone and Satellite Imagery Providers","IoT Sensor Data Providers","Export Transporters","Shippers"];l.useEffect(()=>{(async()=>{try{d(!0);const E=await Yr();c(E),o(E)}catch(E){console.error("Error fetching service providers:",E),r({title:"Error",description:"Failed to load service providers. Please try again later.",variant:"destructive"})}finally{d(!1)}})()},[r]),l.useEffect(()=>{let z=[...i];if(g!=="all"&&(z=z.filter(E=>E.businessType===g)),N!=="all"&&(z=z.filter(E=>E.location.county.toLowerCase()===N.toLowerCase())),u!=="All Providers"&&(z=z.filter(E=>E.provider_category===u)),p){const E=p.toLowerCase();z=z.filter(X=>X.name.toLowerCase().includes(E)||X.description.toLowerCase().includes(E)||X.services.some(ae=>ae.toLowerCase().includes(E))||X.tags.some(ae=>ae.toLowerCase().includes(E)))}o(z)},[i,g,N,p,u]);const Q=z=>{z==="all"?s.delete("type"):s.set("type",z),a(s),x(z)};async function he(z){const{data:E}=await P.from("transporter_bookings").select("*").eq("transporter_id",z);T(E||[])}async function $e(z){const{data:E}=await P.from("tracking_events").select("*").eq("export_order_id",z).order("event_time");D(E||[])}return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(es,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(ws,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsx(Cc,{}),e.jsx(de,{defaultValue:R,value:R,onValueChange:Q,className:"mb-8",children:e.jsx(Sc,{activeTab:R,onTabChange:Q,providerTypes:$})}),e.jsx(kc,{searchTerm:p,setSearchTerm:j,selectedType:g,setSelectedType:x,selectedCounty:N,setSelectedCounty:k,filteredCount:n.length,counties:Z,providerTypes:$,selectedCategory:u,setSelectedCategory:h,providerCategories:F}),m?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(z=>e.jsxs(v,{className:"animate-pulse",children:[e.jsx(b,{className:"h-32 bg-muted"}),e.jsxs(y,{className:"pt-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-5/6 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-4/6"})]})]},z))}):n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(st,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No providers found"}),e.jsx("p",{className:"text-muted-foreground mt-2 mb-4",children:"Try adjusting your search or filters, or register as a new provider."}),e.jsx(f,{onClick:()=>t("/service-provider-registration"),children:"Register as a Provider"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(z=>{var X;const E={rating:4.5,total:25};return e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:z.business_name}),e.jsx(Yi,{children:z.provider_category})]}),e.jsxs(y,{children:[e.jsx("div",{children:z.description}),e.jsxs("div",{children:["Location: ",z.location]}),z.provider_category==="Export Transporters"&&e.jsxs("div",{children:[e.jsxs("div",{children:["Licenses: ",(X=z.licenses)==null?void 0:X.join(", ")]}),e.jsxs("div",{children:["Insurance: ",z.insurance_details]}),e.jsxs("div",{children:["Rating: ",E.rating," (",E.total," reviews)"]}),e.jsx(f,{onClick:()=>he(z.id),children:"View Bookings"}),S.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Bookings"}),e.jsx("ul",{children:S.map(ae=>e.jsxs("li",{className:"mb-1",children:[ae.booking_date,": ",ae.cargo_type," - ",ae.status," (KES ",ae.price,")",e.jsx(f,{size:"xs",onClick:()=>$e(ae.export_order_id),className:"ml-2",children:"Track"})]},ae.id))})]}),A.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Tracking History"}),e.jsx("ul",{children:A.map(ae=>e.jsxs("li",{className:"mb-1",children:[ae.event_time,": ",ae.location," ",ae.status&&`- ${ae.status}`]},ae.id))})]})]})]})]},z.id)})}),e.jsx(_c,{})]})]})},Pc=()=>e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Quality Control Discussions"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Join the conversation on agricultural quality standards and challenges"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsxs(f,{children:[e.jsx(Zt,{className:"mr-2 h-4 w-4"})," Start New Discussion"]})})]}),Tc=({searchTerm:s,setSearchTerm:a,filterTag:t,setFilterTag:r,allTags:i})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"md:col-span-3",children:e.jsx(M,{placeholder:"Search discussions...",value:s,onChange:c=>a(c.target.value),className:"w-full"})}),e.jsx("div",{children:e.jsxs(Y,{value:t,onValueChange:r,children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Filter by tag"})}),e.jsxs(G,{children:[e.jsx(C,{value:"all",children:"All Tags"}),i.map(c=>e.jsx(C,{value:c,children:c},c))]})]})})]}),Ic=({discussion:s,filterTag:a,setFilterTag:t})=>e.jsxs(v,{children:[e.jsxs(b,{className:"pb-2",children:[e.jsx(w,{className:"text-xl",children:s.title}),e.jsxs(B,{className:"flex items-center",children:["Started by ",s.authorName,e.jsx(_,{variant:"outline",className:"ml-2 text-xs",children:s.authorType})]})]}),e.jsxs(y,{children:[e.jsx("p",{className:"text-muted-foreground line-clamp-2",children:s.content}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:s.tags.map(r=>e.jsx(_,{variant:a===r?"default":"outline",className:"cursor-pointer",onClick:()=>t(r),children:r},r))})]}),e.jsxs(J,{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ke,{className:"mr-1 h-4 w-4"}),s.commentCount," comments"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ht,{className:"mr-1 h-4 w-4"}),s.viewCount," views"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Yt,{className:"mr-1 h-4 w-4"}),new Date(s.createdAt).toLocaleDateString()]})]}),e.jsx(f,{variant:"ghost",size:"sm",children:"View Discussion"})]})]}),Mc=()=>{const{toast:s}=ee(),[a,t]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState(""),[o,m]=l.useState("all"),d=["counterfeit","verification","export","regulations","avocados","EU","pesticides"];l.useEffect(()=>{(async()=>{try{i(!0);const g=await bc();t(g)}catch(g){console.error("Error fetching discussions:",g),s({title:"Error",description:"Failed to load discussions. Please try again later.",variant:"destructive"})}finally{i(!1)}})()},[s]);const p=a.filter(j=>{const g=c===""||j.title.toLowerCase().includes(c.toLowerCase())||j.content.toLowerCase().includes(c.toLowerCase())||j.authorName.toLowerCase().includes(c.toLowerCase()),x=o==="all"||j.tags.includes(o);return g&&x});return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(es,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(ws,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsx(Pc,{}),e.jsx(Tc,{searchTerm:c,setSearchTerm:n,filterTag:o,setFilterTag:m,allTags:d}),r?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(j=>e.jsxs(v,{className:"animate-pulse",children:[e.jsxs(b,{className:"pb-2",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-5/6 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-4/6"})]})]},j))}):p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(Ke,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No discussions found"}),e.jsx("p",{className:"text-muted-foreground mt-2 mb-4",children:"Be the first to start a discussion on this topic!"}),e.jsx(f,{children:"Start New Discussion"})]}):e.jsx("div",{className:"space-y-4",children:p.map(j=>e.jsx(Ic,{discussion:j,filterTag:o,setFilterTag:m},j.id))})]})]})},Dc=()=>{const{toast:s}=ee(),[a,t]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState(""),[o,m]=l.useState("upcoming");l.useEffect(()=>{(async()=>{try{i(!0);const j=await wc();t(j)}catch(j){console.error("Error fetching training events:",j),s({title:"Error",description:"Failed to load training events. Please try again later.",variant:"destructive"})}finally{i(!1)}})()},[s]);const d=a.filter(p=>{const j=c===""||p.title.toLowerCase().includes(c.toLowerCase())||p.description.toLowerCase().includes(c.toLowerCase())||p.providerName.toLowerCase().includes(c.toLowerCase())||p.topics.some(N=>N.toLowerCase().includes(c.toLowerCase())),g=new Date(p.date),x=new Date;return o==="upcoming"?j&&g>x:o==="past"?j&&g<=x:j});return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(es,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(ws,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Training Events"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Discover agricultural training events and workshops across Kenya"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx(f,{children:"Add Training Event"})})]}),e.jsx(de,{defaultValue:"upcoming",value:o,onValueChange:p=>m(p),className:"mb-8",children:e.jsxs(ce,{children:[e.jsx(K,{value:"upcoming",children:"Upcoming Events"}),e.jsx(K,{value:"past",children:"Past Events"}),e.jsx(K,{value:"all",children:"All Events"})]})}),e.jsx("div",{className:"mb-8",children:e.jsx(M,{placeholder:"Search events by title, provider, or topic...",value:c,onChange:p=>n(p.target.value),className:"w-full md:w-2/3 lg:w-1/2"})}),r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(p=>e.jsxs(v,{className:"animate-pulse",children:[e.jsxs(b,{className:"pb-2",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-5/6 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-4/6"})]}),e.jsx(J,{children:e.jsx("div",{className:"h-5 bg-muted rounded w-1/4"})})]},p))}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(Ce,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No events found"}),e.jsx("p",{className:"text-muted-foreground mt-2 mb-4",children:o==="upcoming"?"No upcoming events match your search. Try different keywords or check back later.":"No past events match your search. Try different keywords or check all events."}),o!=="all"&&e.jsx(f,{variant:"outline",onClick:()=>m("all"),children:"View All Events"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(p=>e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{className:"text-lg",children:p.title}),e.jsx(B,{children:p.providerName})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:p.description}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Ce,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[new Date(p.date).toLocaleDateString()," at ",new Date(p.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(se,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{children:p.location})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(oe,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[p.registeredCount,"/",p.capacity," registered"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:p.topics.map(j=>e.jsx(_,{variant:"outline",className:"text-xs",children:j},j))})]}),e.jsxs(J,{className:"flex justify-between",children:[e.jsx(_,{children:p.cost}),e.jsx(f,{size:"sm",children:new Date(p.date)>new Date?"Register":"View Details"})]})]},p.id))})]})]})},Ec=({onSuccess:s})=>{const{toast:a}=ee(),[t,r]=l.useState(!1),[i,c]=l.useState({title:"",description:"",linkage_type:"buyer_seller",crops_involved:[],counties:[],requirements:[],benefits:[],contact_info:"",application_deadline:"",start_date:"",duration_months:void 0,minimum_quantity:void 0,price_range:"",max_participants:void 0}),[n,o]=l.useState(""),[m,d]=l.useState(""),[p,j]=l.useState(""),[g,x]=l.useState(""),N=["Nairobi","Mombasa","Kisumu","Nakuru","Eldoret","Thika","Kiambu","Machakos","Meru","Embu","Nyeri","Muranga","Kakamega","Kisii","Nyamira","Kericho","Bomet","Narok","Kajiado","Makueni"],k=["Maize","Beans","Rice","Wheat","Potatoes","Sweet Potatoes","Cassava","Bananas","Coffee","Tea","Sugarcane","Cotton","Tomatoes","Onions","Cabbages","Kales","Spinach","Avocado","Mangoes","Oranges"],u=(T,A,D)=>{if(T.trim()){const L=i[A];L.includes(T.trim())||c(R=>({...R,[A]:[...L,T.trim()]})),D("")}},h=(T,A)=>{const D=i[A];c(L=>({...L,[A]:D.filter(R=>R!==T)}))},S=async T=>{if(T.preventDefault(),!i.title||!i.description||!i.contact_info){a({title:"Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{r(!0),await Ml(i),a({title:"Success",description:"Market linkage registered successfully!"}),c({title:"",description:"",linkage_type:"buyer_seller",crops_involved:[],counties:[],requirements:[],benefits:[],contact_info:"",application_deadline:"",start_date:"",duration_months:void 0,minimum_quantity:void 0,price_range:"",max_participants:void 0}),s&&s()}catch(A){console.error("Error creating market linkage:",A),a({title:"Error",description:"Failed to register market linkage. Please try again.",variant:"destructive"})}finally{r(!1)}};return e.jsxs(v,{className:"max-w-4xl mx-auto",children:[e.jsx(b,{children:e.jsx(w,{children:"Register New Market Linkage"})}),e.jsx(y,{children:e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),e.jsx(M,{value:i.title,onChange:T=>c(A=>({...A,title:T.target.value})),placeholder:"e.g., Avocado Export Partnership",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Linkage Type *"}),e.jsxs(Y,{value:i.linkage_type,onValueChange:T=>c(A=>({...A,linkage_type:T})),children:[e.jsx(H,{children:e.jsx(W,{})}),e.jsxs(G,{children:[e.jsx(C,{value:"buyer_seller",children:"Buyer-Seller"}),e.jsx(C,{value:"contract_farming",children:"Contract Farming"}),e.jsx(C,{value:"cooperative",children:"Cooperative"}),e.jsx(C,{value:"export_opportunity",children:"Export Opportunity"}),e.jsx(C,{value:"processing_partnership",children:"Processing Partnership"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Contact Information *"}),e.jsx(M,{value:i.contact_info,onChange:T=>c(A=>({...A,contact_info:T.target.value})),placeholder:"Phone: +254..., Email: ...",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description *"}),e.jsx(ge,{value:i.description,onChange:T=>c(A=>({...A,description:T.target.value})),placeholder:"Detailed description of the market linkage opportunity...",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Crops Involved"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(Y,{value:n,onValueChange:o,children:[e.jsx(H,{className:"flex-1",children:e.jsx(W,{placeholder:"Select crop"})}),e.jsx(G,{children:k.map(T=>e.jsx(C,{value:T,children:T},T))})]}),e.jsx(f,{type:"button",onClick:()=>u(n,"crops_involved",o),size:"sm",children:e.jsx(pe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.crops_involved.map(T=>e.jsxs(_,{variant:"secondary",className:"flex items-center gap-1",children:[T,e.jsx(Re,{className:"h-3 w-3 cursor-pointer",onClick:()=>h(T,"crops_involved")})]},T))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Counties"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(Y,{value:m,onValueChange:d,children:[e.jsx(H,{className:"flex-1",children:e.jsx(W,{placeholder:"Select county"})}),e.jsx(G,{children:N.map(T=>e.jsx(C,{value:T,children:T},T))})]}),e.jsx(f,{type:"button",onClick:()=>u(m,"counties",d),size:"sm",children:e.jsx(pe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.counties.map(T=>e.jsxs(_,{variant:"secondary",className:"flex items-center gap-1",children:[T,e.jsx(Re,{className:"h-3 w-3 cursor-pointer",onClick:()=>h(T,"counties")})]},T))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Requirements"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(M,{value:p,onChange:T=>j(T.target.value),placeholder:"Add requirement...",className:"flex-1"}),e.jsx(f,{type:"button",onClick:()=>u(p,"requirements",j),size:"sm",children:e.jsx(pe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.requirements.map(T=>e.jsxs(_,{variant:"outline",className:"flex items-center gap-1",children:[T,e.jsx(Re,{className:"h-3 w-3 cursor-pointer",onClick:()=>h(T,"requirements")})]},T))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Benefits"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(M,{value:g,onChange:T=>x(T.target.value),placeholder:"Add benefit...",className:"flex-1"}),e.jsx(f,{type:"button",onClick:()=>u(g,"benefits",x),size:"sm",children:e.jsx(pe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.benefits.map(T=>e.jsxs(_,{variant:"outline",className:"flex items-center gap-1",children:[T,e.jsx(Re,{className:"h-3 w-3 cursor-pointer",onClick:()=>h(T,"benefits")})]},T))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Application Deadline"}),e.jsx(M,{type:"date",value:i.application_deadline,onChange:T=>c(A=>({...A,application_deadline:T.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date"}),e.jsx(M,{type:"date",value:i.start_date,onChange:T=>c(A=>({...A,start_date:T.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Duration (months)"}),e.jsx(M,{type:"number",value:i.duration_months||"",onChange:T=>c(A=>({...A,duration_months:parseInt(T.target.value)||void 0})),placeholder:"e.g., 12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Participants"}),e.jsx(M,{type:"number",value:i.max_participants||"",onChange:T=>c(A=>({...A,max_participants:parseInt(T.target.value)||void 0})),placeholder:"e.g., 50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Minimum Quantity (tons)"}),e.jsx(M,{type:"number",value:i.minimum_quantity||"",onChange:T=>c(A=>({...A,minimum_quantity:parseFloat(T.target.value)||void 0})),placeholder:"e.g., 10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price Range"}),e.jsx(M,{value:i.price_range,onChange:T=>c(A=>({...A,price_range:T.target.value})),placeholder:"e.g., 50-80 KES per kg"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(f,{type:"button",variant:"outline",children:"Cancel"}),e.jsx(f,{type:"submit",disabled:t,children:t?"Registering...":"Register Market Linkage"})]})]})})]})},Fc=()=>{const{toast:s}=ee(),[a,t]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState(""),[o,m]=l.useState("all"),[d,p]=l.useState(!1);l.useEffect(()=>{j()},[]);const j=async()=>{try{i(!0);const x=await Dl();t(x||[])}catch(x){console.error("Error fetching market linkages:",x),s({title:"Error",description:"Failed to load market linkages. Please try again later.",variant:"destructive"})}finally{i(!1)}},g=a.filter(x=>{var k,u;const N=c===""||x.title.toLowerCase().includes(c.toLowerCase())||x.description.toLowerCase().includes(c.toLowerCase())||((k=x.crops_involved)==null?void 0:k.some(h=>h.toLowerCase().includes(c.toLowerCase())))||((u=x.counties)==null?void 0:u.some(h=>h.toLowerCase().includes(c.toLowerCase())));return o==="vertical"?N&&(x.linkage_type==="buyer_seller"||x.linkage_type==="export_opportunity"):o==="horizontal"?N&&(x.linkage_type==="cooperative"||x.linkage_type==="contract_farming"):N});return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(es,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(ws,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Market Linkages"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Connect with vertical and horizontal market linkage opportunities"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsxs(gs,{open:d,onOpenChange:p,children:[e.jsx(yt,{asChild:!0,children:e.jsxs(f,{children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Register New Market Linkage"]})}),e.jsx(is,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx(Ec,{onSuccess:()=>{p(!1),j()}})})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Understanding Market Linkages"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(qs,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Vertical Linkages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect farmers to buyers further up the value chain such as processors, exporters, and retailers."})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(oe,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Horizontal Linkages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect farmers to other farmers or farmer groups for collective action, shared resources, and increased bargaining power."})]})]})]})]})}),e.jsx(de,{defaultValue:"all",value:o,onValueChange:x=>m(x),className:"mb-8",children:e.jsxs(ce,{children:[e.jsx(K,{value:"all",children:"All Linkages"}),e.jsx(K,{value:"vertical",children:"Vertical Linkages"}),e.jsx(K,{value:"horizontal",children:"Horizontal Linkages"})]})}),e.jsx("div",{className:"mb-8",children:e.jsx(M,{placeholder:"Search by title, crops, counties...",value:c,onChange:x=>n(x.target.value),className:"w-full md:w-2/3 lg:w-1/2"})}),r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(x=>e.jsxs(v,{className:"animate-pulse",children:[e.jsxs(b,{className:"pb-2",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-5/6 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-4/6"})]}),e.jsx(J,{children:e.jsx("div",{className:"h-5 bg-muted rounded w-1/4"})})]},x))}):g.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(ja,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No market linkages found"}),e.jsx("p",{className:"text-muted-foreground mt-2 mb-4",children:"No market linkages match your search criteria. Try different keywords or view all linkages."}),o!=="all"&&e.jsx(f,{variant:"outline",onClick:()=>m("all"),children:"View All Linkages"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map(x=>e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(w,{className:"text-xl",children:x.title}),e.jsxs(B,{children:["Contact: ",x.contact_info]})]}),e.jsx(_,{variant:x.linkage_type==="buyer_seller"||x.linkage_type==="export_opportunity"?"default":"secondary",children:x.linkage_type.replace("_"," ").toUpperCase()})]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:x.description}),x.counties&&x.counties.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Counties:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:x.counties.map(N=>e.jsx(_,{variant:"outline",children:N},N))})]}),x.crops_involved&&x.crops_involved.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Crops:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:x.crops_involved.map(N=>e.jsx(_,{variant:"outline",children:N},N))})]}),x.requirements&&x.requirements.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Requirements:"}),e.jsx("ul",{className:"text-sm text-muted-foreground list-disc list-inside",children:x.requirements.slice(0,3).map((N,k)=>e.jsx("li",{children:N},k))})]}),x.benefits&&x.benefits.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Benefits:"}),e.jsx("ul",{className:"text-sm text-muted-foreground list-disc list-inside",children:x.benefits.slice(0,3).map((N,k)=>e.jsx("li",{children:N},k))})]})]}),e.jsxs(J,{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:x.price_range&&`Price: ${x.price_range}`}),e.jsxs(f,{size:"sm",children:[e.jsx(ja,{className:"h-4 w-4 mr-2"}),"Connect"]})]})]},x.id))}),e.jsxs("div",{className:"mt-12 border-t pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Success Stories"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{className:"text-lg",children:"From Individual Farmer to Export Group"})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:'"As a small-scale avocado farmer, I struggled to access export markets due to volume requirements. After joining the Avocado Export Cooperative, I now sell my produce at premium prices and have received training on GlobalGAP certification."'}),e.jsx("div",{className:"flex mt-4",children:e.jsx(_,{variant:"outline",children:"30% higher income"})})]}),e.jsx(J,{children:e.jsx("div",{className:"text-sm",children:"- John Mwangi, Muranga County"})})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{className:"text-lg",children:"Collective Input Purchasing"})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:`"By joining the Meru Potato Farmers Association, our group of 15 small-scale farmers now purchases inputs in bulk. We've reduced our costs by 20% and gained access to certified seeds that were previously unavailable to us individually."`}),e.jsx("div",{className:"flex mt-4",children:e.jsx(_,{variant:"outline",children:"20% cost reduction"})})]}),e.jsx(J,{children:e.jsx("div",{className:"text-sm",children:"- Mary Nkatha, Meru County"})})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{className:"text-lg",children:"Supermarket Direct Supply Chain"})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:`"Through the Fresh Produce Vertical Linkage program, our cooperative now supplies vegetables directly to three major supermarket chains. We've eliminated middlemen and increased our profits while ensuring consistent market access."`}),e.jsx("div",{className:"flex mt-4",children:e.jsx(_,{variant:"outline",children:"Stable pricing"})})]}),e.jsx(J,{children:e.jsx("div",{className:"text-sm",children:"- David Ochieng, Kisumu County"})})]})]})]})]})]})},Lc=vs("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),aa=l.forwardRef(({className:s,variant:a,...t},r)=>e.jsx("div",{ref:r,role:"alert",className:q(Lc({variant:a}),s),...t}));aa.displayName="Alert";const ra=l.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:q("mb-1 font-medium leading-none tracking-tight",s),...a}));ra.displayName="AlertTitle";const ia=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:q("text-sm [&_p]:leading-relaxed",s),...a}));ia.displayName="AlertDescription";const Rc=async(s,a,t)=>{try{if(!t.length)return console.warn("No reports to analyze"),null;const r=t.join(`

`),i=await Kc(s,a,r);return i||(console.error("Failed to get sentiment analysis result"),null)}catch(r){return console.error("Error in sentiment analysis:",r),null}};async function Kc(s,a,t){try{const{data:r,error:i}=await P.functions.invoke("analyze-sentiment",{body:{commodity:s,county:a,text:t}});return i?(console.error("Error from sentiment analysis function:",i),null):r?{id:crypto.randomUUID(),commodity_name:s,county:a,sentiment_score:r.sentimentScore||0,report_count:1,tags:r.tags||[],issues:r.issues||[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()}:(console.error("No data returned from sentiment analysis"),null)}catch(r){return console.error("Failed to call sentiment analysis function:",r),null}}const qc=async()=>{try{const{data:s,error:a}=await P.from("market_sentiment").select("*").order("updated_at",{ascending:!1}).limit(50);return a?(console.error("Error fetching market sentiment:",a),[]):s||[]}catch(s){return console.error("Unexpected error fetching market sentiment:",s),[]}},zc=async(s,a,t)=>{try{return await Rc(s,a,[t])!==null}catch(r){return console.error("Error submitting market report:",r),!1}},Oc=()=>{const[s,a]=l.useState("alerts"),[t,r]=l.useState("all"),[i,c]=l.useState("all"),[n,o]=l.useState([]),[m,d]=l.useState(!0),[p,j]=l.useState({commodity:"",county:"",report:""}),[g,x]=l.useState(!1),{toast:N}=ee();l.useEffect(()=>{k()},[]);const k=async()=>{try{d(!0);const L=await qc();o(L)}catch(L){console.error("Error loading sentiment data:",L),N({title:"Error",description:"Failed to load sentiment data",variant:"destructive"})}finally{d(!1)}},u=async L=>{if(L.preventDefault(),!p.commodity||!p.county||!p.report){N({title:"Missing Information",description:"Please fill in all fields",variant:"destructive"});return}try{if(x(!0),await zc(p.commodity,p.county,p.report))N({title:"Report Submitted",description:"Your market report has been analyzed and submitted successfully"}),j({commodity:"",county:"",report:""}),k();else throw new Error("Failed to submit report")}catch(R){console.error("Error submitting report:",R),N({title:"Submission Failed",description:"Failed to submit your report. Please try again.",variant:"destructive"})}finally{x(!1)}},h=()=>n.filter(L=>(t==="all"||L.commodity_name.toLowerCase().includes(t.toLowerCase()))&&(i==="all"||L.county.toLowerCase().includes(i.toLowerCase()))),S=()=>h().filter(L=>L.sentiment_score<-.3||L.issues.some(R=>["counterfeit_products","pest_disease"].includes(R))),T=()=>e.jsxs(v,{className:"mb-6",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Submit Market Report"}),e.jsx(B,{children:"Share your market experience to help the community"})]}),e.jsx(y,{children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"commodity",children:"Commodity"}),e.jsx(M,{id:"commodity",value:p.commodity,onChange:L=>j(R=>({...R,commodity:L.target.value})),placeholder:"e.g., Maize, Tomatoes, Potatoes"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"county",children:"County"}),e.jsx(M,{id:"county",value:p.county,onChange:L=>j(R=>({...R,county:L.target.value})),placeholder:"e.g., Nakuru, Kiambu, Kisumu"})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"report",children:"Market Report"}),e.jsx(ge,{id:"report",value:p.report,onChange:L=>j(R=>({...R,report:L.target.value})),placeholder:"Describe your market experience, prices, quality issues, or any concerns...",rows:4})]}),e.jsx(f,{type:"submit",disabled:g,className:"w-full",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Analyzing & Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qt,{className:"h-4 w-4 mr-2"}),"Submit Report"]})})]})})]}),A=()=>{const L=S();return m?e.jsx("div",{className:"p-6 text-center",children:"Loading alerts..."}):L.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(ve,{className:"mx-auto h-12 w-12 opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No alerts found"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"There are no current alerts matching your criteria."})]}):e.jsx("div",{className:"space-y-4",children:L.map(R=>e.jsxs(aa,{variant:R.sentiment_score<-.5?"destructive":"default",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsxs(ra,{children:["Alert: ",R.commodity_name," in ",R.county]}),e.jsx(ia,{children:e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{children:["Sentiment Score: ",(R.sentiment_score*100).toFixed(0),"%"]}),e.jsxs("p",{children:["Reports: ",R.report_count]}),R.issues.length>0&&e.jsxs("p",{children:["Issues: ",R.issues.join(", ")]}),R.tags.length>0&&e.jsxs("p",{children:["Tags: ",R.tags.join(", ")]})]})})]},R.id))})},D=()=>{const L=h();return m?e.jsx("div",{className:"p-6 text-center",children:"Loading insights..."}):L.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(tt,{className:"mx-auto h-12 w-12 opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No insights found"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"There are no insights matching your criteria."})]}):e.jsx("div",{className:"space-y-4",children:L.map(R=>e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{children:[R.commodity_name," Market Sentiment"]}),e.jsxs(B,{children:[R.county," â€¢ Reports: ",R.report_count," â€¢ Updated: ",new Date(R.updated_at).toLocaleDateString()]})]}),e.jsxs(y,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{children:"Sentiment Score:"}),e.jsxs("span",{className:`font-bold ${R.sentiment_score>.1?"text-green-600":R.sentiment_score<-.1?"text-red-600":"text-yellow-600"}`,children:[(R.sentiment_score*100).toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${R.sentiment_score>.1?"bg-green-500":R.sentiment_score<-.1?"bg-red-500":"bg-yellow-500"}`,style:{width:`${Math.abs(R.sentiment_score)*100}%`}})})]}),R.tags.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Tags:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:R.tags.map(($,Z)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:$},Z))})]}),R.issues.length>0&&e.jsxs("div",{className:"bg-red-50 p-3 rounded-md",children:[e.jsx("h4",{className:"font-medium mb-2 text-red-800",children:"Issues Identified:"}),e.jsx("ul",{className:"list-disc list-inside text-red-700",children:R.issues.map(($,Z)=>e.jsx("li",{className:"text-sm",children:$.replace(/_/g," ")},Z))})]})]})]},R.id))})};return e.jsxs(v,{className:"w-full",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Collective Intelligence Insights"}),e.jsx(B,{children:"Real-time sentiment analysis from farmer reports and community feedback"})]}),e.jsxs(y,{children:[T(),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"crop",children:"Crop Filter"}),e.jsxs(Y,{value:t,onValueChange:r,children:[e.jsx(H,{id:"crop",children:e.jsx(W,{placeholder:"All Crops"})}),e.jsxs(G,{children:[e.jsx(C,{value:"all",children:"All Crops"}),e.jsx(C,{value:"maize",children:"Maize"}),e.jsx(C,{value:"potato",children:"Potato"}),e.jsx(C,{value:"tomato",children:"Tomato"}),e.jsx(C,{value:"wheat",children:"Wheat"}),e.jsx(C,{value:"rice",children:"Rice"})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"location",children:"Location Filter"}),e.jsxs(Y,{value:i,onValueChange:c,children:[e.jsx(H,{id:"location",children:e.jsx(W,{placeholder:"All Locations"})}),e.jsxs(G,{children:[e.jsx(C,{value:"all",children:"All Locations"}),e.jsx(C,{value:"nakuru",children:"Nakuru"}),e.jsx(C,{value:"kisumu",children:"Kisumu"}),e.jsx(C,{value:"kiambu",children:"Kiambu"}),e.jsx(C,{value:"machakos",children:"Machakos"}),e.jsx(C,{value:"uasin gishu",children:"Uasin Gishu"})]})]})]})]}),e.jsxs(de,{defaultValue:"alerts",value:s,onValueChange:a,children:[e.jsxs(ce,{className:"grid grid-cols-2 mb-6",children:[e.jsxs(K,{value:"alerts",className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Alerts"})]}),e.jsxs(K,{value:"insights",className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Insights"})]})]}),e.jsx(O,{value:"alerts",children:A()}),e.jsx(O,{value:"insights",children:D()})]})]}),e.jsxs(J,{className:"border-t pt-4 text-sm text-muted-foreground flex justify-between",children:[e.jsx("div",{children:"Based on real-time sentiment analysis of community reports"}),e.jsx(f,{variant:"ghost",size:"icon",onClick:k,children:e.jsx(Za,{className:"h-4 w-4"})})]})]})},Bc=()=>(l.useEffect(()=>{document.title="Agricultural Sentiment Analysis | AgriConnect"},[]),e.jsxs("div",{className:"container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Agricultural Sentiment Analysis"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Insights derived from farmer feedback, reports, and community discussions"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs(aa,{className:"bg-amber-50 border-amber-200",children:[e.jsx(ve,{className:"h-4 w-4 text-amber-600"}),e.jsx(ra,{className:"text-amber-800",children:"Important Alerts"}),e.jsx(ia,{className:"text-amber-700",children:"We've detected significant sentiment patterns regarding agricultural products in various counties. View details in the dashboard below."}),e.jsx("div",{className:"mt-2",children:e.jsx(f,{variant:"outline",size:"sm",className:"bg-white",children:"View Alert Details"})})]}),e.jsxs(de,{defaultValue:"insights",className:"mb-6",children:[e.jsxs(ce,{className:"mb-4",children:[e.jsxs(K,{value:"insights",className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsx("span",{children:"Sentiment Insights"})]}),e.jsxs(K,{value:"reports",className:"flex items-center gap-2",children:[e.jsx(pt,{className:"h-4 w-4"}),e.jsx("span",{children:"Submit Report"})]}),e.jsxs(K,{value:"community",className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Community Discussions"})]})]}),e.jsx(O,{value:"insights",children:e.jsx(Oc,{})}),e.jsx(O,{value:"reports",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Submit Your Experience"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Share your feedback about agricultural products, services, or policies to help other farmers make informed decisions."}),e.jsx("form",{className:"space-y-4",children:e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{children:"Submit Report"})})})]})}),e.jsx(O,{value:"community",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Community Discussions"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This feature is coming soon. Join discussions with other farmers about shared experiences."}),e.jsx(f,{variant:"outline",children:"Get Notified When Available"})]})})]})]})]})),$c=()=>{const s=[{id:"post-harvest-losses",title:"Post-Harvest Losses",description:"Up to 40% of harvested crops are lost due to inadequate storage, transportation issues, and limited processing facilities.",solutions:["Affordable storage technologies","Value addition and processing","Direct market linkages"],path:"/supply-chain-problems/post-harvest-losses",implemented:!0},{id:"logistics-issues",title:"Logistics Issues",description:"Poor infrastructure and inefficient transportation lead to delays, spoilage, and higher costs for farmers.",solutions:["Optimized transport routes","Cold chain solutions","Shared logistics services"],path:"/supply-chain-problems/logistics-issues",implemented:!0},{id:"market-access",title:"Market Access",description:"Farmers struggle to connect with buyers and often rely on exploitative middlemen.",solutions:["Direct buyer-farmer connections","Market information systems","Collective marketing groups"],path:"/supply-chain-problems/market-access",implemented:!0},{id:"price-volatility",title:"Price Volatility",description:"Unpredictable price fluctuations make planning difficult and reduce farmer incomes.",solutions:["Forward contracts","Price prediction tools","Storage solutions to sell when prices improve"],path:"/supply-chain-problems/price-volatility",implemented:!0},{id:"quality-control",title:"Quality Control",description:"Inconsistent produce quality limits access to premium markets and reduces prices.",solutions:["Quality verification systems","Training on standards","Certification support"],path:"/supply-chain-problems/quality-control",implemented:!0}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Agricultural Supply Chain Challenges"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Addressing key challenges in Kenya's agricultural supply chains with practical, technology-driven solutions"}),e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsxs(_,{variant:"default",className:"flex items-center gap-1",children:[e.jsx(le,{className:"h-3 w-3"}),"All Solutions Implemented"]}),e.jsx(_,{variant:"outline",children:"5 Key Challenges Addressed"})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16",children:s.map(a=>e.jsxs(v,{className:"flex flex-col relative",children:[a.implemented&&e.jsxs(_,{variant:"default",className:"absolute top-4 right-4 flex items-center gap-1",children:[e.jsx(le,{className:"h-3 w-3"}),"Live"]}),e.jsxs(b,{className:"pb-2",children:[e.jsx(w,{children:a.title}),e.jsx(B,{children:a.description})]}),e.jsxs(y,{className:"flex-grow",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Our Solutions"}),e.jsx("ul",{className:"list-disc pl-5 space-y-1 mb-4",children:a.solutions.map((t,r)=>e.jsx("li",{className:"text-sm",children:t},r))})]}),e.jsx(J,{children:e.jsx(f,{asChild:!0,className:"w-full md:w-auto",children:e.jsxs(V,{to:a.path,children:["Learn More & Access Tools",e.jsx(ut,{className:"ml-2 h-4 w-4"})]})})})]},a.id))}),e.jsxs("div",{className:"mt-16 bg-muted/30 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"How AgriTender Connect Addresses Supply Chain Challenges"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{className:"text-lg",children:"Technology Integration"})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm mb-4",children:"Our platform uses technology to connect all actors in the supply chain, creating transparency and improving coordination between farmers, transporters, and buyers."}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:"â€¢ Real-time tracking and monitoring"}),e.jsx("li",{children:"â€¢ Automated matching algorithms"}),e.jsx("li",{children:"â€¢ Mobile-first design for accessibility"}),e.jsx("li",{children:"â€¢ Integration with payment systems"})]})]})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{className:"text-lg",children:"Data-Driven Decisions"})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm mb-4",children:"Real-time market data and production forecasts help farmers and buyers make informed decisions about what to grow, when to sell, and where to sell."}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:"â€¢ AI-powered price predictions"}),e.jsx("li",{children:"â€¢ Weather-based recommendations"}),e.jsx("li",{children:"â€¢ Market demand forecasting"}),e.jsx("li",{children:"â€¢ Risk assessment tools"})]})]})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{className:"text-lg",children:"Alternative Trading"})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm mb-4",children:"Our barter exchange system and community trading networks create alternative pathways for farmers to exchange goods and access markets without cash."}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:"â€¢ Crop-to-crop exchanges"}),e.jsx("li",{children:"â€¢ Service-for-produce trades"}),e.jsx("li",{children:"â€¢ Community cooperatives"}),e.jsx("li",{children:"â€¢ Digital payment alternatives"})]})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-6",children:[e.jsx("h3",{className:"font-medium text-green-900 mb-2",children:"Platform Risk Disclaimer"}),e.jsx("p",{className:"text-sm text-green-800",children:"AgriTender Connect provides technology solutions to facilitate agricultural connections and transactions. We do not manage farming operations, guarantee crop outcomes, or assume responsibility for agricultural risks. Users make independent decisions regarding their farming and business activities."})]}),e.jsx("div",{className:"text-center",children:e.jsx(f,{size:"lg",asChild:!0,children:e.jsx(V,{to:"/commodity-trading",children:"Start Trading Now"})})})]})]})]})},Uc=Qi,Wr=l.createContext({}),Fe=({...s})=>e.jsx(Wr.Provider,{value:{name:s.name},children:e.jsx(Ji,{...s})}),bt=()=>{const s=l.useContext(Wr),a=l.useContext(Qr),{getFieldState:t,formState:r}=Wi(),i=t(s.name,r);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:c}=a;return{id:c,name:s.name,formItemId:`${c}-form-item`,formDescriptionId:`${c}-form-item-description`,formMessageId:`${c}-form-item-message`,...i}},Qr=l.createContext({}),Pe=l.forwardRef(({className:s,...a},t)=>{const r=l.useId();return e.jsx(Qr.Provider,{value:{id:r},children:e.jsx("div",{ref:t,className:q("space-y-2",s),...a})})});Pe.displayName="FormItem";const Te=l.forwardRef(({className:s,...a},t)=>{const{error:r,formItemId:i}=bt();return e.jsx(I,{ref:t,className:q(r&&"text-destructive",s),htmlFor:i,...a})});Te.displayName="FormLabel";const Ie=l.forwardRef(({...s},a)=>{const{error:t,formItemId:r,formDescriptionId:i,formMessageId:c}=bt();return e.jsx(Da,{ref:a,id:r,"aria-describedby":t?`${i} ${c}`:`${i}`,"aria-invalid":!!t,...s})});Ie.displayName="FormControl";const Zs=l.forwardRef(({className:s,...a},t)=>{const{formDescriptionId:r}=bt();return e.jsx("p",{ref:t,id:r,className:q("text-sm text-muted-foreground",s),...a})});Zs.displayName="FormDescription";const Le=l.forwardRef(({className:s,children:a,...t},r)=>{const{error:i,formMessageId:c}=bt(),n=i?String(i==null?void 0:i.message):a;return n?e.jsx("p",{ref:r,id:c,className:q("text-sm font-medium text-destructive",s),...t,children:n}):null});Le.displayName="FormMessage";const xe=l.forwardRef(({className:s,...a},t)=>e.jsx(gr,{ref:t,className:q("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:e.jsx(Zi,{className:q("flex items-center justify-center text-current"),children:e.jsx(Se,{className:"h-4 w-4"})})}));xe.displayName=gr.displayName;const Vc=te.object({companyName:te.string().min(2,{message:"Company name must be at least 2 characters."}),serviceType:te.enum(["transport","storage","both"],{required_error:"Please select a service type."}),counties:te.string().min(2,{message:"Please enter at least one county."}),contactEmail:te.string().email({message:"Please enter a valid email address."}),contactPhone:te.string().min(10,{message:"Please enter a valid phone number."}),capacity:te.string().min(2,{message:"Please specify your capacity."}),rates:te.string().min(2,{message:"Please specify your rates."}),hasRefrigeration:te.boolean().default(!1),description:te.string().optional(),termsAccepted:te.boolean().refine(s=>s===!0,{message:"You must accept the terms and conditions."})}),Hc=()=>{const{toast:s}=ee(),[a,t]=l.useState(!1),r=Xi({resolver:en(Vc),defaultValues:{companyName:"",counties:"",contactEmail:"",contactPhone:"",capacity:"",rates:"",hasRefrigeration:!1,description:"",termsAccepted:!1}}),i=async c=>{t(!0);try{console.log("Submitting logistics provider data:",c),await new Promise(n=>setTimeout(n,1500)),s({title:"Registration Successful",description:"Your logistics service has been registered. You'll receive a confirmation email shortly."}),r.reset()}catch(n){console.error("Error submitting logistics provider:",n),s({title:"Registration Failed",description:"There was an error registering your service. Please try again.",variant:"destructive"})}finally{t(!1)}};return e.jsxs(v,{className:"w-full max-w-4xl mx-auto",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Register as a Logistics Provider"}),e.jsx(B,{children:"Connect with farmers and markets by registering your transportation or storage services"})]}),e.jsx(y,{children:e.jsx(Uc,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(i),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Fe,{control:r.control,name:"companyName",render:({field:c})=>e.jsxs(Pe,{children:[e.jsx(Te,{children:"Company Name"}),e.jsx(Ie,{children:e.jsx(M,{placeholder:"Your company name",...c})}),e.jsx(Le,{})]})}),e.jsx(Fe,{control:r.control,name:"serviceType",render:({field:c})=>e.jsxs(Pe,{children:[e.jsx(Te,{children:"Service Type"}),e.jsxs(Y,{onValueChange:c.onChange,defaultValue:c.value,children:[e.jsx(Ie,{children:e.jsx(H,{children:e.jsx(W,{placeholder:"Select a service type"})})}),e.jsxs(G,{children:[e.jsx(C,{value:"transport",children:"Transportation"}),e.jsx(C,{value:"storage",children:"Storage"}),e.jsx(C,{value:"both",children:"Both Transport & Storage"})]})]}),e.jsx(Le,{})]})}),e.jsx(Fe,{control:r.control,name:"counties",render:({field:c})=>e.jsxs(Pe,{children:[e.jsx(Te,{children:"Counties Served"}),e.jsx(Ie,{children:e.jsx(M,{placeholder:"E.g. Nairobi, Nakuru, Kiambu",...c})}),e.jsx(Zs,{children:"Enter county names separated by commas"}),e.jsx(Le,{})]})}),e.jsx(Fe,{control:r.control,name:"contactEmail",render:({field:c})=>e.jsxs(Pe,{children:[e.jsx(Te,{children:"Email Address"}),e.jsx(Ie,{children:e.jsx(M,{type:"email",placeholder:"your.email@example.com",...c})}),e.jsx(Le,{})]})}),e.jsx(Fe,{control:r.control,name:"contactPhone",render:({field:c})=>e.jsxs(Pe,{children:[e.jsx(Te,{children:"Phone Number"}),e.jsx(Ie,{children:e.jsx(M,{placeholder:"+254700000000",...c})}),e.jsx(Le,{})]})}),e.jsx(Fe,{control:r.control,name:"capacity",render:({field:c})=>e.jsxs(Pe,{children:[e.jsx(Te,{children:"Capacity"}),e.jsx(Ie,{children:e.jsx(M,{placeholder:"E.g. Up to 10 tons or 5,000 sq. ft",...c})}),e.jsx(Le,{})]})}),e.jsx(Fe,{control:r.control,name:"rates",render:({field:c})=>e.jsxs(Pe,{children:[e.jsx(Te,{children:"Rates"}),e.jsx(Ie,{children:e.jsx(M,{placeholder:"E.g. KES 5,000 per ton or KES 50 per sq. ft",...c})}),e.jsx(Le,{})]})}),e.jsx(Fe,{control:r.control,name:"hasRefrigeration",render:({field:c})=>e.jsxs(Pe,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(Ie,{children:e.jsx(xe,{checked:c.value,onCheckedChange:c.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(Te,{children:"Refrigeration Available"}),e.jsx(Zs,{children:"Check if you provide refrigerated transport or cold storage"})]})]})})]}),e.jsx(Fe,{control:r.control,name:"description",render:({field:c})=>e.jsxs(Pe,{children:[e.jsx(Te,{children:"Additional Details"}),e.jsx(Ie,{children:e.jsx(ge,{placeholder:"Please provide any additional information about your services",className:"min-h-[100px]",...c})}),e.jsx(Le,{})]})}),e.jsx(Fe,{control:r.control,name:"termsAccepted",render:({field:c})=>e.jsxs(Pe,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(Ie,{children:e.jsx(xe,{checked:c.value,onCheckedChange:c.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(Te,{children:"I accept the terms and conditions"}),e.jsx(Zs,{children:"By registering, you agree to our terms of service and privacy policy"})]}),e.jsx(Le,{})]})}),e.jsx(f,{type:"submit",className:"w-full",disabled:a,children:a?"Registering...":"Register as Logistics Provider"})]})})}),e.jsx(J,{className:"flex justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Already registered? ",e.jsx(f,{variant:"link",className:"p-0 h-auto",children:"Sign in"})]})})]})},Gc=()=>{const s=[{title:"Poor Road Infrastructure",description:"Many agricultural regions have poor quality roads that become impassable during rainy seasons.",impact:"Delays in transportation, increased costs, and reduced access to markets.",solution:"Advocacy for infrastructure improvement, route optimization, and using appropriate vehicles for terrain."},{title:"Lack of Cold Chain",description:"80% of rural areas lack proper cold storage facilities, resulting in significant post-harvest losses.",impact:"Reduced shelf life, lower quality products, and increased food waste.",solution:"Investment in solar-powered cold storage, refrigerated transport, and preservation techniques."},{title:"High Transportation Costs",description:"Transportation costs can account for up to 40% of the total value of agricultural products.",impact:"Reduced farmer profits, higher consumer prices, and limited market participation.",solution:"Consolidation of shipments, cooperative transport models, and efficient route planning."},{title:"Limited Logistics Services",description:"Rural areas have few professional logistics service providers with appropriate equipment.",impact:"Farmers rely on informal transporters, reducing reliability and increasing risks.",solution:"Development of rural logistics networks, transport cooperatives, and digital logistics platforms."}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map((a,t)=>e.jsxs(v,{className:"border-l-4 border-l-primary",children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:a.title})}),e.jsxs(y,{className:"space-y-2",children:[e.jsx("p",{children:a.description}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Impact:"})," ",a.impact]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Potential Solution:"})," ",a.solution]})]})]},t))}),e.jsxs("div",{className:"mt-10 p-4 border rounded-lg bg-muted/30",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Impact on Supply Chain Efficiency"}),e.jsx("p",{className:"mb-4",children:"Logistics challenges significantly reduce the efficiency of agricultural supply chains in Kenya:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Up to 40% of fresh produce is lost due to logistical inefficiencies"}),e.jsx("li",{children:"Rural farmers spend 4-6 hours on average to reach the nearest collection center"}),e.jsx("li",{children:"Transportation costs account for 30-40% of the final product price"}),e.jsx("li",{children:"Only 23% of smallholder farmers have access to reliable transportation services"})]})]})]})},Yc=({isLoading:s})=>{const a=()=>[{issue:"Poor Road Infrastructure",frequency:65,impact:"High"},{issue:"Lack of Cold Storage",frequency:45,impact:"High"},{issue:"High Transport Costs",frequency:72,impact:"High"},{issue:"Delayed Collections",frequency:38,impact:"Medium"},{issue:"Fragmented Supply Chain",frequency:55,impact:"Medium"},{issue:"Limited Market Access",frequency:60,impact:"High"}],t=()=>[{name:"Trucks",value:45,color:"#0088FE"},{name:"Motorcycles",value:25,color:"#00C49F"},{name:"Hand Carts",value:15,color:"#FFBB28"},{name:"Animal Transport",value:10,color:"#FF8042"},{name:"Public Transport",value:5,color:"#8884d8"}];return s?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsx(_,{variant:"outline",className:"mb-6 bg-blue-50",children:"Based on analysis of Kilimo statistics and agricultural surveys"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Logistics Challenges Frequency"}),e.jsx(be,{width:"100%",height:300,children:e.jsxs(Ns,{data:a(),margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(ze,{strokeDasharray:"3 3"}),e.jsx(Oe,{dataKey:"issue"}),e.jsx(Be,{}),e.jsx(we,{}),e.jsx(rs,{}),e.jsx(Me,{dataKey:"frequency",fill:"#8884d8",name:"Reported Frequency (%)"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Transport Modes Used in Agriculture"}),e.jsx(be,{width:"100%",height:300,children:e.jsxs(gt,{children:[e.jsx(jt,{data:t(),cx:"50%",cy:"50%",labelLine:!1,label:({name:r,percent:i})=>`${r}: ${(i*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:t().map((r,i)=>e.jsx(Bs,{fill:r.color},`cell-${i}`))}),e.jsx(we,{})]})})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Key Findings"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-3",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Infrastructure Gap:"})," 65% of agricultural areas report inadequate road infrastructure"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Cold Chain Deficiency:"})," Only 22% of fresh produce benefits from proper cold chain"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Transport Modes:"})," Traditional and informal methods still dominate agricultural logistics"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Cost Burden:"})," Small-scale farmers spend 3x more on transportation as a percentage of revenue"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Regional Disparity:"})," Western and coastal regions face more severe logistics challenges"]})]})]})]}),e.jsxs("div",{className:"mt-10 p-4 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Methodology"}),e.jsx("p",{children:"This analysis combines data from Kilimo Statistics API, transportation surveys, and farmer interviews to identify key logistics challenges. The frequency represents the percentage of farmers reporting each issue as a significant barrier to market access."})]})]})},Wc=()=>{const s=Ne(),[a,t]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState("issues");return l.useEffect(()=>{(async()=>{i(!0);try{const m=await $s();t(m)}catch(m){console.error("Error fetching Kilimo data:",m)}finally{i(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Logistics Issues"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Understanding and addressing transportation and delivery challenges in agricultural supply chains"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-6",children:[e.jsxs(f,{onClick:()=>s("/logistics-solutions-map"),className:"flex gap-2 items-center",variant:"outline",children:[e.jsx(se,{className:"h-4 w-4"}),"View Logistics Solutions Map"]}),e.jsx(f,{onClick:()=>n("register"),variant:"default",children:"Register as Provider"})]})]}),e.jsxs(de,{value:c,onValueChange:n,className:"w-full",children:[e.jsxs(ce,{className:"w-full grid grid-cols-1 sm:grid-cols-3 gap-2 mb-8",children:[e.jsxs(K,{value:"issues",className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx("span",{children:"Logistics Challenges"})]}),e.jsxs(K,{value:"data",className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Data Analysis"})]}),e.jsxs(K,{value:"register",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{children:"Register as Provider"})]})]}),e.jsx(O,{value:"issues",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Common Logistics Challenges"}),e.jsx(B,{children:"Key transportation and delivery issues faced by agricultural businesses in Kenya"})]}),e.jsx(y,{children:e.jsx(Gc,{})}),e.jsxs(J,{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(f,{onClick:()=>s("/logistics-solutions-map"),className:"flex gap-2 items-center w-full sm:w-auto",variant:"outline",children:[e.jsx(se,{className:"h-4 w-4"}),"Find Logistics Providers Near You"]}),e.jsx(f,{onClick:()=>n("register"),className:"ml-auto w-full sm:w-auto",children:"Be Part of the Solution - Register"})]})]})}),e.jsx(O,{value:"data",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Logistics Data Analysis"}),e.jsx(B,{children:"Data-driven insights on agricultural logistics challenges based on national statistics"})]}),e.jsx(y,{children:e.jsx(Yc,{isLoading:r})}),e.jsx(J,{children:e.jsx(f,{onClick:()=>s("/logistics-solutions-map"),className:"ml-auto",children:"Find Solutions on Map"})})]})}),e.jsx(O,{value:"register",children:e.jsx(Hc,{})})]})]})]})},Qc=()=>{const[s,a]=l.useState([]),[t,r]=l.useState(!0),[i,c]=l.useState("challenges"),n=Ne();l.useEffect(()=>{(async()=>{r(!0);try{const x=await $s();a(x)}catch(x){console.error("Error fetching Kilimo data:",x)}finally{r(!1)}})()},[]);const o=()=>s.filter(x=>x.category==="County").map(x=>({county:x.name,marketAccess:Math.floor(Math.random()*100),distanceToMarket:Math.floor(Math.random()*30)+5,priceInformation:Math.floor(Math.random()*100)})).sort((x,N)=>N.marketAccess-x.marketAccess).slice(0,8),m=()=>[{name:"Limited Price Information",value:78,color:"#0088FE"},{name:"Poor Transport Infrastructure",value:65,color:"#00C49F"},{name:"Market Power Imbalances",value:62,color:"#FFBB28"},{name:"Limited Storage Facilities",value:58,color:"#FF8042"},{name:"Lack of Quality Standards",value:45,color:"#8884d8"}],d=()=>[{month:"Jan",maize:50,beans:120,potatoes:45},{month:"Feb",maize:48,beans:125,potatoes:43},{month:"Mar",maize:45,beans:130,potatoes:40},{month:"Apr",maize:47,beans:128,potatoes:42},{month:"May",maize:52,beans:125,potatoes:46},{month:"Jun",maize:55,beans:120,potatoes:48},{month:"Jul",maize:58,beans:118,potatoes:50},{month:"Aug",maize:60,beans:115,potatoes:52},{month:"Sep",maize:57,beans:120,potatoes:49},{month:"Oct",maize:54,beans:122,potatoes:47},{month:"Nov",maize:52,beans:125,potatoes:45},{month:"Dec",maize:51,beans:127,potatoes:44}],p=[{title:"Information Asymmetry",description:"Farmers lack access to accurate, timely market information including prices, demand, and quality requirements.",impact:"Reduced bargaining power, suboptimal market timing, and inability to respond to market demands.",solution:"Mobile-based market information systems, farmer cooperatives for information sharing, and market intelligence platforms."},{title:"Middlemen Dependence",description:"Long supply chains with multiple intermediaries that capture value without adding proportional services.",impact:"Reduced farmer profits, increased consumer prices, and market distortions.",solution:"Direct marketing channels, farmer aggregation centers, and digital marketplace platforms connecting farmers to buyers."},{title:"Quality & Standards",description:"Lack of standardized quality metrics and certification systems for agricultural products.",impact:"Limited access to premium markets, rejected produce, and lack of price differentiation for quality.",solution:"Training on quality standards, affordable certification systems, and quality-based pricing mechanisms."},{title:"Limited Market Options",description:"Overreliance on local markets and few alternative market channels for smallholder farmers.",impact:"Price exploitation, limited growth opportunities, and vulnerability to local market saturation.",solution:"Market diversification strategies, contract farming arrangements, and regional market integration."}],j=[{title:"Digital Marketplace Platforms",description:"Online platforms connecting farmers directly to buyers, eliminating intermediaries.",example:"Twiga Foods, M-Farm, Digital Green",impact:"Increased farmer income by 15-30% through direct market linkages."},{title:"SMS Price Information Services",description:"Mobile services providing real-time price information across different markets.",example:"MFarm, Esoko, NAFIS",impact:"Improved farmer bargaining power and optimal market timing decisions."},{title:"Aggregation Centers",description:"Community collection points that aggregate produce from smallholders to achieve marketable volumes.",example:"Farm to Market Alliance, One Acre Fund",impact:"Access to larger buyers and reduced per-unit logistics costs."},{title:"Contract Farming Models",description:"Pre-arranged supply agreements between farmers and buyers with agreed prices and volumes.",example:"East African Breweries, Kenya Nut Company",impact:"Stable income for farmers and secure supply for processors."}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Market Access Challenges"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Addressing barriers that prevent farmers from reaching profitable markets"})]}),e.jsxs(de,{value:i,onValueChange:c,className:"w-full",children:[e.jsxs(ce,{className:"w-full grid grid-cols-1 sm:grid-cols-3 gap-2 mb-8",children:[e.jsxs(K,{value:"challenges",className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Key Challenges"})]}),e.jsxs(K,{value:"data",className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"Market Data"})]}),e.jsxs(K,{value:"solutions",className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:"Innovations"})]})]}),e.jsx(O,{value:"challenges",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Market Access Issues"}),e.jsx(B,{children:"Common barriers to market entry for small-scale farmers"})]}),e.jsxs(y,{children:[e.jsx(_,{variant:"outline",className:"mb-6 bg-blue-50",children:"Based on analysis of Kilimo statistics and agricultural surveys"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map((g,x)=>e.jsxs(v,{className:"border-l-4 border-l-primary",children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:g.title})}),e.jsxs(y,{className:"space-y-2",children:[e.jsx("p",{children:g.description}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Impact:"})," ",g.impact]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Potential Solution:"})," ",g.solution]})]})]},x))}),e.jsxs("div",{className:"mt-10 p-4 border rounded-lg bg-muted/30",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Impact on Farmer Livelihoods"}),e.jsx("p",{className:"mb-4",children:"Market access challenges significantly impact smallholder farmers in Kenya:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Smallholders receive only 25-40% of the final market price of their produce"}),e.jsx("li",{children:"Almost 60% of farmers rely exclusively on local markets with limited price competitiveness"}),e.jsx("li",{children:"Only 31% of smallholder farmers have access to formal market channels"}),e.jsx("li",{children:"Price information asymmetry costs farmers an estimated 10-20% of potential income"})]})]})]}),e.jsx(J,{children:e.jsx(f,{onClick:()=>c("solutions"),className:"ml-auto",children:"Explore Market Access Solutions"})})]})}),e.jsx(O,{value:"data",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Market Data Analysis"}),e.jsx(B,{children:"Data-driven insights on agricultural market access based on national statistics"})]}),e.jsx(y,{children:t?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Market Access by County"}),e.jsx(be,{width:"100%",height:400,children:e.jsxs(Ns,{data:o(),margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(ze,{strokeDasharray:"3 3"}),e.jsx(Oe,{dataKey:"county"}),e.jsx(Be,{}),e.jsx(we,{}),e.jsx(rs,{}),e.jsx(Me,{dataKey:"marketAccess",name:"Market Access Score",fill:"#8884d8"}),e.jsx(Me,{dataKey:"distanceToMarket",name:"Avg. Distance to Market (km)",fill:"#82ca9d"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Key Market Access Barriers"}),e.jsx(be,{width:"100%",height:300,children:e.jsxs(gt,{children:[e.jsx(jt,{data:m(),cx:"50%",cy:"50%",labelLine:!1,label:({name:g,percent:x})=>`${g}: ${(x*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:m().map((g,x)=>e.jsx(Bs,{fill:g.color},`cell-${x}`))}),e.jsx(we,{})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Price Trends (KES/kg)"}),e.jsx(be,{width:"100%",height:300,children:e.jsxs(ft,{data:d(),margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(ze,{strokeDasharray:"3 3"}),e.jsx(Oe,{dataKey:"month"}),e.jsx(Be,{}),e.jsx(we,{}),e.jsx(rs,{}),e.jsx(Ue,{type:"monotone",dataKey:"maize",stroke:"#8884d8",activeDot:{r:8}}),e.jsx(Ue,{type:"monotone",dataKey:"beans",stroke:"#82ca9d"}),e.jsx(Ue,{type:"monotone",dataKey:"potatoes",stroke:"#ffc658"})]})})]})]}),e.jsxs("div",{className:"mt-10 p-4 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Data Insights"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-3",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Regional Disparities:"})," Market access varies significantly by region, with central counties having better access than remote ones"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Price Information:"})," Limited access to price information is the most significant barrier, affecting 78% of farmers"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Seasonal Variation:"})," Price volatility is highest during transitional months (April-May and October-November)"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Infrastructure Impact:"})," Counties with better road infrastructure show 30% higher market access scores"]})]})]})]})}),e.jsx(J,{children:e.jsxs(f,{onClick:()=>n("/commodity-trading/price-trends"),variant:"outline",className:"ml-auto",children:["View Detailed Price Trends ",e.jsx(Ut,{className:"ml-2 h-4 w-4"})]})})]})}),e.jsx(O,{value:"solutions",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Market Access Innovations"}),e.jsx(B,{children:"Innovative solutions that are addressing market access challenges in Kenya"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:j.map((g,x)=>e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:g.title})}),e.jsxs(y,{className:"space-y-2",children:[e.jsx("p",{children:g.description}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Examples:"})," ",g.example]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Impact:"})," ",g.impact]})]})]},x))}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"text-xl font-medium mb-6",children:"Digital Solutions Transforming Market Access"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"mr-4 bg-primary/10 p-3 rounded-full",children:e.jsx(me,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-2",children:"Mobile Market Information Systems"}),e.jsx("p",{className:"mb-2",children:"SMS and mobile app services that provide real-time market prices, helping farmers make informed decisions about when and where to sell their produce."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Example: M-Farm's SMS price service reaches over 100,000 farmers in Kenya, improving incomes by up to 20%"})]})]})}),e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"mr-4 bg-primary/10 p-3 rounded-full",children:e.jsx(oe,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-2",children:"Farmer Producer Organizations"}),e.jsx("p",{className:"mb-2",children:"Formal farmer groups that aggregate produce, improving bargaining power and enabling access to larger markets that individual smallholders couldn't reach alone."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Example: Meru Greens Horticulture aggregates produce from 4,000 smallholders to supply supermarkets and exporters"})]})]})}),e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"mr-4 bg-primary/10 p-3 rounded-full",children:e.jsx(se,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-2",children:"E-Commerce Agricultural Marketplaces"}),e.jsx("p",{className:"mb-2",children:"Digital platforms connecting farmers directly to buyers, including restaurants, retailers, and consumers, reducing the number of intermediaries in the supply chain."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Example: Twiga Foods connects 17,000 farmers to 8,000 vendors, increasing farmer incomes by 20-40%"})]})]})})]})]}),e.jsx(ue,{className:"my-10"}),e.jsxs("div",{className:"p-6 border rounded-lg bg-muted/30",children:[e.jsx("h3",{className:"text-xl font-medium mb-4",children:"Join Our Market Access Programs"}),e.jsx("p",{className:"mb-4",children:"AgriTender Connect offers several programs to help farmers overcome market access challenges:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-base",children:"Digital Marketplace"})}),e.jsx(y,{children:e.jsx("p",{className:"text-sm",children:"List your produce on our digital marketplace to connect directly with buyers"})}),e.jsx(J,{children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/commodity-trading/marketplace"),children:"Access Marketplace"})})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-base",children:"Barter Exchange"})}),e.jsx(y,{children:e.jsx("p",{className:"text-sm",children:"Exchange your produce with other farmers or for services you need"})}),e.jsx(J,{children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/commodity-trading/barter"),children:"Join Barter Network"})})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-base",children:"Market Intelligence"})}),e.jsx(y,{children:e.jsx("p",{className:"text-sm",children:"Access real-time price trends and market demand forecasts"})}),e.jsx(J,{children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/commodity-trading/price-trends"),children:"View Market Data"})})]})]}),e.jsxs(f,{className:"w-full",onClick:()=>n("/commodity-trading"),children:["Explore All Market Access Services ",e.jsx(qe,{className:"ml-2 h-4 w-4"})]})]})]})]})})]})]})]})},Jc=()=>e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Post-Harvest Losses"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl",children:"In Kenya, post-harvest losses account for up to 30-40% of harvested crops due to inadequate storage, transportation issues, and limited processing facilities. Our platform provides solutions to reduce these losses."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10",children:[e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Storage Solutions"}),e.jsx(B,{children:"Improved storage techniques and facilities"})]}),e.jsxs(y,{children:[e.jsx("p",{className:"mb-4",children:"Access affordable storage solutions like hermetic bags, metal silos, and community cold storage facilities that can extend the shelf life of your produce."}),e.jsx(f,{asChild:!0,children:e.jsx(V,{to:"/supply-chain-api",children:"Find Storage Providers"})})]})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Preservation Methods"}),e.jsx(B,{children:"Value addition through processing"})]}),e.jsxs(y,{children:[e.jsx("p",{className:"mb-4",children:"Learn about low-cost preservation methods such as solar drying, fermenting, and canning that can transform perishable produce into items with longer shelf life."}),e.jsx(f,{asChild:!0,children:e.jsx(V,{to:"/supply-chain-problems/quality-control",children:"Explore Preservation Techniques"})})]})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Market Linkages"}),e.jsx(B,{children:"Faster routes to market"})]}),e.jsxs(y,{children:[e.jsx("p",{className:"mb-4",children:"Connect directly with buyers to reduce the time between harvest and sale, minimizing the risk of spoilage during extended storage periods."}),e.jsx(f,{asChild:!0,children:e.jsx(V,{to:"/commodity-trading",children:"Connect with Buyers"})})]})]})]}),e.jsxs("div",{className:"bg-muted/30 p-6 rounded-lg mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Post-Harvest Loss Statistics in Kenya"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-background p-6 rounded-lg text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"30-40%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Overall post-harvest losses"})]}),e.jsxs("div",{className:"bg-background p-6 rounded-lg text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"50%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Fruits & vegetables losses"})]}),e.jsxs("div",{className:"bg-background p-6 rounded-lg text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"$500M"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Annual economic impact"})]})]})]}),e.jsxs(v,{className:"mb-10",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Quality Control & Contract Farming"}),e.jsx(B,{children:"Improving quality and reliability through partnerships"})]}),e.jsxs(y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Organic Certification"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Organic certification through KEBS or international bodies helps farmers access premium markets and improve product value while reducing chemical inputs."}),e.jsx(f,{variant:"outline",asChild:!0,className:"w-full",children:e.jsx(V,{to:"/supply-chain-problems/quality-control",children:"Learn About Certification"})})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Contract Farming"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Partner with buyers from planting to harvest, receiving quality inputs, technical support, and guaranteed markets while meeting specific standards."}),e.jsx(f,{variant:"outline",asChild:!0,className:"w-full",children:e.jsx(V,{to:"/supply-chain-problems/market-access",children:"Find Contract Partners"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h3",{className:"font-medium mb-1",children:"Meru Potato Farmers Cooperative"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Reduced losses from 35% to 8% through community cold storage"}),e.jsx(f,{variant:"link",className:"px-0",asChild:!0,children:e.jsx(V,{to:"/supply-chain-api",children:"Read More"})})]}),e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h3",{className:"font-medium mb-1",children:"Kitui Mango Processors"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Transformed excess mangoes into dried products and juices"}),e.jsx(f,{variant:"link",className:"px-0",asChild:!0,children:e.jsx(V,{to:"/supply-chain-problems/quality-control",children:"Read More"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-1",children:"Nakuru Grain Farmers"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Adopted hermetic bags to prevent pest damage during storage"}),e.jsx(f,{variant:"link",className:"px-0",asChild:!0,children:e.jsx(V,{to:"/supply-chain-api",children:"Read More"})})]})]})]})]})]}),e.jsx("footer",{className:"bg-muted/30 py-8 px-6 text-center text-sm text-muted-foreground",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("p",{children:["Â© ",new Date().getFullYear()," Soko-Connect. All rights reserved."]})})})]}),Zc=()=>{const[s,a]=l.useState([]),[t,r]=l.useState(!0),[i,c]=l.useState("overview"),n=Ne();l.useEffect(()=>{(async()=>{r(!0);try{const g=await $s();a(g)}catch(g){console.error("Error fetching Kilimo data:",g)}finally{r(!1)}})()},[]);const o=()=>[{month:"Jan",maize:45,volatility:12,beans:120,potatoes:35},{month:"Feb",maize:52,volatility:18,beans:135,potatoes:42},{month:"Mar",maize:38,volatility:25,beans:110,potatoes:28},{month:"Apr",maize:65,volatility:35,beans:150,potatoes:55},{month:"May",maize:48,volatility:15,beans:125,potatoes:38},{month:"Jun",maize:55,volatility:20,beans:140,potatoes:45}],m=()=>[{name:"Weather Variations",impact:40,color:"#0088FE"},{name:"Market Speculation",impact:25,color:"#00C49F"},{name:"Supply Chain Disruptions",impact:20,color:"#FFBB28"},{name:"Seasonal Demand",impact:15,color:"#FF8042"}],d=[{title:"Unpredictable Income",description:"Farmers cannot predict their income from season to season due to price fluctuations.",impact:"Difficulty in planning investments, inability to secure loans, and reduced quality of life.",solution:"Forward contracts, price stabilization mechanisms, and diversified income sources."},{title:"Market Timing Challenges",description:"Farmers struggle to time their sales optimally due to rapid price changes.",impact:"Selling at suboptimal prices, increased storage costs, and post-harvest losses.",solution:"Real-time market information, storage solutions, and market intelligence systems."},{title:"Investment Planning",description:"High price volatility makes it difficult to plan for farm investments and expansion.",impact:"Delayed modernization, reduced productivity, and missed growth opportunities.",solution:"Risk management tools, crop insurance, and government support programs."},{title:"Credit Access",description:"Volatile income streams make farmers appear risky to financial institutions.",impact:"Limited access to credit, high interest rates, and reliance on informal lending.",solution:"Income smoothing mechanisms, collateral alternatives, and financial literacy programs."}],p=[{title:"Contract Farming",description:"Pre-agreed prices and volumes with buyers to reduce price risk.",benefits:["Guaranteed income","Reduced market risk","Access to inputs and technical support"],implementation:"Partner with processors, exporters, or large retailers for direct contracts."},{title:"Cooperative Marketing",description:"Farmers pool resources to achieve better market power and price negotiation.",benefits:["Collective bargaining power","Shared storage costs","Market information sharing"],implementation:"Form or join existing farmer cooperatives for collective selling."},{title:"Value Addition",description:"Processing raw products to create value-added products with stable demand.",benefits:["Higher profit margins","Reduced perishability","Market differentiation"],implementation:"Invest in simple processing equipment or partner with processors."},{title:"Diversification",description:"Growing multiple crops or combining farming with other income sources.",benefits:["Risk spreading","Stable income streams","Reduced dependency on single commodity"],implementation:"Plan crop rotation and explore complementary income activities."}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Price Volatility"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Understanding and managing agricultural price fluctuations that impact farmer incomes and market stability"})]}),e.jsxs(de,{value:i,onValueChange:c,className:"w-full",children:[e.jsxs(ce,{className:"w-full grid grid-cols-1 sm:grid-cols-3 gap-2 mb-8",children:[e.jsxs(K,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"Price Trends"})]}),e.jsxs(K,{value:"challenges",className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx("span",{children:"Impact Analysis"})]}),e.jsxs(K,{value:"solutions",className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:"Risk Management"})]})]}),e.jsx(O,{value:"overview",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Price Volatility Analysis"}),e.jsx(B,{children:"Historical price trends and volatility patterns for major agricultural commodities in Kenya"})]}),e.jsxs(y,{children:[e.jsx(_,{variant:"outline",className:"mb-6 bg-blue-50",children:"Based on Kilimo statistics and market data analysis"}),t?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Price Trends and Volatility (KES/kg)"}),e.jsx(be,{width:"100%",height:400,children:e.jsxs(ft,{data:o(),children:[e.jsx(ze,{strokeDasharray:"3 3"}),e.jsx(Oe,{dataKey:"month"}),e.jsx(Be,{}),e.jsx(we,{}),e.jsx(rs,{}),e.jsx(Ue,{type:"monotone",dataKey:"maize",stroke:"#8884d8",strokeWidth:2}),e.jsx(Ue,{type:"monotone",dataKey:"beans",stroke:"#82ca9d",strokeWidth:2}),e.jsx(Ue,{type:"monotone",dataKey:"potatoes",stroke:"#ffc658",strokeWidth:2}),e.jsx(Ue,{type:"monotone",dataKey:"volatility",stroke:"#ff7300",strokeDasharray:"5 5",name:"Volatility Index"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Volatility Causes"}),e.jsx(be,{width:"100%",height:300,children:e.jsxs(gt,{children:[e.jsx(jt,{data:m(),cx:"50%",cy:"50%",labelLine:!1,label:({name:j,percent:g})=>`${j}: ${(g*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"impact",children:m().map((j,g)=>e.jsx(Bs,{fill:j.color},`cell-${g}`))}),e.jsx(we,{})]})})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Key Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Average Price Volatility"}),e.jsx(_,{variant:"outline",children:"Â±25%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Seasonal Price Variation"}),e.jsx(_,{variant:"outline",children:"Â±40%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Highest Volatility Crop"}),e.jsx(_,{variant:"destructive",children:"Vegetables"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Most Stable Crop"}),e.jsx(_,{variant:"default",children:"Cereals"})]})]})]})]})]})]})]})}),e.jsx(O,{value:"challenges",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Impact of Price Volatility"}),e.jsx(B,{children:"How price fluctuations affect farmers and the agricultural sector"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map((j,g)=>e.jsxs(v,{className:"border-l-4 border-l-red-500",children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:j.title})}),e.jsxs(y,{className:"space-y-2",children:[e.jsx("p",{children:j.description}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Impact:"})," ",j.impact]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Solutions:"})," ",j.solution]})]})]},g))}),e.jsxs("div",{className:"mt-10 p-4 border rounded-lg bg-muted/30",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Economic Impact of Price Volatility"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Smallholder farmers lose an estimated 15-30% of potential income due to poor market timing"}),e.jsx("li",{children:"Price volatility increases the cost of agricultural credit by 2-5 percentage points"}),e.jsx("li",{children:"High volatility discourages investment in productivity-enhancing technologies"}),e.jsx("li",{children:"Food security is threatened as farmers shift to subsistence farming to avoid market risks"})]})]})]}),e.jsx(J,{children:e.jsx(f,{onClick:()=>c("solutions"),className:"ml-auto",children:"Explore Risk Management Solutions"})})]})}),e.jsx(O,{value:"solutions",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Price Risk Management Strategies"}),e.jsx(B,{children:"Proven approaches to reduce exposure to price volatility"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map((j,g)=>e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:j.title})}),e.jsxs(y,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm",children:j.description}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Benefits:"}),e.jsx("ul",{className:"list-disc pl-5 text-sm space-y-1",children:j.benefits.map((x,N)=>e.jsx("li",{children:x},N))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Implementation:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.implementation})]})]})]},g))}),e.jsxs("div",{className:"mt-10 p-6 border rounded-lg bg-green-50",children:[e.jsx("h3",{className:"text-xl font-medium mb-4",children:"AgriTender Connect Price Risk Tools"}),e.jsx("p",{className:"mb-4",children:"Our platform offers several tools to help farmers manage price volatility:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-base",children:"Price Alerts"})}),e.jsx(y,{children:e.jsx("p",{className:"text-sm",children:"Get notified when prices reach your target levels"})}),e.jsx(J,{children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/market-information"),children:"Set Price Alerts"})})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-base",children:"Forward Contracts"})}),e.jsx(y,{children:e.jsx("p",{className:"text-sm",children:"Lock in prices for future delivery to reduce risk"})}),e.jsx(J,{children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/commodity-trading"),children:"Explore Contracts"})})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-base",children:"Market Intelligence"})}),e.jsx(y,{children:e.jsx("p",{className:"text-sm",children:"Access forecasts and trend analysis for better timing"})}),e.jsx(J,{children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/market-information"),children:"View Forecasts"})})]})]}),e.jsx(f,{className:"w-full",onClick:()=>n("/commodity-trading"),children:"Start Managing Price Risk Today"})]})]})]})})]})]})]})},Xc=()=>{const[s,a]=l.useState("standards"),t=Ne(),r=()=>[{crop:"Coffee",grade_a:45,grade_b:35,grade_c:20},{crop:"Tea",grade_a:60,grade_b:30,grade_c:10},{crop:"Maize",grade_a:25,grade_b:50,grade_c:25},{crop:"Beans",grade_a:40,grade_b:40,grade_c:20},{crop:"Potatoes",grade_a:30,grade_b:45,grade_c:25}],i=()=>[{name:"Organic Certified",value:15,color:"#0088FE"},{name:"GAP Certified",value:25,color:"#00C49F"},{name:"Fair Trade",value:10,color:"#FFBB28"},{name:"No Certification",value:50,color:"#FF8042"}],c=[{title:"Kenya Bureau of Standards (KEBS)",description:"National standards for agricultural products including grading, packaging, and labeling requirements.",scope:"Cereals, pulses, fruits, vegetables, and processed foods",benefits:"Market access, consumer confidence, export opportunities",certification_process:"Application â†’ Inspection â†’ Testing â†’ Certification â†’ Annual surveillance"},{title:"GlobalGAP Certification",description:"International standard for good agricultural practices ensuring food safety and sustainability.",scope:"Fresh produce, aquaculture, and livestock",benefits:"Access to export markets, premium pricing, risk reduction",certification_process:"Training â†’ Implementation â†’ Self-assessment â†’ External audit â†’ Certification"},{title:"Organic Certification",description:"Standards for organic production methods without synthetic chemicals and GMOs.",scope:"All agricultural products including crops and livestock",benefits:"Premium pricing (20-40% higher), niche market access, environmental benefits",certification_process:"Transition period (3 years) â†’ Application â†’ Inspection â†’ Certification â†’ Annual renewal"},{title:"Fair Trade Certification",description:"Social and economic standards ensuring fair prices and working conditions for farmers.",scope:"Coffee, tea, cocoa, bananas, sugar, and other export crops",benefits:"Guaranteed minimum price, social premium, market stability",certification_process:"Group formation â†’ Training â†’ Implementation â†’ Audit â†’ Certification"}],n=[{title:"Lack of Standardization",description:"Inconsistent quality metrics and grading systems across different markets and buyers.",impact:"Price disputes, market rejection, reduced competitiveness",solution:"Adoption of standardized grading systems and quality measurement tools"},{title:"Limited Testing Facilities",description:"Few accessible laboratories for quality testing and certification in rural areas.",impact:"Inability to verify quality claims, limited certification opportunities",solution:"Mobile testing units, decentralized testing centers, and rapid testing kits"},{title:"Poor Post-Harvest Handling",description:"Inadequate storage, processing, and transportation practices affecting product quality.",impact:"Quality degradation, shorter shelf life, reduced market value",solution:"Training on best practices, improved infrastructure, and technology adoption"},{title:"Cost of Certification",description:"High certification costs and complex procedures limiting smallholder farmer participation.",impact:"Exclusion from premium markets, continued dependence on commodity pricing",solution:"Group certification, subsidized programs, and simplified procedures for smallholders"}],o=[{title:"Farmer Field Schools",description:"Hands-on training programs teaching quality production and post-harvest practices.",target:"Smallholder farmers and farmer groups",delivery:"Weekly sessions over full crop cycle",topics:["Good Agricultural Practices","Pest and Disease Management","Harvest Timing","Post-Harvest Handling"]},{title:"Quality Management Systems",description:"Implementation of systematic approaches to quality control and documentation.",target:"Farmer cooperatives and agribusinesses",delivery:"Consultancy and training workshops",topics:["HACCP Implementation","Traceability Systems","Record Keeping","Continuous Improvement"]},{title:"Technology Adoption Support",description:"Assistance in adopting quality-enhancing technologies and equipment.",target:"Progressive farmers and cooperatives",delivery:"Demonstrations, subsidies, and technical support",topics:["Quality Testing Equipment","Sorting and Grading Machines","Storage Technologies","Processing Equipment"]},{title:"Market Linkage Programs",description:"Connecting quality-conscious farmers with premium market opportunities.",target:"Certified farmers and high-quality producers",delivery:"B2B platforms and trade facilitation",topics:["Buyer Identification","Contract Negotiation","Quality Agreements","Payment Guarantees"]}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Quality Control"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Implementing quality standards and certification systems to access premium markets and improve farmer incomes"})]}),e.jsxs(de,{value:s,onValueChange:a,className:"w-full",children:[e.jsxs(ce,{className:"w-full grid grid-cols-1 sm:grid-cols-4 gap-2 mb-8",children:[e.jsxs(K,{value:"standards",className:"flex items-center gap-2",children:[e.jsx(Wt,{className:"h-4 w-4"}),e.jsx("span",{children:"Standards"})]}),e.jsxs(K,{value:"challenges",className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-4 w-4"}),e.jsx("span",{children:"Challenges"})]}),e.jsxs(K,{value:"programs",className:"flex items-center gap-2",children:[e.jsx(sn,{className:"h-4 w-4"}),e.jsx("span",{children:"Programs"})]}),e.jsxs(K,{value:"impact",className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"Impact"})]})]}),e.jsx(O,{value:"standards",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Quality Standards and Certification"}),e.jsx(B,{children:"Overview of major quality standards and certification systems for Kenyan agriculture"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-6",children:c.map((m,d)=>e.jsxs(v,{className:"border-l-4 border-l-green-500",children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:m.title})}),e.jsxs(y,{className:"space-y-3",children:[e.jsx("p",{children:m.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Scope:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.scope})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Benefits:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.benefits})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Certification Process:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.certification_process})]})]})]},d))}),e.jsxs("div",{className:"mt-10 p-6 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"text-xl font-medium mb-4",children:"Benefits of Quality Certification"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"20-40%"}),e.jsx("div",{className:"text-sm",children:"Price Premium"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"60%"}),e.jsx("div",{className:"text-sm",children:"Market Access Improvement"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"80%"}),e.jsx("div",{className:"text-sm",children:"Customer Satisfaction"})]})]})]})]})]})}),e.jsx(O,{value:"challenges",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Quality Control Challenges"}),e.jsx(B,{children:"Common barriers to implementing effective quality control in agricultural value chains"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map((m,d)=>e.jsxs(v,{className:"border-l-4 border-l-red-500",children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:m.title})}),e.jsxs(y,{className:"space-y-2",children:[e.jsx("p",{children:m.description}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Impact:"})," ",m.impact]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Solution:"})," ",m.solution]})]})]},d))}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Current Quality Distribution"}),e.jsx(be,{width:"100%",height:400,children:e.jsxs(Ns,{data:r(),children:[e.jsx(ze,{strokeDasharray:"3 3"}),e.jsx(Oe,{dataKey:"crop"}),e.jsx(Be,{}),e.jsx(we,{}),e.jsx(rs,{}),e.jsx(Me,{dataKey:"grade_a",stackId:"a",fill:"#22c55e",name:"Grade A (Premium)"}),e.jsx(Me,{dataKey:"grade_b",stackId:"a",fill:"#eab308",name:"Grade B (Standard)"}),e.jsx(Me,{dataKey:"grade_c",stackId:"a",fill:"#ef4444",name:"Grade C (Below Standard)"})]})})]})]})]})}),e.jsx(O,{value:"programs",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Quality Improvement Programs"}),e.jsx(B,{children:"Training and support programs to help farmers meet quality standards"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map((m,d)=>e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:m.title})}),e.jsxs(y,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm",children:m.description}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:"Target:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.target})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:"Delivery:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.delivery})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:"Key Topics:"}),e.jsx("ul",{className:"list-disc pl-5 text-sm space-y-1 mt-2",children:m.topics.map((p,j)=>e.jsx("li",{children:p},j))})]})]})]},d))}),e.jsxs("div",{className:"mt-10 p-6 border rounded-lg bg-green-50",children:[e.jsx("h3",{className:"text-xl font-medium mb-4",children:"Join Our Quality Improvement Programs"}),e.jsx("p",{className:"mb-4",children:"AgriTender Connect partners with certification bodies and training organizations to offer:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-base",children:"Training Workshops"})}),e.jsx(y,{children:e.jsx("p",{className:"text-sm",children:"Regular training on quality standards and best practices"})}),e.jsx(J,{children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>t("/service-providers"),children:"Find Training"})})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-base",children:"Certification Support"})}),e.jsx(y,{children:e.jsx("p",{className:"text-sm",children:"Guidance and support through certification processes"})}),e.jsx(J,{children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>t("/service-providers"),children:"Get Support"})})]})]})]})]})]})}),e.jsx(O,{value:"impact",children:e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Impact of Quality Improvements"}),e.jsx(B,{children:"Measuring the benefits of quality control and certification programs"})]}),e.jsxs(y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Certification Status in Kenya"}),e.jsx(be,{width:"100%",height:300,children:e.jsxs(gt,{children:[e.jsx(jt,{data:i(),cx:"50%",cy:"50%",labelLine:!1,label:({name:m,percent:d})=>`${m}: ${(d*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:i().map((m,d)=>e.jsx(Bs,{fill:m.color},`cell-${d}`))}),e.jsx(we,{})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Success Story: Nyeri Coffee Cooperative"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Implemented quality management systems and achieved specialty coffee certification"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Price Increase:"}),e.jsx(_,{variant:"default",children:"+45%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Rejection Rate:"}),e.jsx(_,{variant:"destructive",children:"-60%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Export Markets:"}),e.jsx(_,{variant:"default",children:"+3"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Success Story: Meru Organic Farmers"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Transitioned to organic farming and achieved organic certification"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Premium Pricing:"}),e.jsx(_,{variant:"default",children:"+30%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Input Costs:"}),e.jsx(_,{variant:"destructive",children:"-25%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Soil Health:"}),e.jsx(_,{variant:"default",children:"Improved"})]})]})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-muted/30",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Measurable Impact of Quality Programs"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Farmers with certification earn 20-40% higher prices compared to non-certified farmers"}),e.jsx("li",{children:"Quality-focused cooperatives reduce post-harvest losses by up to 50%"}),e.jsx("li",{children:"Certified farms have 30% lower rejection rates from buyers"}),e.jsx("li",{children:"Quality improvement programs increase farmer income by an average of 35%"}),e.jsx("li",{children:"Export opportunities increase by 60% for certified producers"})]})]})]}),e.jsx(J,{children:e.jsx(f,{onClick:()=>t("/commodity-trading"),className:"ml-auto",children:"Start Your Quality Journey"})})]})})]})]})]})},eo=({providers:s,selectedType:a})=>{const{toast:t}=ee(),[r,i]=l.useState(!1),[c,n]=l.useState(!0);return l.useEffect(()=>{const o=setTimeout(()=>{n(!1)},1e3);return()=>clearTimeout(o)},[]),e.jsxs("div",{className:"w-full h-[500px] bg-gray-50 rounded-lg relative overflow-hidden border",children:[e.jsx("div",{className:"absolute inset-0",children:c?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Es,{className:"h-8 w-8 animate-spin text-primary mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading map..."})]})}):e.jsx("div",{className:"absolute inset-0 opacity-25 pointer-events-none",children:e.jsx("img",{src:"/kenya-map-outline.svg",alt:"Kenya Map Outline",className:"max-w-full max-h-full object-contain",onLoad:()=>i(!0),onError:o=>{o.currentTarget.style.display="none";const m=o.currentTarget.parentElement;m&&(m.classList.add("bg-gray-200"),m.classList.add("bg-[url('data:image/svg+xml,%3Csvg width=%22100%22 height=%22100%22 viewBox=%220 0 100 100%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cpath d=%22M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z%22 fill=%22%23bbb%22 fill-opacity=%220.25%22 fill-rule=%22evenodd%22/%3E%3C/svg%3E')"))}})})}),e.jsx("div",{className:"absolute inset-0 z-10",children:s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute w-4 h-4 bg-blue-500 rounded-full transform -translate-x-1/2 -translate-y-1/2 pulse-animation",style:{left:"50%",top:"60%"},children:e.jsxs("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 -translate-y-full bg-white px-2 py-1 rounded text-xs shadow-sm",children:["Nairobi (",s.filter(o=>o.location.county==="Nairobi").length,")"]})}),e.jsx("div",{className:"absolute w-4 h-4 bg-green-500 rounded-full transform -translate-x-1/2 -translate-y-1/2",style:{left:"60%",top:"80%"},children:e.jsxs("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 -translate-y-full bg-white px-2 py-1 rounded text-xs shadow-sm",children:["Mombasa (",s.filter(o=>o.location.county==="Mombasa").length,")"]})}),s.slice(0,5).map((o,m)=>e.jsx("div",{className:"absolute w-3 h-3 bg-primary rounded-full transform -translate-x-1/2 -translate-y-1/2 hover:w-4 hover:h-4 transition-all cursor-pointer",style:{left:`${30+m*10}%`,top:`${40+m*5}%`},onClick:()=>{t({title:o.name,description:o.description})},children:e.jsx("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 -translate-y-full bg-white px-2 py-1 rounded text-xs shadow-sm opacity-0 group-hover:opacity-100",children:o.name})},o.id||m))]}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-6 bg-white rounded-lg shadow-md max-w-md",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Interactive Map Ready for Providers"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Our service provider registry is growing. Connect with key agricultural service providers as they join the platform."}),e.jsx(f,{className:"gap-2",onClick:()=>window.location.href="/service-provider-registration",children:"Register as Provider"})]})})}),s.length>0&&e.jsx("div",{className:"absolute top-4 right-4 bg-white p-3 rounded-md shadow-md",children:e.jsxs("p",{className:"font-medium text-sm",children:["Showing ",s.length," providers",a!=="all"?` of type ${a}`:""]})}),e.jsx("style",{children:`
        .pulse-animation {
          box-shadow: 0 0 0 rgba(66, 153, 225, 0.6);
          animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
          0% {
            box-shadow: 0 0 0 0 rgba(66, 153, 225, 0.6);
          }
          70% {
            box-shadow: 0 0 0 10px rgba(66, 153, 225, 0);
          }
          100% {
            box-shadow: 0 0 0 0 rgba(66, 153, 225, 0);
          }
        }
        `})]})},so=()=>e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 mt-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(ye,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-sm",children:"Transport"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(hs,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Storage"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(Fs,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{className:"text-sm",children:"Training"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(qs,{className:"h-5 w-5 text-amber-500"}),e.jsx("span",{className:"text-sm",children:"Input Supply"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(Ls,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-sm",children:"Quality Control"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(se,{className:"h-5 w-5 text-teal-500"}),e.jsx("span",{className:"text-sm",children:"Market Linkage"})]})]}),to=({selectedType:s,setSelectedType:a,selectedCounty:t,setSelectedCounty:r,searchTerm:i,setSearchTerm:c,filteredProvidersCount:n})=>{const o=[{value:"all",label:"All Providers",icon:se},{value:"transport",label:"Transport Services",icon:ye},{value:"storage",label:"Storage Facilities",icon:hs},{value:"quality-control",label:"Quality Control",icon:Ls},{value:"training",label:"Training Providers",icon:Fs},{value:"input-supplier",label:"Input Suppliers",icon:qs},{value:"inspector",label:"Inspectors",icon:Ls},{value:"market-linkage",label:"Market Linkage",icon:se}],m=[{value:"all",label:"All Counties"},{value:"nairobi",label:"Nairobi"},{value:"mombasa",label:"Mombasa"},{value:"kisumu",label:"Kisumu"},{value:"nakuru",label:"Nakuru"},{value:"kiambu",label:"Kiambu"},{value:"meru",label:"Meru"},{value:"kakamega",label:"Kakamega"},{value:"nyeri",label:"Nyeri"},{value:"machakos",label:"Machakos"},{value:"uasin-gishu",label:"Uasin Gishu"},{value:"kilifi",label:"Kilifi"}];return e.jsxs(v,{className:"mb-6",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Find Service Providers"}),e.jsx(B,{children:"Filter by service type, location, or search by name"})]}),e.jsxs(y,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type of Service"}),e.jsxs(Y,{value:s,onValueChange:d=>a(d),children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Select service type"})}),e.jsx(G,{children:o.map(d=>e.jsx(C,{value:d.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d.icon,{className:"h-4 w-4"}),e.jsx("span",{children:d.label})]})},d.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"County"}),e.jsxs(Y,{value:t,onValueChange:r,children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Select county"})}),e.jsx(G,{children:m.map(d=>e.jsx(C,{value:d.value,children:d.label},d.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Search"}),e.jsx(M,{placeholder:"Search by name or service",value:i,onChange:d=>c(d.target.value)})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{id:"verified"}),e.jsx("label",{htmlFor:"verified",className:"text-sm",children:"Show verified providers only"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",n," providers"]})]})]})]})},ao=tn,ro=an,io=rn,Jr=l.forwardRef(({className:s,sideOffset:a=4,...t},r)=>e.jsx(jr,{ref:r,sideOffset:a,className:q("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));Jr.displayName=jr.displayName;const no=({providers:s,isLoading:a,resetFilters:t})=>{const r=[{value:"all",label:"All Providers",icon:se},{value:"transport",label:"Transport Services",icon:ye},{value:"storage",label:"Storage Facilities",icon:hs},{value:"quality-control",label:"Quality Control",icon:Ls},{value:"training",label:"Training Providers",icon:Fs},{value:"input-supplier",label:"Input Suppliers",icon:qs},{value:"inspector",label:"Inspectors",icon:Ls},{value:"market-linkage",label:"Market Linkage",icon:se}];return a?e.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((i,c)=>e.jsxs(v,{className:"animate-pulse",children:[e.jsx(b,{className:"h-32 bg-muted"}),e.jsxs(y,{className:"pt-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-5/6 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-4/6"})]})]},c))}):s.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(nn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No providers found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your search or filters"}),e.jsx(f,{onClick:t,children:"Reset Filters"})]}):e.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.slice(0,9).map(i=>{const c=r.find(o=>o.value===i.businessType)||r[0],n=c.icon;return e.jsxs(v,{className:"overflow-hidden",children:[e.jsx("div",{className:`h-2 w-full ${i.businessType==="transport"?"bg-blue-500":i.businessType==="storage"?"bg-green-500":i.businessType==="training"?"bg-purple-500":i.businessType==="quality-control"?"bg-red-500":i.businessType==="input-supplier"?"bg-amber-500":"bg-teal-500"}`}),e.jsx(b,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(w,{className:"text-lg flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5 text-muted-foreground"}),i.name]}),e.jsx(B,{children:c.label})]}),i.verified&&e.jsx(ao,{children:e.jsxs(ro,{children:[e.jsx(io,{children:e.jsx(_,{variant:"secondary",children:"Verified"})}),e.jsx(Jr,{children:e.jsx("p",{children:"This provider has been verified by our team"})})]})})]})}),e.jsxs(y,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(se,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[i.location.county,", ",i.location.specificLocation]})]}),e.jsx("p",{className:"line-clamp-2 text-sm text-muted-foreground",children:i.description}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2",children:[i.tags.slice(0,3).map(o=>e.jsx(_,{variant:"outline",className:"text-xs",children:o},o)),i.tags.length>3&&e.jsxs(_,{variant:"outline",className:"text-xs",children:["+",i.tags.length-3," more"]})]})]}),e.jsx(J,{className:"flex justify-end pt-0",children:e.jsx(f,{variant:"outline",size:"sm",children:"View Details"})})]},i.id)})})},lo=()=>e.jsxs(v,{className:"mt-10",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Join Our Agricultural Service Network"}),e.jsx(B,{children:"Help strengthen Kenya's agricultural ecosystem by registering your services on our platform."})]}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ye,{className:"h-5 w-5 text-blue-500"}),e.jsx("h3",{className:"font-medium",children:"Transport Providers"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect with farmers needing reliable transportation for their produce"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(hs,{className:"h-5 w-5 text-green-500"}),e.jsx("h3",{className:"font-medium",children:"Storage Facilities"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Offer your warehousing and cold storage solutions to reduce post-harvest losses"})]}),e.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ln,{className:"h-5 w-5 text-amber-500"}),e.jsx("h3",{className:"font-medium",children:"Training & Services"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"List your agricultural training, quality control, or market linkage services"})]})]})}),e.jsxs(J,{className:"flex flex-col sm:flex-row justify-center gap-4 pb-6",children:[e.jsx(f,{className:"w-full sm:w-auto",variant:"default",onClick:()=>window.location.href="/service-provider-registration",children:"Register as Service Provider"}),e.jsx(f,{className:"w-full sm:w-auto",variant:"outline",onClick:()=>window.location.href="/transporter-signup",children:"Register as Transporter"})]})]}),co=()=>{const{toast:s}=ee(),[a,t]=l.useState(!0),[r,i]=l.useState([]),[c,n]=l.useState([]),[o,m]=l.useState("all"),[d,p]=l.useState("all"),[j,g]=l.useState("");l.useEffect(()=>{(async()=>{try{t(!0);const k=await Yr();i(k),n(k)}catch(k){console.error("Error fetching providers:",k),s({title:"Error",description:"Failed to load service providers. Please try again.",variant:"destructive"})}finally{t(!1)}})()},[s]),l.useEffect(()=>{let N=[...r];if(o!=="all"&&(N=N.filter(k=>k.businessType===o)),d!=="all"&&(N=N.filter(k=>k.location.county.toLowerCase()===d.toLowerCase())),j){const k=j.toLowerCase();N=N.filter(u=>u.name.toLowerCase().includes(k)||u.description.toLowerCase().includes(k)||u.services.some(h=>h.toLowerCase().includes(k))||u.tags.some(h=>h.toLowerCase().includes(k)))}n(N)},[r,o,d,j]);const x=()=>{m("all"),p("all"),g("")};return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(es,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(ws,{})})]})}),e.jsxs("main",{className:"flex-1 container py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Logistics Solutions Map"}),e.jsx("p",{className:"text-muted-foreground",children:"Find service providers near you on the interactive map"})]}),e.jsx(to,{selectedType:o,setSelectedType:m,selectedCounty:d,setSelectedCounty:p,searchTerm:j,setSearchTerm:g,filteredProvidersCount:c.length}),e.jsx(so,{}),e.jsx(eo,{providers:c,selectedType:o}),e.jsx(no,{providers:c,isLoading:a,resetFilters:x}),!a&&c.length>9&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(f,{variant:"outline",children:["Show More (",c.length-9," remaining)"]})}),e.jsx(lo,{})]})]})},Pa=[{id:"1",crop:"Tomatoes",location:"Wakulima Market",county:"Nairobi",demandLevel:"high",pricePerKg:120,buyerCount:15,description:"High demand for fresh tomatoes with consistent supply for restaurants and hotels",lastUpdated:new Date("2025-04-22")},{id:"2",crop:"Potatoes",location:"Nakuru Main Market",county:"Nakuru",demandLevel:"high",pricePerKg:45,buyerCount:12,description:"Wholesale buyers looking for bulk potato supply for distribution to retail outlets",lastUpdated:new Date("2025-04-23")},{id:"3",crop:"Maize",location:"Eldoret Grain Market",county:"Uasin Gishu",demandLevel:"medium",pricePerKg:35,buyerCount:8,description:"Millers seeking quality maize with moisture content below 13%",lastUpdated:new Date("2025-04-21")},{id:"4",crop:"Mangoes",location:"Mombasa Fruit Market",county:"Mombasa",demandLevel:"high",pricePerKg:90,buyerCount:10,description:"Export buyers seeking apple and ngowe mango varieties for international markets",lastUpdated:new Date("2025-04-20")},{id:"5",crop:"Avocados",location:"Thika Market",county:"Kiambu",demandLevel:"high",pricePerKg:150,buyerCount:7,description:"Processing companies looking for hass avocados for oil extraction and export",lastUpdated:new Date("2025-04-22")}],oo=()=>{const[s,a]=l.useState(""),[t,r]=l.useState(""),[i,c]=l.useState(Pa);return l.useEffect(()=>{document.title="Market Demand Hotspots | Kilimo Connect";let n=[...Pa];s&&(n=n.filter(o=>o.crop.toLowerCase().includes(s.toLowerCase()))),t&&(n=n.filter(o=>o.county.toLowerCase().includes(t.toLowerCase()))),c(n)},[s,t]),e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsx("div",{className:"container flex h-16 items-center",children:e.jsx(es,{})})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Market Demand Hotspots"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Discover where buyers are actively looking for specific crops and connect directly with them"})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"crop",className:"block text-sm font-medium mb-1",children:"Crop"}),e.jsxs(Y,{value:s,onValueChange:a,children:[e.jsx(H,{id:"crop",children:e.jsx(W,{placeholder:"All Crops"})}),e.jsxs(G,{children:[e.jsx(C,{value:"",children:"All Crops"}),e.jsx(C,{value:"tomatoes",children:"Tomatoes"}),e.jsx(C,{value:"potatoes",children:"Potatoes"}),e.jsx(C,{value:"maize",children:"Maize"}),e.jsx(C,{value:"mangoes",children:"Mangoes"}),e.jsx(C,{value:"avocados",children:"Avocados"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"county",className:"block text-sm font-medium mb-1",children:"County"}),e.jsxs(Y,{value:t,onValueChange:r,children:[e.jsx(H,{id:"county",children:e.jsx(W,{placeholder:"All Counties"})}),e.jsxs(G,{children:[e.jsx(C,{value:"",children:"All Counties"}),e.jsx(C,{value:"nairobi",children:"Nairobi"}),e.jsx(C,{value:"nakuru",children:"Nakuru"}),e.jsx(C,{value:"uasin gishu",children:"Uasin Gishu"}),e.jsx(C,{value:"mombasa",children:"Mombasa"}),e.jsx(C,{value:"kiambu",children:"Kiambu"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(f,{variant:"outline",className:"w-full",onClick:()=>{a(""),r("")},children:"Clear Filters"})})]}),e.jsxs("div",{className:"relative h-[300px] w-full border rounded-md bg-muted/20 flex items-center justify-center mb-6",children:[e.jsx("p",{className:"text-muted-foreground",children:"Market Demand Heatmap Visualization"}),i.map(n=>e.jsx("div",{className:`absolute w-4 h-4 rounded-full flex items-center justify-center
                ${n.demandLevel==="high"?"bg-red-500":n.demandLevel==="medium"?"bg-orange-400":"bg-yellow-300"}`,style:{top:`${Math.random()*70+15}%`,left:`${Math.random()*70+15}%`},title:`${n.crop} demand in ${n.location}, ${n.county}`,children:e.jsx(se,{className:"h-3 w-3 text-white"})},n.id))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.map(n=>e.jsxs(v,{className:n.demandLevel==="high"?"border-red-200 bg-red-50":n.demandLevel==="medium"?"border-orange-200 bg-orange-50":"border-yellow-200 bg-yellow-50",children:[e.jsx(b,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(w,{children:n.crop}),e.jsxs(B,{children:[n.location,", ",n.county]})]}),e.jsxs("div",{className:`rounded-full px-2 py-1 text-xs font-medium 
                    ${n.demandLevel==="high"?"bg-red-100 text-red-800":n.demandLevel==="medium"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:[n.demandLevel.charAt(0).toUpperCase()+n.demandLevel.slice(1)," Demand"]})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Price"}),e.jsxs("span",{className:"font-medium",children:["KSh ",n.pricePerKg,"/kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Buyers"}),e.jsx("span",{className:"font-medium",children:n.buyerCount})]}),e.jsx("p",{className:"text-sm mt-2",children:n.description})]})}),e.jsxs(J,{className:"flex justify-between",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Updated: ",n.lastUpdated.toLocaleDateString()]}),e.jsx(f,{size:"sm",children:"Connect with Buyers"})]})]},n.id)),i.length===0&&e.jsxs("div",{className:"col-span-full text-center p-12",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(me,{className:"mx-auto h-12 w-12 opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No demand hotspots found"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Try changing your filter criteria or check back later for new demand opportunities."})]})]})]})]})},Us=l.forwardRef(({className:s,...a},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:q("w-full caption-bottom text-sm",s),...a})}));Us.displayName="Table";const Vs=l.forwardRef(({className:s,...a},t)=>e.jsx("thead",{ref:t,className:q("[&_tr]:border-b",s),...a}));Vs.displayName="TableHeader";const Hs=l.forwardRef(({className:s,...a},t)=>e.jsx("tbody",{ref:t,className:q("[&_tr:last-child]:border-0",s),...a}));Hs.displayName="TableBody";const mo=l.forwardRef(({className:s,...a},t)=>e.jsx("tfoot",{ref:t,className:q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a}));mo.displayName="TableFooter";const Ge=l.forwardRef(({className:s,...a},t)=>e.jsx("tr",{ref:t,className:q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a}));Ge.displayName="TableRow";const re=l.forwardRef(({className:s,...a},t)=>e.jsx("th",{ref:t,className:q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a}));re.displayName="TableHead";const ie=l.forwardRef(({className:s,...a},t)=>e.jsx("td",{ref:t,className:q("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a}));ie.displayName="TableCell";const uo=l.forwardRef(({className:s,...a},t)=>e.jsx("caption",{ref:t,className:q("mt-4 text-sm text-muted-foreground",s),...a}));uo.displayName="TableCaption";const xo=({isLoading:s,filteredProduce:a})=>{const{toast:t}=ee(),[r,i]=l.useState({}),c=async(n,o,m,d,p)=>{try{i(j=>({...j,[m]:!0})),await os(1e3),t({title:"Order Placed Successfully",description:`${n==="buy"?"Buy":"Sell"} order placed for ${d} ${o} at KES ${p} per unit`})}catch(j){console.error("Error placing order:",j),t({title:"Order Failed",description:"Could not place your order. Please try again.",variant:"destructive"})}finally{i(j=>({...j,[m]:!1}))}};return s?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No commodities found. Try a different search or filter."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Us,{children:[e.jsx(Vs,{children:e.jsxs(Ge,{children:[e.jsx(re,{children:"Commodity"}),e.jsx(re,{children:"Category"}),e.jsx(re,{children:"Quantity"}),e.jsx(re,{children:"Quality"}),e.jsx(re,{children:"Available From"}),e.jsx(re,{children:"County"}),e.jsx(re,{children:"Seller"}),e.jsx(re,{children:"Actions"})]})}),e.jsx(Hs,{children:a.map(n=>{const o=Math.floor(Math.random()*100)+50;return e.jsxs(Ge,{children:[e.jsx(ie,{className:"font-medium",children:n.name}),e.jsx(ie,{children:n.category}),e.jsxs(ie,{children:[n.quantity," ",n.unit]}),e.jsx(ie,{children:n.qualityGrade}),e.jsx(ie,{children:n.availableFrom}),e.jsx(ie,{children:n.county}),e.jsx(ie,{children:n.farmer}),e.jsx(ie,{children:e.jsx(f,{size:"sm",onClick:()=>c("buy",n.name,n.id,n.quantity,o),disabled:r[n.id],children:r[n.id]?"Processing...":"Buy"})})]},n.id)})})]})})},ho=({isLoading:s,searchTerm:a})=>{const[t,r]=l.useState([{id:1,type:"buy",commodity:"Maize",quantity:1e3,price:42,buyer:"Nairobi Mills"},{id:2,type:"sell",commodity:"Maize",quantity:500,price:45,seller:"John Kamau"},{id:3,type:"buy",commodity:"Coffee",quantity:300,price:340,buyer:"Kenya Coffee Exporters"},{id:4,type:"sell",commodity:"Coffee",quantity:200,price:350,seller:"Mary Wanjiku"},{id:5,type:"buy",commodity:"Tea",quantity:400,price:270,buyer:"Global Tea Traders"},{id:6,type:"sell",commodity:"Tea",quantity:300,price:280,seller:"Sarah Muthoni"}]),i=t.filter(n=>a===""||n.commodity.toLowerCase().includes(a.toLowerCase())),c=async(n,o,m,d)=>{try{await os(1e3);const p={id:t.length+1,type:n,commodity:o,quantity:m,price:d,buyer:n==="buy"?"Your Company":"",seller:n==="sell"?"Your Company":""};r([...t,p]),alert(`${n==="buy"?"Buy":"Sell"} order placed successfully for ${m} ${o} at KES ${d} per unit`)}catch(p){console.error("Error placing order:",p)}};return s?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Us,{children:[e.jsx(Vs,{children:e.jsxs(Ge,{children:[e.jsx(re,{children:"Type"}),e.jsx(re,{children:"Commodity"}),e.jsx(re,{children:"Quantity"}),e.jsx(re,{children:"Price (KES)"}),e.jsx(re,{children:"Buyer/Seller"}),e.jsx(re,{children:"Actions"})]})}),e.jsx(Hs,{children:i.map(n=>e.jsxs(Ge,{children:[e.jsx(ie,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.type==="buy"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:n.type==="buy"?"Buy":"Sell"})}),e.jsx(ie,{className:"font-medium",children:n.commodity}),e.jsx(ie,{children:n.quantity}),e.jsx(ie,{children:n.price}),e.jsx(ie,{children:n.type==="buy"?n.buyer:n.seller}),e.jsx(ie,{children:e.jsx(f,{size:"sm",variant:n.type==="buy"?"outline":"default",onClick:()=>c(n.type==="buy"?"sell":"buy",n.commodity,n.quantity,n.price),children:n.type==="buy"?"Sell to":"Buy from"})})]},n.id))})]})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No active orders found. Try a different search or place a new order."})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Place New Order"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{className:"text-green-600",children:"Buy Order"})}),e.jsx(y,{children:e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"buy-commodity",children:"Commodity"}),e.jsxs(Y,{defaultValue:"Maize",children:[e.jsx(H,{id:"buy-commodity",children:e.jsx(W,{placeholder:"Select commodity"})}),e.jsxs(G,{children:[e.jsx(C,{value:"Maize",children:"Maize"}),e.jsx(C,{value:"Coffee",children:"Coffee"}),e.jsx(C,{value:"Tea",children:"Tea"}),e.jsx(C,{value:"Beans",children:"Beans"})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"buy-quantity",children:"Quantity (kg)"}),e.jsx(M,{id:"buy-quantity",type:"number",min:"1",defaultValue:"100"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"buy-price",children:"Price per kg (KES)"}),e.jsx(M,{id:"buy-price",type:"number",min:"1",defaultValue:"45"})]}),e.jsx(f,{type:"button",className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>c("buy","Maize",100,45),children:"Place Buy Order"})]})})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{className:"text-blue-600",children:"Sell Order"})}),e.jsx(y,{children:e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"sell-commodity",children:"Commodity"}),e.jsxs(Y,{defaultValue:"Beans",children:[e.jsx(H,{id:"sell-commodity",children:e.jsx(W,{placeholder:"Select commodity"})}),e.jsxs(G,{children:[e.jsx(C,{value:"Maize",children:"Maize"}),e.jsx(C,{value:"Coffee",children:"Coffee"}),e.jsx(C,{value:"Tea",children:"Tea"}),e.jsx(C,{value:"Beans",children:"Beans"})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"sell-quantity",children:"Quantity (kg)"}),e.jsx(M,{id:"sell-quantity",type:"number",min:"1",defaultValue:"200"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"sell-price",children:"Price per kg (KES)"}),e.jsx(M,{id:"sell-price",type:"number",min:"1",defaultValue:"110"})]}),e.jsx(f,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>c("sell","Beans",200,110),children:"Place Sell Order"})]})})]})]})]})]})},po=({isLoading:s,searchTerm:a})=>{const[t]=l.useState([{id:1,commodity:"Maize",quantity:500,price:45,seller:"John Kamau",buyer:"Nairobi Mills",date:"2023-11-20",status:"completed"},{id:2,commodity:"Coffee",quantity:200,price:350,seller:"Mary Wanjiku",buyer:"Kenya Coffee Exporters",date:"2023-11-22",status:"pending"},{id:3,commodity:"Tea",quantity:300,price:280,seller:"Sarah Muthoni",buyer:"Global Tea Traders",date:"2023-11-25",status:"completed"},{id:4,commodity:"Beans",quantity:400,price:110,seller:"John Kamau",buyer:"Local Market Vendors",date:"2023-11-28",status:"pending"}]),r=t.filter(i=>a===""||i.commodity.toLowerCase().includes(a.toLowerCase()));return s?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):r.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No trades found. Complete an order to see your trade history."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Us,{children:[e.jsx(Vs,{children:e.jsxs(Ge,{children:[e.jsx(re,{children:"Commodity"}),e.jsx(re,{children:"Quantity"}),e.jsx(re,{children:"Price (KES)"}),e.jsx(re,{children:"Seller"}),e.jsx(re,{children:"Buyer"}),e.jsx(re,{children:"Date"}),e.jsx(re,{children:"Status"})]})}),e.jsx(Hs,{children:r.map(i=>e.jsxs(Ge,{children:[e.jsx(ie,{className:"font-medium",children:i.commodity}),e.jsx(ie,{children:i.quantity}),e.jsx(ie,{children:i.price}),e.jsx(ie,{children:i.seller}),e.jsx(ie,{children:i.buyer}),e.jsx(ie,{children:i.date}),e.jsx(ie,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.status==="completed"?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"}`,children:i.status==="completed"?"Completed":"Pending"})})]},i.id))})]})})},na=({title:s,text:a,url:t=window.location.href,size:r="md",variant:i="buttons"})=>{const{toast:c}=ee(),n=`${s}

${a}

Shared via AgriConnect: ${t}`,o=encodeURIComponent(n),m=encodeURIComponent(t),d=()=>{const x=`https://wa.me/?text=${o}`;window.open(x,"_blank","noopener,noreferrer"),c({title:"Shared via WhatsApp",description:"Opening WhatsApp to share this content."})},p=()=>{const x=`https://t.me/share/url?url=${m}&text=${encodeURIComponent(s+`

`+a)}`;window.open(x,"_blank","noopener,noreferrer"),c({title:"Shared via Telegram",description:"Opening Telegram to share this content."})},j=async()=>{try{await navigator.clipboard.writeText(n),c({title:"Copied to Clipboard",description:"Content copied! You can now paste it anywhere."})}catch{c({title:"Copy Failed",description:"Couldn't copy to clipboard. Please try again.",variant:"destructive"})}},g=r==="sm"?"sm":r==="lg"?"lg":"default";return i==="card"?e.jsx(v,{className:"w-full max-w-md",children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Is,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-medium",children:"Share this content"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(f,{onClick:d,size:g,variant:"outline",className:"flex flex-col items-center gap-1 h-auto py-3",children:[e.jsx(xs,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-xs",children:"WhatsApp"})]}),e.jsxs(f,{onClick:p,size:g,variant:"outline",className:"flex flex-col items-center gap-1 h-auto py-3",children:[e.jsx(qt,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-xs",children:"Telegram"})]}),e.jsxs(f,{onClick:j,size:g,variant:"outline",className:"flex flex-col items-center gap-1 h-auto py-3",children:[e.jsx(Is,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Copy"})]})]})]})}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(f,{onClick:d,size:g,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4 text-green-600"}),r!=="sm"&&"WhatsApp"]}),e.jsxs(f,{onClick:p,size:g,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(qt,{className:"h-4 w-4 text-blue-600"}),r!=="sm"&&"Telegram"]}),i==="buttons"&&e.jsxs(f,{onClick:j,size:g,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),r!=="sm"&&"Copy"]})]})},go=({listing:s,isSelected:a,onSelect:t})=>{const[r,i]=l.useState(!1),c=o=>e.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((m,d)=>e.jsx(rt,{className:`h-4 w-4 ${d<Math.floor(o)?"text-yellow-500 fill-yellow-500":d<o?"text-yellow-500 fill-yellow-500 opacity-50":"text-gray-300"}`},d)),e.jsx("span",{className:"ml-1 text-sm font-medium",children:o.toFixed(1)})]}),n=`Check out this barter listing: ${s.commodity} (${s.quantity} ${s.unit}) available in ${s.location}. Looking to trade for: ${s.seekingCommodities.join(", ")}.`;return e.jsx(v,{className:`overflow-hidden hover:shadow-md transition-shadow ${a?"ring-2 ring-primary":""}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"md:w-1/4 bg-muted",children:e.jsx("div",{className:"aspect-square relative",children:e.jsx("img",{src:s.imageUrl,alt:s.commodity,className:"object-cover w-full h-full"})})}),e.jsxs("div",{className:"p-4 md:w-3/4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",onClick:()=>t(s),children:[e.jsx("h3",{className:"text-lg font-semibold cursor-pointer",children:s.commodity}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(se,{className:"h-3.5 w-3.5 mr-1"}),s.location]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[s.quantity," ",s.unit," available"]}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>i(!r),children:e.jsx(Is,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"h-6 w-6",children:e.jsx(cs,{children:s.owner.charAt(0)})}),e.jsx("span",{className:"text-sm font-medium",children:s.owner})]}),e.jsx("div",{className:"ml-3",children:c(s.ownerRating)})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:"Seeking:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.seekingCommodities.map((o,m)=>e.jsx(_,{variant:"secondary",children:o},m))})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Listed: ",s.listedDate]})}),r&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(na,{title:`Barter Opportunity: ${s.commodity}`,text:n,size:"sm"})})]})]})})},jo=async()=>{try{const{data:s,error:a}=await P.from("barter_listings").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(a)return console.error("Error fetching barter listings:",a),[];const t=(s==null?void 0:s.map(i=>i.user_id))||[],{data:r}=await P.from("profiles").select("id, full_name, avatar_url").in("id",t);return(s==null?void 0:s.map(i=>{var n;const c=r==null?void 0:r.find(o=>o.id===i.user_id);return{id:i.id,commodity:i.commodity,quantity:Number(i.quantity),unit:i.unit,description:i.description||"",imageUrl:((n=i.image_urls)==null?void 0:n[0])||"/placeholder.svg",location:i.location,county:i.county,seekingCommodities:i.seeking_commodities||[],owner:(c==null?void 0:c.full_name)||"Anonymous User",ownerRating:4.5,listedDate:new Date(i.created_at).toLocaleDateString(),status:i.status,userId:i.user_id}}))||[]}catch(s){return console.error("Error fetching barter listings:",s),[]}},fo=({searchTerm:s="",selectedCategory:a="",selectedLocation:t="",isLoading:r=!1})=>{const[i,c]=l.useState([]),[n,o]=l.useState([]),[m,d]=l.useState(null),[p,j]=l.useState(s),[g,x]=l.useState(a),[N,k]=l.useState(!0),{toast:u}=ee();l.useEffect(()=>{h()},[]),l.useEffect(()=>{S()},[i,p,g]);const h=async()=>{try{k(!0);const A=await jo();c(A)}catch(A){console.error("Error loading barter listings:",A),u({title:"Error",description:"Failed to load barter listings",variant:"destructive"})}finally{k(!1)}},S=()=>{let A=i;p&&(A=A.filter(D=>D.commodity.toLowerCase().includes(p.toLowerCase())||D.location.toLowerCase().includes(p.toLowerCase())||D.description.toLowerCase().includes(p.toLowerCase()))),g!=="all"&&g&&(A=A.filter(D=>D.commodity.toLowerCase().includes(g.toLowerCase()))),o(A)},T=["all","cereals","vegetables","fruits","livestock","seeds"];return N||r?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{children:"Loading barter listings..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Browse Barter Listings"}),e.jsxs(f,{children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Create Listing"]})]})}),e.jsx(y,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(M,{placeholder:"Search by commodity, location, or description...",value:p,onChange:A=>j(A.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(A=>e.jsx(_,{variant:g===A?"default":"outline",className:"cursor-pointer capitalize",onClick:()=>x(A),children:A},A))})]})]})})]}),n.length===0?e.jsx(v,{children:e.jsxs(y,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No listings found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:p||g!=="all"?"Try adjusting your search or filters":"Be the first to create a barter listing!"}),e.jsxs(f,{children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Create First Listing"]})]})}):e.jsx("div",{className:"grid gap-6",children:n.map(A=>e.jsx(go,{listing:A,isSelected:(m==null?void 0:m.id)===A.id,onSelect:d},A.id))})]})},vo=(s,a=20,t=30)=>{const r=new Date,i=[];for(let c=t;c>=0;c--){const n=new Date;n.setDate(r.getDate()-c);const o=Math.random()*a*2-a,m=Math.max(s+o,s*.7);i.push({date:n.toISOString().split("T")[0],price:Math.round(m*10)/10})}return i},yo=s=>{if(!s.length)return null;const a=s.map(o=>o.price),t=Math.min(...a),r=Math.max(...a),i=a.reduce((o,m)=>o+m,0)/a.length,c=a[a.length-1]>a[0]?"rising":"falling",n=Math.sqrt(a.reduce((o,m)=>o+Math.pow(m-i,2),0)/a.length);return{min:Math.round(t*10)/10,max:Math.round(r*10)/10,avg:Math.round(i*10)/10,trend:c,volatility:Math.round(n*10)/10,priceRange:Math.round((r-t)*10)/10}},No=({data:s,type:a,height:t=200})=>{const r={line:ft,bar:Ns,area:cn}[a],i=()=>{switch(a){case"line":return e.jsx(Ue,{type:"monotone",dataKey:"price",stroke:"#8884d8",activeDot:{r:8}});case"bar":return e.jsx(Me,{dataKey:"price",fill:"#8884d8"});case"area":return e.jsx(on,{type:"monotone",dataKey:"price",stroke:"#8884d8",fill:"#8884d8"});default:return null}};return e.jsx(be,{width:"100%",height:t,children:e.jsxs(r,{data:s,margin:{top:5,right:5,left:5,bottom:5},children:[e.jsx(ze,{strokeDasharray:"3 3",stroke:"#eee"}),e.jsx(Oe,{dataKey:"date",tick:{fontSize:12},tickFormatter:c=>{const n=new Date(c);return`${n.getDate()}/${n.getMonth()+1}`}}),e.jsx(Be,{domain:["auto","auto"],label:{value:"KES",angle:-90,position:"insideLeft"}}),e.jsx(we,{formatter:c=>[`KES ${c}`,"Price"],labelFormatter:c=>`Date: ${c}`}),e.jsx(rs,{}),i()]})})},bo=({isLoading:s,markets:a})=>{const[t,r]=l.useState("line");return s?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):a.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-lg text-muted-foreground",children:"No market data available. Please try again later."})}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Price Trends Visualization"}),e.jsxs(Y,{value:t,onValueChange:i=>r(i),children:[e.jsx(H,{className:"w-[180px]",children:e.jsx(W,{placeholder:"Select chart type"})}),e.jsxs(G,{children:[e.jsx(C,{value:"line",children:"Line Chart"}),e.jsx(C,{value:"bar",children:"Bar Chart"}),e.jsx(C,{value:"area",children:"Area Chart"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(i=>e.jsxs(v,{className:"overflow-hidden",children:[e.jsxs(b,{children:[e.jsx(w,{children:i.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:i.county})]}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-6",children:[i.producePrices.map((c,n)=>{const o=vo(c.price),m=yo(o);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{children:c.produceName}),e.jsxs("span",{className:"font-medium",children:["KES ",c.price," per ",c.unit]})]}),m&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Price Range"}),e.jsxs("div",{className:"font-medium",children:["KES ",m.priceRange]})]}),e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Price"}),e.jsxs("div",{className:"font-medium",children:["KES ",m.avg]})]}),e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Price Trend"}),e.jsx("div",{className:"font-medium capitalize",children:e.jsx(_,{variant:m.trend==="rising"?"default":"secondary",children:m.trend})})]})]}),e.jsx("div",{className:"h-[200px] mt-2 mb-4",children:e.jsx(No,{data:o,type:t})})]},n)}),e.jsxs("div",{className:"text-sm mt-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Demand:"})," ",i.demand]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Operating Hours:"})," ",i.operatingHours]})]})]})})]},i.id))})]})},wo=()=>{Ne(),ee();const[s,a]=l.useState("marketplace"),[t,r]=l.useState(""),[i,c]=l.useState(""),[n,o]=l.useState(""),[m,d]=l.useState([]),[p,j]=l.useState([]),[g,x]=l.useState(!1),N=["All Categories","Cereals","Legumes","Cash Crops","Fruits","Vegetables","Dairy","Meat"],k=["All Locations","Nairobi County","Nakuru County","Kiambu County","Meru County","Nyandarua County","Machakos County","Kisumu County"],u=async()=>{x(!0);try{if(s==="marketplace"||s==="orders"){const A=await _l();d(A)}if(s==="marketplace"||s==="price-trends"){const A=await Sl();j(A)}}catch(A){console.error("Error fetching data:",A)}finally{x(!1)}};l.useEffect(()=>{u()},[s]);const h=A=>{a(A),r(""),c("")},S=A=>{A.preventDefault(),u()},T=m.filter(A=>{const D=t===""||A.name.toLowerCase().includes(t.toLowerCase()),L=i===""||i==="All Categories"||A.category.toLowerCase()===i.toLowerCase();return D&&L});return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Agricultural Commodity Exchange"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Buy, sell, and barter agricultural commodities directly with farmers, processors, and exporters across Kenya."})]}),e.jsxs(v,{className:"mb-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Commodity Exchange Platform"}),e.jsx(B,{children:"Explore available commodities, place orders, barter goods, and track market trends"})]}),e.jsx(y,{children:e.jsxs(de,{value:s,onValueChange:h,className:"w-full",children:[e.jsxs(ce,{className:"w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-2 mb-8",children:[e.jsxs(K,{value:"marketplace",className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Marketplace"})]}),e.jsxs(K,{value:"orders",className:"flex items-center gap-2",children:[e.jsx(dn,{className:"h-4 w-4"}),e.jsx("span",{children:"Orders"})]}),e.jsxs(K,{value:"my-trades",className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{children:"My Trades"})]}),e.jsxs(K,{value:"barter-exchange",className:"flex items-center gap-2",children:[e.jsx(mn,{className:"h-4 w-4"}),e.jsx("span",{children:"Barter Exchange"})]}),e.jsxs(K,{value:"price-trends",className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"Price Trends"})]})]}),e.jsx("div",{className:"mt-2 mb-6",children:e.jsxs("form",{onSubmit:S,className:"flex flex-col md:flex-row items-end gap-4",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(I,{htmlFor:"search",className:"mb-2 block",children:"Search"}),e.jsx(M,{id:"search",placeholder:"Search commodities...",value:t,onChange:A=>r(A.target.value)})]}),e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx(I,{htmlFor:"category",className:"mb-2 block",children:"Category"}),e.jsxs(Y,{value:i,onValueChange:c,children:[e.jsx(H,{id:"category",children:e.jsx(W,{placeholder:"All Categories"})}),e.jsx(G,{children:N.map(A=>e.jsx(C,{value:A,children:A},A))})]})]}),s==="barter-exchange"&&e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx(I,{htmlFor:"location",className:"mb-2 block",children:"Location"}),e.jsxs(Y,{value:n,onValueChange:o,children:[e.jsx(H,{id:"location",children:e.jsx(W,{placeholder:"All Locations"})}),e.jsx(G,{children:k.map(A=>e.jsx(C,{value:A,children:A},A))})]})]}),e.jsx(f,{type:"submit",disabled:g,className:"mt-4 md:mt-0",children:g?"Loading...":"Search"})]})}),e.jsx(O,{value:"marketplace",className:"mt-6",children:e.jsx(xo,{isLoading:g,filteredProduce:T})}),e.jsx(O,{value:"orders",className:"mt-6",children:e.jsx(ho,{isLoading:g,searchTerm:t})}),e.jsx(O,{value:"my-trades",className:"mt-6",children:e.jsx(po,{isLoading:g,searchTerm:t})}),e.jsx(O,{value:"barter-exchange",children:e.jsx(fo,{searchTerm:t,selectedCategory:i,selectedLocation:n,isLoading:g})}),e.jsx(O,{value:"price-trends",className:"mt-6",children:e.jsx(bo,{isLoading:g,markets:p})})]})})]})]})]})},Co=()=>{const[s,a]=l.useState(""),r=[{id:"1",title:"Trade Maize for Fertilizer",offeredItem:"Maize - 10 bags (90kg each)",requestedItem:"NPK Fertilizer - 5 bags (50kg each)",location:"Nakuru County",farmerName:"John Maina",contact:"+254 700 123456",postedDate:"2024-01-15",category:"Grains"},{id:"2",title:"Beans for Transport Services",offeredItem:"Green Beans - 20 bags (50kg each)",requestedItem:"Transport to Nairobi Market",location:"Meru County",farmerName:"Mary Wanjiku",contact:"+254 701 234567",postedDate:"2024-01-14",category:"Legumes"},{id:"3",title:"Equipment Exchange",offeredItem:"Tractor Use - 2 days per month",requestedItem:"Harvester Use - 1 day",location:"Uasin Gishu County",farmerName:"Peter Kiprotich",contact:"+254 702 345678",postedDate:"2024-01-13",category:"Equipment"}].filter(i=>i.title.toLowerCase().includes(s.toLowerCase())||i.offeredItem.toLowerCase().includes(s.toLowerCase())||i.requestedItem.toLowerCase().includes(s.toLowerCase()));return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Barter Exchange"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Trade agricultural goods and services directly with other farmers without using money"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(He,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search barter opportunities...",value:s,onChange:i=>a(i.target.value),className:"pl-10"})]}),e.jsx(f,{children:"Post Barter Offer"})]})]}),e.jsx("div",{className:"grid gap-6",children:r.map(i=>e.jsxs(v,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(b,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(w,{className:"text-xl mb-2",children:i.title}),e.jsx(_,{variant:"secondary",children:i.category})]}),e.jsx("div",{className:"text-right text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"h-4 w-4"}),new Date(i.postedDate).toLocaleDateString()]})})]})}),e.jsxs(y,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-green-50",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Offering:"}),e.jsx("p",{className:"text-green-700",children:i.offeredItem})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Looking for:"}),e.jsx("p",{className:"text-blue-700",children:i.requestedItem})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:i.farmerName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:i.location})]})]}),e.jsx(f,{children:"Contact Farmer"})]})]})]},i.id))}),r.length===0&&e.jsx(v,{className:"text-center py-12",children:e.jsxs(y,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No barter opportunities found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search terms or be the first to post a barter offer!"}),e.jsx(f,{children:"Post Your First Barter Offer"})]})})]})]})},ko=()=>{const[s,a]=l.useState(""),[t,r]=l.useState(""),i=[{id:"1",name:"Premium Maize",category:"Grains",quantity:"50 bags (90kg each)",price:"KES 4,500 per bag",quality:"Grade A",location:"Kitale, Trans Nzoia",farmer:"Samuel Wekesa",contact:"+254 700 111222",rating:4.8,harvestDate:"2024-01-10",description:"Freshly harvested yellow maize, moisture content 13.5%"},{id:"2",name:"Organic Tomatoes",category:"Vegetables",quantity:"200 crates (20kg each)",price:"KES 800 per crate",quality:"Premium",location:"Naivasha, Nakuru",farmer:"Grace Muthoni",contact:"+254 701 222333",rating:4.9,harvestDate:"2024-01-12",description:"Certified organic Roma tomatoes, perfect for processing"},{id:"3",name:"French Beans",category:"Vegetables",quantity:"100 kg",price:"KES 120 per kg",quality:"Export Grade",location:"Meru County",farmer:"John Mwenda",contact:"+254 702 333444",rating:4.7,harvestDate:"2024-01-13",description:"Export quality French beans, ready for immediate delivery"}],c=i.filter(o=>{const m=o.name.toLowerCase().includes(s.toLowerCase())||o.category.toLowerCase().includes(s.toLowerCase()),d=!t||o.category===t;return m&&d}),n=Array.from(new Set(i.map(o=>o.category)));return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Agricultural Marketplace"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Buy fresh agricultural produce directly from verified farmers"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(He,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search produce...",value:s,onChange:o=>a(o.target.value),className:"pl-10"})]}),e.jsxs(Y,{value:t,onValueChange:r,children:[e.jsx(H,{className:"w-full sm:w-48",children:e.jsx(W,{placeholder:"All Categories"})}),e.jsxs(G,{children:[e.jsx(C,{value:"",children:"All Categories"}),n.map(o=>e.jsx(C,{value:o,children:o},o))]})]}),e.jsxs(f,{variant:"outline",children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),e.jsx("div",{className:"grid gap-6",children:c.map(o=>e.jsxs(v,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(b,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(w,{className:"text-xl mb-2",children:o.name}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(_,{variant:"secondary",children:o.category}),e.jsx(_,{variant:"default",children:o.quality})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:o.price}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Available: ",o.quantity]})]})]})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:o.description}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(se,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:o.location})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(as,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:o.farmer})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-sm",children:[o.rating,"/5.0"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Harvest Date:"}),e.jsx("div",{className:"text-sm font-medium mb-2",children:new Date(o.harvestDate).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Freshness:"}),e.jsx(_,{variant:"outline",className:"text-green-600 border-green-600",children:"Fresh (2 days)"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(f,{className:"flex-1",children:"Contact Farmer"}),e.jsx(f,{variant:"outline",children:"Add to Cart"}),e.jsx(f,{variant:"outline",children:"Request Quote"})]})]})]},o.id))}),c.length===0&&e.jsx(v,{className:"text-center py-12",children:e.jsxs(y,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No produce found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search criteria to find what you're looking for."})]})})]})]})},So=()=>{var p,j;const[s,a]=l.useState("maize"),[t,r]=l.useState("6months"),i={maize:[{month:"Jul 2023",price:4200,market:"Average"},{month:"Aug 2023",price:4350,market:"Average"},{month:"Sep 2023",price:4100,market:"Average"},{month:"Oct 2023",price:4500,market:"Average"},{month:"Nov 2023",price:4800,market:"Average"},{month:"Dec 2023",price:4650,market:"Average"},{month:"Jan 2024",price:4400,market:"Average"}],beans:[{month:"Jul 2023",price:8500,market:"Average"},{month:"Aug 2023",price:9200,market:"Average"},{month:"Sep 2023",price:8800,market:"Average"},{month:"Oct 2023",price:9500,market:"Average"},{month:"Nov 2023",price:10200,market:"Average"},{month:"Dec 2023",price:9800,market:"Average"},{month:"Jan 2024",price:9400,market:"Average"}]},c=i[s]||i.maize,n=((p=c[c.length-1])==null?void 0:p.price)||0,o=((j=c[c.length-2])==null?void 0:j.price)||0,m=n-o,d=o?(m/o*100).toFixed(1):"0";return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Price Trends Analysis"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Track historical price movements and market trends for agricultural commodities"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs(Y,{value:s,onValueChange:a,children:[e.jsx(H,{className:"w-full sm:w-48",children:e.jsx(W,{placeholder:"Select Commodity"})}),e.jsxs(G,{children:[e.jsx(C,{value:"maize",children:"Maize"}),e.jsx(C,{value:"beans",children:"Beans"}),e.jsx(C,{value:"wheat",children:"Wheat"}),e.jsx(C,{value:"rice",children:"Rice"})]})]}),e.jsxs(Y,{value:t,onValueChange:r,children:[e.jsx(H,{className:"w-full sm:w-48",children:e.jsx(W,{placeholder:"Select Period"})}),e.jsxs(G,{children:[e.jsx(C,{value:"3months",children:"Last 3 Months"}),e.jsx(C,{value:"6months",children:"Last 6 Months"}),e.jsx(C,{value:"1year",children:"Last Year"}),e.jsx(C,{value:"2years",children:"Last 2 Years"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium",children:"Current Price"})}),e.jsxs(y,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",n.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"per 90kg bag"})]})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium",children:"Price Change"})}),e.jsxs(y,{children:[e.jsxs("div",{className:`text-2xl font-bold flex items-center gap-2 ${m>=0?"text-green-600":"text-red-600"}`,children:[m>=0?e.jsx(me,{className:"h-5 w-5"}):e.jsx(ea,{className:"h-5 w-5"}),m>=0?"+":"","KES ",m.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[m>=0?"+":"",d,"% from last month"]})]})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium",children:"Market Outlook"})}),e.jsxs(y,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"Stable"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Based on seasonal trends"})]})]})]}),e.jsxs(v,{className:"mb-8",children:[e.jsx(b,{children:e.jsx(w,{children:"Price Trend Chart"})}),e.jsx(y,{children:e.jsx(be,{width:"100%",height:400,children:e.jsxs(ft,{data:c,children:[e.jsx(ze,{strokeDasharray:"3 3"}),e.jsx(Oe,{dataKey:"month"}),e.jsx(Be,{}),e.jsx(we,{formatter:g=>[`KES ${g.toLocaleString()}`,"Price"]}),e.jsx(rs,{}),e.jsx(Ue,{type:"monotone",dataKey:"price",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb",strokeWidth:2,r:4},name:"Price (KES per 90kg bag)"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Market Analysis"})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Key Factors Affecting Prices:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"â€¢ Seasonal demand patterns"}),e.jsx("li",{children:"â€¢ Weather conditions and rainfall"}),e.jsx("li",{children:"â€¢ Input costs (fertilizer, fuel)"}),e.jsx("li",{children:"â€¢ Regional supply and demand"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Price Forecast:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Prices expected to remain stable over the next month, with potential increase during dry season (March-May)."})]})]})})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Regional Price Comparison"})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{className:"text-sm",children:"Nairobi Market"}),e.jsx("span",{className:"font-medium",children:"KES 4,600"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{className:"text-sm",children:"Nakuru Market"}),e.jsx("span",{className:"font-medium",children:"KES 4,200"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{className:"text-sm",children:"Kitale Market"}),e.jsx("span",{className:"font-medium",children:"KES 3,900"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{className:"text-sm",children:"Mombasa Market"}),e.jsx("span",{className:"font-medium",children:"KES 4,800"})]})]})})]})]})]})]})},_o=()=>{const[s,a]=l.useState("active"),t=[{id:"1",type:"sale",commodity:"Maize",quantity:"50 bags (90kg each)",price:"KES 4,500 per bag",buyer:"Nakuru Grain Millers",status:"confirmed",deliveryDate:"2024-01-20",totalValue:"KES 225,000"},{id:"2",type:"purchase",commodity:"NPK Fertilizer",quantity:"20 bags (50kg each)",price:"KES 3,200 per bag",seller:"Agro-Supplies Ltd",status:"pending",deliveryDate:"2024-01-18",totalValue:"KES 64,000"}],r=[{id:"3",type:"sale",commodity:"French Beans",quantity:"200 kg",price:"KES 120 per kg",buyer:"Export Company Ltd",status:"completed",completedDate:"2024-01-10",totalValue:"KES 24,000"},{id:"4",type:"purchase",commodity:"Seeds - Maize",quantity:"10 kg",price:"KES 450 per kg",seller:"Kenya Seed Company",status:"completed",completedDate:"2024-01-05",totalValue:"KES 4,500"}],i=n=>{switch(n){case"confirmed":return"default";case"pending":return"secondary";case"completed":return"default";case"cancelled":return"destructive";default:return"secondary"}},c=n=>n==="sale"?"text-green-600":"text-blue-600";return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"My Trades"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Track and manage your agricultural trading activities"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium",children:"Active Trades"})}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold",children:"2"})})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium",children:"Total Value (Active)"})}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold",children:"KES 289,000"})})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium",children:"Completed This Month"})}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold",children:"2"})})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium",children:"Success Rate"})}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"95%"})})]})]})]}),e.jsxs(de,{value:s,onValueChange:a,className:"w-full",children:[e.jsxs(ce,{className:"grid w-full grid-cols-3",children:[e.jsx(K,{value:"active",children:"Active Trades"}),e.jsx(K,{value:"completed",children:"Completed"}),e.jsx(K,{value:"analytics",children:"Analytics"})]}),e.jsx(O,{value:"active",className:"space-y-6",children:t.map(n=>e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(w,{className:"flex items-center gap-2 mb-2",children:[e.jsx(ke,{className:"h-5 w-5"}),n.commodity,e.jsx(_,{variant:"outline",className:c(n.type),children:n.type==="sale"?"Selling":"Buying"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:n.type==="sale"?`Buyer: ${n.buyer}`:`Seller: ${n.seller}`})]}),e.jsx(_,{variant:i(n.status),children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})]})}),e.jsxs(y,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Quantity"}),e.jsx("div",{className:"font-medium",children:n.quantity})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("div",{className:"font-medium",children:n.price})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Delivery Date"}),e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4"}),new Date(n.deliveryDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Value"}),e.jsx("div",{className:"font-medium text-lg",children:n.totalValue})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(f,{size:"sm",children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Contact ",n.type==="sale"?"Buyer":"Seller"]})]})]})]},n.id))}),e.jsx(O,{value:"completed",className:"space-y-6",children:r.map(n=>e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(w,{className:"flex items-center gap-2 mb-2",children:[e.jsx(ke,{className:"h-5 w-5"}),n.commodity,e.jsx(_,{variant:"outline",className:c(n.type),children:n.type==="sale"?"Sold":"Purchased"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:n.type==="sale"?`Buyer: ${n.buyer}`:`Seller: ${n.seller}`})]}),e.jsx(_,{variant:"default",children:"Completed"})]})}),e.jsx(y,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Quantity"}),e.jsx("div",{className:"font-medium",children:n.quantity})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("div",{className:"font-medium",children:n.price})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed Date"}),e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4"}),new Date(n.completedDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Value"}),e.jsx("div",{className:"font-medium text-lg",children:n.totalValue})]})]})})]},n.id))}),e.jsx(O,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Trading Summary"]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Trades This Year"}),e.jsx("span",{className:"font-medium",children:"24"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Sales Value"}),e.jsx("span",{className:"font-medium text-green-600",children:"KES 1,250,000"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Purchases"}),e.jsx("span",{className:"font-medium text-blue-600",children:"KES 340,000"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Net Profit"}),e.jsx("span",{className:"font-medium text-primary",children:"KES 910,000"})]})]})})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Top Commodities Traded"})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Maize"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full w-3/4"})}),e.jsx("span",{className:"text-sm",children:"12 trades"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"French Beans"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full w-1/2"})}),e.jsx("span",{className:"text-sm",children:"8 trades"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Fertilizer"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full w-1/4"})}),e.jsx("span",{className:"text-sm",children:"4 trades"})]})]})]})})]})]})})]})]})]})},Ao=()=>{const[s,a]=l.useState(""),[t,r]=l.useState("all"),i=[{id:"all",name:"All Categories",count:156},{id:"crop-management",name:"Crop Management",count:45},{id:"pest-control",name:"Pest & Disease Control",count:32},{id:"market-prices",name:"Market Prices",count:28},{id:"farming-techniques",name:"Farming Techniques",count:51}],n=[{id:"1",title:"Best practices for maize farming in dry season",category:"crop-management",author:"John Mwangi",authorAvatar:"/avatars/john.jpg",timeAgo:"2 hours ago",replies:12,likes:24,excerpt:"Looking for advice on irrigation methods and drought-resistant varieties...",tags:["maize","irrigation","drought"]},{id:"2",title:"Current market prices for French beans in Nairobi",category:"market-prices",author:"Mary Wanjiku",authorAvatar:"/avatars/mary.jpg",timeAgo:"5 hours ago",replies:8,likes:15,excerpt:"Has anyone sold French beans in Nairobi recently? What are the current rates?",tags:["french-beans","nairobi","prices"]},{id:"3",title:"Organic pest control methods for tomatoes",category:"pest-control",author:"Peter Kiprotich",authorAvatar:"/avatars/peter.jpg",timeAgo:"1 day ago",replies:18,likes:32,excerpt:"Share your experience with natural pest control methods that actually work...",tags:["tomatoes","organic","pest-control"]},{id:"4",title:"Greenhouse farming setup and costs",category:"farming-techniques",author:"Sarah Ochieng",authorAvatar:"/avatars/sarah.jpg",timeAgo:"2 days ago",replies:25,likes:41,excerpt:"Planning to set up a greenhouse. What are the initial costs and best practices?",tags:["greenhouse","setup","investment"]}].filter(o=>{const m=o.title.toLowerCase().includes(s.toLowerCase())||o.excerpt.toLowerCase().includes(s.toLowerCase()),d=t==="all"||o.category===t;return m&&d});return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Community Forums"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Connect with fellow farmers, share knowledge, and get expert advice"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(He,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search discussions...",value:s,onChange:o=>a(o.target.value),className:"pl-10"})]}),e.jsx(f,{children:"Start New Discussion"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Categories"})}),e.jsx(y,{children:e.jsx("div",{className:"space-y-2",children:i.map(o=>e.jsx("button",{onClick:()=>r(o.id),className:`w-full text-left p-3 rounded-lg transition-colors ${t===o.id?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:o.name}),e.jsx(_,{variant:"secondary",className:"text-xs",children:o.count})]})},o.id))})})]}),e.jsxs(v,{className:"mt-6",children:[e.jsx(b,{children:e.jsx(w,{children:"Forum Stats"})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Posts"}),e.jsx("span",{className:"font-medium",children:"1,247"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Members"}),e.jsx("span",{className:"font-medium",children:"3,456"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"New Today"}),e.jsx("span",{className:"font-medium",children:"23"})]})]})})]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("div",{className:"space-y-6",children:n.map(o=>e.jsxs(v,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(b,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(w,{className:"text-lg mb-2 hover:text-primary cursor-pointer",children:o.title}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:o.tags.map(m=>e.jsx(_,{variant:"outline",className:"text-xs",children:m},m))}),e.jsx("p",{className:"text-muted-foreground text-sm mb-3",children:o.excerpt})]})})}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ls,{className:"h-8 w-8",children:[e.jsx(bs,{src:o.authorAvatar}),e.jsx(cs,{children:o.author.split(" ").map(m=>m[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:o.author}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Ce,{className:"h-3 w-3"}),o.timeAgo]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(un,{className:"h-4 w-4"}),o.likes]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Ke,{className:"h-4 w-4"}),o.replies]}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(xn,{className:"h-4 w-4 mr-2"}),"Reply"]})]})]})})]},o.id))}),n.length===0&&e.jsx(v,{className:"text-center py-12",children:e.jsxs(y,{children:[e.jsx(Ke,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No discussions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search or be the first to start a discussion in this category!"}),e.jsx(f,{children:"Start New Discussion"})]})})]})]})]})]})},Po=()=>{var N;const{user:s}=Xe(),{toast:a}=ee(),[t,r]=l.useState({monthlyRevenue:0,totalArea:0,averageYield:0,activeAlerts:0}),[i,c]=l.useState([]),[n,o]=l.useState(null),[m,d]=l.useState(!0);l.useEffect(()=>{s&&p()},[s]);const p=async()=>{try{d(!0);const{data:k,error:u}=await P.from("farm_statistics").select("*").eq("user_id",s==null?void 0:s.id).single();u&&u.code!=="PGRST116"&&console.error("Error fetching farm stats:",u),k&&r({monthlyRevenue:k.monthly_revenue||0,totalArea:k.total_area||0,averageYield:k.average_yield||0,activeAlerts:k.active_alerts||0});const{data:h,error:S}=await P.from("farm_tasks").select("*").eq("user_id",s==null?void 0:s.id).order("created_at",{ascending:!1}).limit(5);S?console.error("Error fetching tasks:",S):c(h||[]);const{data:T,error:A}=await P.from("profiles").select("*").eq("id",s==null?void 0:s.id).single();A&&A.code!=="PGRST116"&&console.error("Error fetching profile:",A),T&&o(T)}catch(k){console.error("Error fetching dashboard data:",k),a({title:"Error",description:"Failed to load dashboard data",variant:"destructive"})}finally{d(!1)}},j=async(k,u)=>{try{const{error:h}=await P.from("farm_tasks").update({status:u}).eq("id",k).eq("user_id",s==null?void 0:s.id);if(h)throw h;c(i.map(S=>S.id===k?{...S,status:u}:S)),a({title:"Success",description:"Task status updated successfully!"})}catch(h){console.error("Error updating task:",h),a({title:"Error",description:"Failed to update task",variant:"destructive"})}},g=k=>{switch(k){case"completed":return e.jsx(le,{className:"h-4 w-4 text-green-600"});case"in-progress":return e.jsx(Yt,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(ve,{className:"h-4 w-4 text-red-600"})}},x=k=>{switch(k){case"high":return"destructive";case"medium":return"secondary";default:return"outline"}};return m?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((k,u)=>e.jsx(v,{className:"animate-pulse",children:e.jsxs(y,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})},u))}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2",children:["Welcome back, ",(n==null?void 0:n.full_name)||((N=s==null?void 0:s.email)==null?void 0:N.split("@")[0])||"Farmer","!"]}),e.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening on your farm today."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Monthly Revenue"}),e.jsx(De,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(y,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",t.monthlyRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(me,{className:"inline h-3 w-3 mr-1"}),"Track your earnings"]})]})]}),e.jsxs(v,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Total Farm Area"}),e.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(y,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[t.totalArea," acres"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your farmland"})]})]}),e.jsxs(v,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Average Yield"}),e.jsx(hn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(y,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[t.averageYield," kg/acre"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Production efficiency"})]})]}),e.jsxs(v,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Active Alerts"}),e.jsx(ve,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.activeAlerts}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Weather & market alerts"})]})]})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),"Recent Farm Tasks"]})}),e.jsx(y,{children:i.length===0?e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(Ce,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No tasks found. Start by adding your first farm task!"})]}):e.jsx("div",{className:"space-y-4",children:i.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[g(k.status),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:k.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[k.crop," â€¢ ",k.date]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:x(k.priority),children:k.priority}),k.status==="pending"&&e.jsx(f,{size:"sm",variant:"outline",onClick:()=>j(k.id,"completed"),children:"Mark Complete"})]})]},k.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(v,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Weather Forecast"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Check today's weather and upcoming conditions"}),e.jsx(f,{variant:"outline",size:"sm",className:"w-full",children:"View Weather"})]}),e.jsxs(v,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Market Prices"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Current commodity prices in your region"}),e.jsx(f,{variant:"outline",size:"sm",className:"w-full",children:"Check Prices"})]}),e.jsxs(v,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Add New Task"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Schedule upcoming farm activities"}),e.jsx(f,{size:"sm",className:"w-full",children:"Create Task"})]})]})]})},Zr=gn,Xr=jn,To=pn,ei=l.forwardRef(({className:s,...a},t)=>e.jsx(fr,{className:q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));ei.displayName=fr.displayName;const la=l.forwardRef(({className:s,...a},t)=>e.jsxs(To,{children:[e.jsx(ei,{}),e.jsx(vr,{ref:t,className:q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]}));la.displayName=vr.displayName;const ca=({className:s,...a})=>e.jsx("div",{className:q("flex flex-col space-y-2 text-center sm:text-left",s),...a});ca.displayName="AlertDialogHeader";const oa=({className:s,...a})=>e.jsx("div",{className:q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});oa.displayName="AlertDialogFooter";const da=l.forwardRef(({className:s,...a},t)=>e.jsx(yr,{ref:t,className:q("text-lg font-semibold",s),...a}));da.displayName=yr.displayName;const ma=l.forwardRef(({className:s,...a},t)=>e.jsx(Nr,{ref:t,className:q("text-sm text-muted-foreground",s),...a}));ma.displayName=Nr.displayName;const ua=l.forwardRef(({className:s,...a},t)=>e.jsx(br,{ref:t,className:q(Ks(),s),...a}));ua.displayName=br.displayName;const xa=l.forwardRef(({className:s,...a},t)=>e.jsx(wr,{ref:t,className:q(Ks({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));xa.displayName=wr.displayName;const Io=({userProduce:s,onDeleteProduce:a,onEditProduce:t})=>{const{toast:r}=ee(),i=n=>{a(n.id),r({title:"Produit supprimÃ©",description:`${n.name} a Ã©tÃ© supprimÃ© de vos annonces.`})},c=n=>{switch(n.toLowerCase()){case"a":return"bg-green-100 text-green-800 border-green-200";case"b":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"c":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5 text-green-600"}),"Mes Produits en Vente"]})}),e.jsx(y,{children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ke,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Aucun produit en vente"}),e.jsx(f,{className:"mt-4",children:"Ajouter un produit"})]}):e.jsx("div",{className:"space-y-4",children:s.map(n=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:n.name}),e.jsx("p",{className:"text-muted-foreground",children:n.category})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{className:c(n.qualityGrade),children:["Grade ",n.qualityGrade]}),e.jsx(_,{variant:"outline",children:n.county})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"QuantitÃ©"}),e.jsxs("p",{className:"font-medium",children:[n.quantity," ",n.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Disponible dÃ¨s"}),e.jsx("p",{className:"font-medium",children:n.availableFrom})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Agriculteur"}),e.jsx("p",{className:"font-medium",children:n.farmer})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ID Produit"}),e.jsxs("p",{className:"font-medium text-xs",children:[n.id.slice(0,8),"..."]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(f,{size:"sm",variant:"outline",children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Voir"]}),e.jsxs(f,{size:"sm",variant:"outline",onClick:()=>t(n),children:[e.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Modifier"]}),e.jsxs(Zr,{children:[e.jsx(Xr,{asChild:!0,children:e.jsxs(f,{size:"sm",variant:"destructive",children:[e.jsx(fn,{className:"h-4 w-4 mr-2"}),"Supprimer"]})}),e.jsxs(la,{children:[e.jsxs(ca,{children:[e.jsx(da,{children:"Confirmer la suppression"}),e.jsxs(ma,{children:['ÃŠtes-vous sÃ»r de vouloir supprimer "',n.name,'" de vos annonces ? Cette action est irrÃ©versible et supprimera dÃ©finitivement votre produit de la marketplace.']})]}),e.jsxs(oa,{children:[e.jsx(xa,{children:"Annuler"}),e.jsx(ua,{onClick:()=>i(n),className:"bg-red-600 hover:bg-red-700",children:"Supprimer dÃ©finitivement"})]})]})]})]})]},n.id))})})]})},Mo=({selectedParcel:s})=>{var m,d;const a=l.useRef(null),t=l.useRef(null),[r,i]=l.useState(""),[c,n]=l.useState(!1),o=async()=>{if(!(!a.current||!r))try{const p=await Rs(()=>import("./vendor-CJAKlkPp.js").then(j=>j.m),__vite__mapDeps([0,1]));if(await Rs(()=>import("./vendor-CJAKlkPp.js").then(j=>j.cO),__vite__mapDeps([0,1])),p.default.accessToken=r,t.current=new p.default.Map({container:a.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:(s==null?void 0:s.coordinates)||[36.8219,-1.2921],zoom:s?15:6}),t.current.addControl(new p.default.NavigationControl,"top-right"),t.current.addControl(new p.default.FullscreenControl,"top-right"),t.current.addControl(new p.default.ScaleControl({maxWidth:100,unit:"metric"})),s!=null&&s.coordinates){const j=document.createElement("div");j.className="custom-marker",j.style.backgroundImage="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQiIGZpbGw9IiMyMmMzNWUiIHN0cm9rZT0iIzE2YTM0YSIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjYiIGZpbGw9IiNmZmZmZmYiLz4KPC9zdmc+)",j.style.width="32px",j.style.height="32px",j.style.backgroundSize="100%",new p.default.Marker(j).setLngLat(s.coordinates).setPopup(new p.default.Popup({offset:25}).setHTML(`<div class="p-2">
                <h3 class="font-bold text-sm">${s.name}</h3>
                <p class="text-xs text-gray-600">Size: ${s.size} acres</p>
                <p class="text-xs text-gray-600">Crop: ${s.crop}</p>
                <p class="text-xs text-green-600 mt-1">Coordinates: ${s.coordinates[1].toFixed(4)}, ${s.coordinates[0].toFixed(4)}</p>
              </div>`)).addTo(t.current),t.current.on("load",()=>{const g=Math.sqrt(s.size*4047)/2;t.current.addSource("farm-area",{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:s.coordinates}}}),t.current.addLayer({id:"farm-area-circle",type:"circle",source:"farm-area",paint:{"circle-radius":{base:1.75,stops:[[12,Math.max(5,g/100)],[22,Math.max(10,g/10)]]},"circle-color":"#22c55e","circle-opacity":.3,"circle-stroke-color":"#16a34a","circle-stroke-width":2,"circle-stroke-opacity":.8}})})}n(!0)}catch(p){console.error("Error loading Mapbox:",p)}};return l.useEffect(()=>(r&&o(),()=>{t.current&&t.current.remove()}),[r,s]),r?e.jsxs(v,{className:"h-full",children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Farm Map",s&&` - ${s.name}`]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"secondary",className:"text-xs",children:"Satellite View"}),s&&e.jsxs(_,{variant:"default",className:"text-xs",children:[s.size," acres"]})]})]}),e.jsxs(y,{className:"p-0 relative",children:[e.jsx("div",{ref:a,className:"h-[400px] w-full rounded-b-lg"}),!c&&r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 rounded-b-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading satellite imagery..."})]})}),c&&s&&e.jsx("div",{className:"absolute bottom-4 left-4 bg-white p-2 rounded shadow-lg",children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-gray-600",children:["ðŸ“ ",(m=s.coordinates)==null?void 0:m[1].toFixed(4),", ",(d=s.coordinates)==null?void 0:d[0].toFixed(4)]}),e.jsxs("div",{className:"text-green-600",children:["ðŸŒ¾ ",s.crop]})]})})]})]}):e.jsxs(v,{className:"h-full",children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Farm Map"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Cr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:"Mapbox Integration"}),e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Mapbox provides free tier access with 50,000 map loads per month. Their technology is open-source and designed for agricultural applications."}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Free tier: 50,000 requests/month"}),e.jsx("li",{children:"â€¢ High-resolution satellite imagery"}),e.jsx("li",{children:"â€¢ Offline map capabilities"}),e.jsx("li",{children:"â€¢ Custom styling and agricultural overlays"})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Mapbox Public Token"}),e.jsx(M,{type:"password",placeholder:"pk.eyJ1IjoieW91ciUyMHVzZXJuYW1lIiwi...",value:r,onChange:p=>i(p.target.value)}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("p",{children:["Get your free token from"," ",e.jsx("a",{href:"https://mapbox.com/",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600",children:"mapbox.com"})]}),e.jsx("p",{children:"â€¢ Create account â†’ Account â†’ Tokens â†’ Create new token"}),e.jsx("p",{children:'â€¢ Ensure "Public" scopes are enabled for web use'})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",className:"text-xs",children:"Free Tier Available"}),e.jsx(_,{variant:"outline",className:"text-xs",children:"Open Source"}),e.jsx(_,{variant:"outline",className:"text-xs",children:"Agricultural Ready"})]})]})]})},Do=()=>{const[s]=l.useState([{id:"1",name:"Nakuru North",size:12.5,crop:"Maize",status:"active",lastHarvest:"8/15/2023",harvestIn:76,coordinates:[36.0667,-.3031]},{id:"2",name:"Kiambu South",size:8.3,crop:"Coffee",status:"active",lastHarvest:"6/10/2023",harvestIn:120,coordinates:[36.8356,-1.1743]},{id:"3",name:"Meru East",size:5.2,crop:"Beans",status:"active",lastHarvest:"9/20/2023",harvestIn:45,coordinates:[37.6573,.0472]}]),[a,t]=l.useState(""),[r,i]=l.useState(),c=s.filter(n=>n.name.toLowerCase().includes(a.toLowerCase())||n.crop.toLowerCase().includes(a.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Land & Parcel Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor all your agricultural parcels across Kenya"})]}),e.jsxs(f,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add New Parcel"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(M,{placeholder:"Search parcels...",value:a,onChange:n=>t(n.target.value),className:"max-w-sm"}),e.jsxs("select",{className:"px-3 py-2 border rounded-md",children:[e.jsx("option",{children:"All Status"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Inactive"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:c.map(n=>e.jsxs(v,{className:`border-l-4 border-l-green-500 cursor-pointer transition-all hover:shadow-md ${(r==null?void 0:r.id)===n.id?"ring-2 ring-primary":""}`,onClick:()=>i(n),children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(w,{className:"text-lg",children:n.name}),e.jsx(_,{variant:n.status==="active"?"default":"secondary",className:"mt-1",children:n.status==="active"?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:"outline",children:e.jsx(Zt,{className:"h-4 w-4"})}),e.jsx(f,{size:"sm",variant:"outline",children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx(f,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:e.jsx(vt,{className:"h-4 w-4"})})]})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Size:"}),e.jsxs("span",{className:"font-medium",children:[n.size," acres"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last harvest:"}),e.jsx("span",{children:n.lastHarvest})]}),e.jsxs("div",{className:"mt-3 p-2 bg-green-50 rounded",children:[e.jsx("div",{className:"text-sm font-medium text-green-800",children:n.crop}),e.jsxs("div",{className:"text-xs text-green-600",children:["Next harvest in: ",n.harvestIn," days"]})]})]})})]},n.id))}),e.jsx("div",{className:"space-y-4",children:e.jsx(Mo,{selectedParcel:r})})]})]})},Eo=()=>{const[s]=l.useState([{id:"1",name:"Maize",currentYield:25,previousYield:20,unit:"bags/acre",quality:"Good",surface:12500},{id:"2",name:"Coffee",currentYield:15,previousYield:12,unit:"kg/tree",quality:"Excellent",surface:2300},{id:"3",name:"Beans",currentYield:8,previousYield:10,unit:"bags/acre",quality:"Good",surface:3500},{id:"4",name:"Potatoes",currentYield:180,previousYield:150,unit:"bags/acre",quality:"Average",surface:4200},{id:"5",name:"Tea",currentYield:2200,previousYield:2e3,unit:"kg/ha",quality:"Good",surface:1800}]),a=s.map(r=>({name:r.name,"Current Yield":r.currentYield,"Previous Yield":r.previousYield})),t=r=>{switch(r){case"Excellent":return"bg-green-100 text-green-800";case"Good":return"bg-blue-100 text-blue-800";case"Average":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Crop Management & Tracking"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your crop yields and quality for major Kenyan agricultural products"})]}),e.jsxs(f,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add New Crop"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(vn,{className:"h-5 w-5 text-blue-500"}),"Yield Tracking for Kenyan Crops"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor yields and quality for major crops grown in Kenya"})]}),e.jsx(y,{children:e.jsx("div",{className:"h-64 w-full",children:e.jsx(be,{width:"100%",height:"100%",children:e.jsxs(Ns,{data:a,children:[e.jsx(ze,{strokeDasharray:"3 3"}),e.jsx(Oe,{dataKey:"name",tick:{fontSize:12}}),e.jsx(Be,{}),e.jsx(we,{}),e.jsx(Me,{dataKey:"Current Yield",fill:"#22c55e"}),e.jsx(Me,{dataKey:"Previous Yield",fill:"#7c2d12"})]})})})})]}),e.jsx("div",{className:"space-y-4",children:s.map(r=>e.jsx(v,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Area: ",r.surface," mÂ²"]})]}),e.jsx(f,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:e.jsx(vt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Current yield"}),e.jsxs("span",{className:"font-medium",children:[r.currentYield," ",r.unit]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Previous yield"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.previousYield," ",r.unit]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Quality"}),e.jsx(_,{className:t(r.quality),children:r.quality})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(me,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-green-600",children:["+",((r.currentYield-r.previousYield)/r.previousYield*100).toFixed(1),"%"]})]})]})]})},r.id))})]})]})},Fo=()=>{const[s]=l.useState([{id:"1",name:"Diesel Fuel",category:"Fuel",quantity:350,unit:"L",unitPrice:150,totalValue:52500,status:"normal",minimum:100},{id:"2",name:"NPK Fertilizer",category:"Fertilizers",quantity:800,unit:"kg",unitPrice:80,totalValue:64e3,status:"normal",minimum:200},{id:"3",name:"Maize Seeds",category:"Seeds",quantity:150,unit:"kg",unitPrice:300,totalValue:45e3,status:"normal",minimum:50},{id:"4",name:"Roundup Herbicide",category:"Pesticides",quantity:50,unit:"L",unitPrice:1200,totalValue:6e4,status:"normal",minimum:20},{id:"5",name:"Engine Oil",category:"Lubricants",quantity:25,unit:"L",unitPrice:800,totalValue:2e4,status:"normal",minimum:10},{id:"6",name:"Bean Seeds",category:"Seeds",quantity:80,unit:"kg",unitPrice:400,totalValue:32e3,status:"warning",minimum:100},{id:"7",name:"Coffee Seedlings",category:"Planting Material",quantity:500,unit:"pieces",unitPrice:25,totalValue:12500,status:"normal",minimum:200}]),[a,t]=l.useState(""),[r,i]=l.useState("All Categories"),c=["All Categories",...Array.from(new Set(s.map(d=>d.category)))],n=s.filter(d=>{const p=d.name.toLowerCase().includes(a.toLowerCase()),j=r==="All Categories"||d.category===r;return p&&j}),o=s.filter(d=>d.quantity<=d.minimum),m=d=>{switch(d){case"critical":return e.jsx(_,{variant:"destructive",children:"Critical"});case"warning":return e.jsx(_,{className:"bg-yellow-100 text-yellow-800",children:"Warning"});default:return e.jsx(_,{className:"bg-green-100 text-green-800",children:"Normal"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Inventory & Stock Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your farm inventory and track stock levels for Kenyan agricultural operations"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{variant:"outline",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Import"]}),e.jsxs(f,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add Stock Item"]})]})]}),o.length>0&&e.jsxs(v,{className:"border-yellow-200 bg-yellow-50",children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2 text-yellow-800",children:[e.jsx(ve,{className:"h-5 w-5"}),"Low Stock Alerts"]})}),e.jsx(y,{children:e.jsx("div",{className:"space-y-2",children:o.map(d=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"font-medium",children:d.name}),e.jsxs("div",{children:[e.jsxs("span",{children:["Current stock: ",d.quantity]}),e.jsxs("span",{className:"text-muted-foreground ml-2",children:["Minimum: ",d.minimum]})]})]},d.id))})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(M,{placeholder:"Search inventory...",value:a,onChange:d=>t(d.target.value),className:"max-w-sm"}),e.jsx("select",{value:r,onChange:d=>i(d.target.value),className:"px-3 py-2 border rounded-md",children:c.map(d=>e.jsx("option",{value:d,children:d},d))}),e.jsxs(f,{variant:"outline",children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"Filter by date"]})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(w,{children:"Stock Management"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:"outline",children:"List"}),e.jsx(f,{size:"sm",variant:"outline",children:"Statistics"}),e.jsx(f,{size:"sm",variant:"outline",children:"Export"}),e.jsx(f,{size:"sm",variant:"outline",children:"Import"}),e.jsxs(f,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your inventory and track stock levels"})]}),e.jsx(y,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Us,{children:[e.jsx(Vs,{children:e.jsxs(Ge,{children:[e.jsx(re,{children:"Item"}),e.jsx(re,{children:"Category"}),e.jsx(re,{children:"Quantity"}),e.jsx(re,{children:"Unit Price"}),e.jsx(re,{children:"Total Value"}),e.jsx(re,{children:"Status"}),e.jsx(re,{children:"Actions"})]})}),e.jsx(Hs,{children:n.map(d=>e.jsxs(Ge,{children:[e.jsx(ie,{className:"font-medium",children:d.name}),e.jsx(ie,{children:d.category}),e.jsxs(ie,{children:[d.quantity," ",d.unit]}),e.jsxs(ie,{children:["KES ",d.unitPrice.toFixed(2)]}),e.jsxs(ie,{children:["KES ",d.totalValue.toFixed(2)]}),e.jsx(ie,{children:m(d.status)}),e.jsx(ie,{children:e.jsx(f,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:e.jsx(vt,{className:"h-4 w-4"})})})]},d.id))})]})})})]})]})},Lo=()=>{const[s,a]=l.useState(""),[t,r]=l.useState(""),[i,c]=l.useState(!1),{toast:n}=ee(),o=async()=>{if(!s||!t){n({title:"Missing Information",description:"Please select both report type and period",variant:"destructive"});return}c(!0),setTimeout(()=>{const m={reportType:s,period:t,generatedAt:new Date().toISOString(),data:{totalRevenue:8900,totalExpenses:4720,netProfit:4180,activeParcels:3,totalArea:26,averageYield:2.3}},d=`Report Type,${s}
Period,${t}
Generated At,${new Date().toLocaleString()}

Financial Summary
Total Revenue,KES ${m.data.totalRevenue.toLocaleString()}
Total Expenses,KES ${m.data.totalExpenses.toLocaleString()}
Net Profit,KES ${m.data.netProfit.toLocaleString()}

Farm Summary
Active Parcels,${m.data.activeParcels}
Total Area,${m.data.totalArea} acres
Average Yield,${m.data.averageYield} t/ha`,p=new Blob([d],{type:"text/csv"}),j=window.URL.createObjectURL(p),g=document.createElement("a");g.href=j,g.download=`farm-report-${s}-${t}-${new Date().getTime()}.csv`,g.click(),window.URL.revokeObjectURL(j),c(!1),n({title:"Report Generated",description:"Your farm report has been downloaded successfully"})},2e3)};return e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"h-5 w-5"}),"Generate Reports"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Report Type"}),e.jsxs(Y,{value:s,onValueChange:a,children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Select report type"})}),e.jsxs(G,{children:[e.jsx(C,{value:"financial",children:"Financial Report"}),e.jsx(C,{value:"production",children:"Production Report"}),e.jsx(C,{value:"inventory",children:"Inventory Report"}),e.jsx(C,{value:"comprehensive",children:"Comprehensive Report"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Period"}),e.jsxs(Y,{value:t,onValueChange:r,children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Select period"})}),e.jsxs(G,{children:[e.jsx(C,{value:"current-month",children:"Current Month"}),e.jsx(C,{value:"last-month",children:"Last Month"}),e.jsx(C,{value:"quarter",children:"This Quarter"}),e.jsx(C,{value:"year",children:"This Year"}),e.jsx(C,{value:"custom",children:"Custom Range"})]})]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(f,{onClick:o,disabled:i||!s||!t,className:"flex-1",children:[i?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}):e.jsx(yn,{className:"h-4 w-4 mr-2"}),i?"Generating...":"Generate Report"]})})]})]})},Ro=l.createContext(void 0),si=()=>{const s=l.useContext(Ro);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},Ko=()=>{var z;const{user:s}=si(),[a,t]=l.useState(null),[r,i]=l.useState([]),[c,n]=l.useState([]),[o,m]=l.useState([]),[d,p]=l.useState({year:new Date().getFullYear(),category:"",subcategory:"",planned_amount:"",actual_amount:"",notes:""}),[j,g]=l.useState(!1),[x,N]=l.useState(!0),[k,u]=l.useState(null),[h,S]=l.useState(null),[T,A]=l.useState(null);l.useEffect(()=>{if(!s)return;N(!0),(async()=>{const{data:X}=await P.from("farm_statistics").select("*").eq("user_id",s.id).single();t(X);const{data:ae}=await P.from("market_forecasts").select("*").order("created_at",{ascending:!1}).limit(10);i(ae||[]);const{data:We}=await P.from("farm_budgets").select("*").eq("user_id",s.id).order("year",{ascending:!1});n(We||[]);const{data:wt}=await P.from("payment_transactions").select("*").eq("user_id",s.id).order("created_at",{ascending:!1}).limit(10);m(wt||[]),N(!1)})()},[s]);const D=E=>{const{name:X,value:ae}=E.target;p(We=>({...We,[X]:ae}))},L=async E=>{E.preventDefault(),g(!0),await P.from("farm_budgets").insert({user_id:s.id,year:Number(d.year),category:d.category,subcategory:d.subcategory,planned_amount:Number(d.planned_amount),actual_amount:d.actual_amount?Number(d.actual_amount):null,notes:d.notes}),p({year:new Date().getFullYear(),category:"",subcategory:"",planned_amount:"",actual_amount:"",notes:""}),g(!1);const{data:X}=await P.from("farm_budgets").select("*").eq("user_id",s.id).order("year",{ascending:!1});n(X||[])},R=E=>{u(E),S({...E})},$=E=>{const{name:X,value:ae}=E.target;S(We=>({...We,[X]:ae}))},Z=async E=>{E.preventDefault(),await P.from("farm_budgets").update({year:Number(h.year),category:h.category,subcategory:h.subcategory,planned_amount:Number(h.planned_amount),actual_amount:h.actual_amount?Number(h.actual_amount):null,notes:h.notes,updated_at:new Date().toISOString()}).eq("id",k.id),u(null),S(null);const{data:X}=await P.from("farm_budgets").select("*").eq("user_id",s.id).order("year",{ascending:!1});n(X||[])},F=async E=>{A(E),await P.from("farm_budgets").delete().eq("id",E),A(null);const{data:X}=await P.from("farm_budgets").select("*").eq("user_id",s.id).order("year",{ascending:!1});n(X||[])},Q=(a==null?void 0:a.monthly_revenue)||0,he=c.reduce((E,X)=>E+(X.actual_amount<0?Math.abs(X.actual_amount):0),0),$e=Q-he;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Financial Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your farm revenue, expenses, and profitability"})]}),e.jsx(Lo,{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(v,{children:e.jsx(y,{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Income"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",Q.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),"+6.5%"]})]})})})}),e.jsx(v,{children:e.jsx(y,{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expenses"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Outgoing"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["KES ",he.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-red-600 flex items-center",children:[e.jsx(ea,{className:"h-3 w-3 mr-1"}),"+2.1%"]})]})})})}),e.jsx(v,{children:e.jsx(y,{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profit"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue - Expenses"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",$e.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),"+8.3%"]})]})})})})]}),e.jsxs(de,{defaultValue:"overview",className:"w-full",children:[e.jsxs(ce,{className:"grid w-full grid-cols-5",children:[e.jsx(K,{value:"overview",children:"Overview"}),e.jsx(K,{value:"revenue",children:"Revenue"}),e.jsx(K,{value:"expenses",children:"Expenses"}),e.jsx(K,{value:"forecasts",children:"Forecasts"}),e.jsx(K,{value:"budget",children:"Budget"})]}),e.jsx(O,{value:"overview",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Monthly Overview"})}),e.jsx(y,{children:e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:a?e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{children:["Monthly Revenue: ",e.jsxs("b",{children:["KES ",((z=a.monthly_revenue)==null?void 0:z.toLocaleString())||0]})]}),e.jsxs("div",{children:["Average Yield: ",e.jsxs("b",{children:[a.average_yield||0," tons"]})]}),e.jsxs("div",{children:["Total Area: ",e.jsxs("b",{children:[a.total_area||0," acres"]})]}),e.jsxs("div",{children:["Active Alerts: ",e.jsx("b",{children:a.active_alerts||0})]})]})}):"Loading..."})})]}),e.jsxs(v,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between",children:[e.jsx(w,{children:"Recent Transactions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{size:"sm",variant:"outline",children:[e.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(f,{size:"sm",variant:"outline",children:[e.jsx(bn,{className:"h-4 w-4 mr-2"}),"Import"]}),e.jsxs(f,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add"]})]})]}),e.jsx(y,{children:e.jsx("div",{className:"space-y-3",children:o.length>0?o.slice(0,5).map(E=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:E.payment_provider||E.description}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(E.created_at).toLocaleDateString()})]}),e.jsxs("span",{className:`font-bold ${E.amount>0?"text-green-600":"text-red-600"}`,children:[E.amount>0?"+":"","KES ",Math.abs(E.amount).toLocaleString()]})]},E.id)):e.jsx("div",{className:"text-muted-foreground",children:"No transactions found."})})})]})]})}),e.jsx(O,{value:"revenue",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Revenue Analysis"})}),e.jsx(y,{children:e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:o.length>0?e.jsx("ul",{className:"w-full",children:o.filter(E=>E.amount>0).map(E=>e.jsxs("li",{className:"flex justify-between border-b py-2",children:[e.jsx("span",{children:E.payment_provider||E.description}),e.jsxs("span",{className:"text-green-600 font-bold",children:["+KES ",E.amount.toLocaleString()]})]},E.id))}):"No revenue transactions."})})]})}),e.jsx(O,{value:"expenses",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Expense Analysis"})}),e.jsx(y,{children:e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:o.length>0?e.jsx("ul",{className:"w-full",children:o.filter(E=>E.amount<0).map(E=>e.jsxs("li",{className:"flex justify-between border-b py-2",children:[e.jsx("span",{children:E.payment_provider||E.description}),e.jsxs("span",{className:"text-red-600 font-bold",children:["-KES ",Math.abs(E.amount).toLocaleString()]})]},E.id))}):"No expense transactions."})})]})}),e.jsx(O,{value:"forecasts",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Financial Forecasts"})}),e.jsx(y,{children:e.jsx("div",{className:"h-64 overflow-y-auto",children:r.length>0?e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left",children:"Commodity"}),e.jsx("th",{className:"text-left",children:"County"}),e.jsx("th",{className:"text-left",children:"Forecast Price"}),e.jsx("th",{className:"text-left",children:"Confidence"}),e.jsx("th",{className:"text-left",children:"Period"})]})}),e.jsx("tbody",{children:r.map(E=>{var X;return e.jsxs("tr",{children:[e.jsx("td",{children:E.commodity_name}),e.jsx("td",{children:E.county}),e.jsxs("td",{children:["KES ",(X=E.forecast_price)==null?void 0:X.toLocaleString()]}),e.jsx("td",{children:E.confidence_level}),e.jsx("td",{children:E.period})]},E.id)})})]}):e.jsx("div",{className:"text-muted-foreground",children:"No forecasts found."})})})]})}),e.jsx(O,{value:"budget",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Budget Planning"})}),e.jsxs(y,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("form",{onSubmit:L,className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-end",children:[e.jsx("div",{children:e.jsx(M,{name:"year",type:"number",min:"2020",max:"2100",value:d.year,onChange:D,placeholder:"Year",required:!0})}),e.jsx("div",{children:e.jsx(M,{name:"category",value:d.category,onChange:D,placeholder:"Category (e.g. Seeds)",required:!0})}),e.jsx("div",{children:e.jsx(M,{name:"subcategory",value:d.subcategory,onChange:D,placeholder:"Subcategory (e.g. Maize seed)"})}),e.jsx("div",{children:e.jsx(M,{name:"planned_amount",type:"number",value:d.planned_amount,onChange:D,placeholder:"Planned Amount",required:!0})}),e.jsx("div",{children:e.jsx(M,{name:"actual_amount",type:"number",value:d.actual_amount,onChange:D,placeholder:"Actual Amount"})}),e.jsx("div",{children:e.jsx(f,{type:"submit",disabled:j,children:j?"Adding...":"Add Budget Item"})}),e.jsx("div",{className:"md:col-span-6",children:e.jsx(ge,{name:"notes",value:d.notes,onChange:D,placeholder:"Notes"})})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Year"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Subcategory"}),e.jsx("th",{children:"Planned"}),e.jsx("th",{children:"Actual"}),e.jsx("th",{children:"Notes"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c.length>0?c.map(E=>{var X;return e.jsxs("tr",{children:[e.jsx("td",{children:E.year}),e.jsx("td",{children:E.category}),e.jsx("td",{children:E.subcategory}),e.jsxs("td",{children:["KES ",(X=E.planned_amount)==null?void 0:X.toLocaleString()]}),e.jsx("td",{children:E.actual_amount!==null?`KES ${E.actual_amount.toLocaleString()}`:"-"}),e.jsx("td",{children:E.notes}),e.jsxs("td",{children:[e.jsx(f,{size:"sm",variant:"outline",onClick:()=>R(E),className:"mr-2",children:"Edit"}),e.jsx(f,{size:"sm",variant:"destructive",onClick:()=>F(E.id),disabled:T===E.id,children:"Delete"})]})]},E.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted-foreground",children:"No budget items found."})})})]})})]})]})})]}),k&&e.jsx(gs,{open:!!k,onOpenChange:()=>u(null),children:e.jsxs(is,{children:[e.jsx(js,{children:e.jsx(fs,{children:"Edit Budget Item"})}),e.jsxs("form",{onSubmit:Z,className:"space-y-2",children:[e.jsx(M,{name:"year",type:"number",min:"2020",max:"2100",value:h.year,onChange:$,required:!0}),e.jsx(M,{name:"category",value:h.category,onChange:$,required:!0}),e.jsx(M,{name:"subcategory",value:h.subcategory,onChange:$}),e.jsx(M,{name:"planned_amount",type:"number",value:h.planned_amount,onChange:$,required:!0}),e.jsx(M,{name:"actual_amount",type:"number",value:h.actual_amount||"",onChange:$}),e.jsx(ge,{name:"notes",value:h.notes,onChange:$}),e.jsxs(Nt,{children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>u(null),children:"Cancel"}),e.jsx(f,{type:"submit",children:"Update"})]})]})]})})]})},qo=()=>{const[s]=l.useState([{id:"1",name:"Maize Yield",value:85,target:90,unit:"bags/acre",trend:"up",category:"production"},{id:"2",name:"Bean Yield",value:12,target:15,unit:"bags/acre",trend:"down",category:"production"},{id:"3",name:"Profit per Hectare",value:45e3,target:5e4,unit:"KES",trend:"up",category:"financial"},{id:"4",name:"Cost Efficiency",value:78,target:85,unit:"%",trend:"stable",category:"efficiency"},{id:"5",name:"Market Price Advantage",value:12,target:10,unit:"%",trend:"up",category:"financial"},{id:"6",name:"Resource Utilization",value:88,target:90,unit:"%",trend:"up",category:"efficiency"}]),a=[{crop:"Maize",currentYield:85,previousYield:75,efficiency:88},{crop:"Beans",currentYield:12,previousYield:15,efficiency:75},{crop:"Potatoes",currentYield:45,previousYield:40,efficiency:92},{crop:"Tomatoes",currentYield:32,previousYield:28,efficiency:85},{crop:"Onions",currentYield:25,previousYield:22,efficiency:80}],t=[{size:2.5,profit:65e3,efficiency:88},{size:1.8,profit:45e3,efficiency:85},{size:3.2,profit:95e3,efficiency:92},{size:1.2,profit:32e3,efficiency:78},{size:4.1,profit:125e3,efficiency:95}],r=c=>{switch(c){case"up":return e.jsx(me,{className:"h-4 w-4 text-green-500"});case"down":return e.jsx(ea,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Ve,{className:"h-4 w-4 text-blue-500"})}},i=c=>{switch(c){case"production":return"bg-green-100 text-green-800";case"financial":return"bg-blue-100 text-blue-800";case"efficiency":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Performance Analytics & KPIs"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your farm's key performance indicators and analytics for Kenyan agriculture"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(c=>e.jsx(v,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:c.name}),e.jsxs("p",{className:"text-2xl font-bold",children:[c.value.toLocaleString()," ",c.unit]})]}),r(c.trend)]}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx(_,{className:i(c.category),children:c.category}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Target: ",c.target," ",c.unit]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${c.value>=c.target?"bg-green-500":"bg-yellow-500"}`,style:{width:`${Math.min(c.value/c.target*100,100)}%`}})})})]})},c.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-green-500"}),"Crop Performance Analysis"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Compare current vs previous season yields for major Kenyan crops"})]}),e.jsx(y,{children:e.jsx("div",{className:"h-64 w-full",children:e.jsx(be,{width:"100%",height:"100%",children:e.jsxs(Ns,{data:a,children:[e.jsx(ze,{strokeDasharray:"3 3"}),e.jsx(Oe,{dataKey:"crop",tick:{fontSize:12}}),e.jsx(Be,{}),e.jsx(we,{}),e.jsx(Me,{dataKey:"currentYield",fill:"#22c55e",name:"Current Season"}),e.jsx(Me,{dataKey:"previousYield",fill:"#7c2d12",name:"Previous Season"})]})})})})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5 text-blue-500"}),"Land Efficiency vs Profitability"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Analyze the relationship between farm size, efficiency, and profit per hectare"})]}),e.jsx(y,{children:e.jsx("div",{className:"h-64 w-full",children:e.jsx(be,{width:"100%",height:"100%",children:e.jsxs(wn,{data:t,children:[e.jsx(ze,{strokeDasharray:"3 3"}),e.jsx(Oe,{dataKey:"size",name:"Farm Size (Ha)"}),e.jsx(Be,{dataKey:"profit",name:"Profit (KES)"}),e.jsx(we,{formatter:(c,n)=>[n==="profit"?`KES ${c.toLocaleString()}`:`${c}%`,n==="profit"?"Annual Profit":"Efficiency"],labelFormatter:c=>`Farm Size: ${c} Ha`}),e.jsx(Cn,{dataKey:"profit",fill:"#3b82f6",children:t.map((c,n)=>e.jsx(Bs,{fill:c.efficiency>85?"#22c55e":"#f59e0b"},`cell-${n}`))})]})})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(v,{children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(De,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:"KES 2.4M"}),e.jsx("p",{className:"text-sm text-green-600",children:"+15.3% from last season"})]})]})})}),e.jsx(v,{children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Ve,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"EBITDA Margin"}),e.jsx("p",{className:"text-2xl font-bold",children:"32.5%"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Industry avg: 28%"})]})]})})}),e.jsx(v,{children:e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(oe,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Market Reach"}),e.jsx("p",{className:"text-2xl font-bold",children:"8 Counties"}),e.jsx("p",{className:"text-sm text-purple-600",children:"Expanding to 12"})]})]})})})]})]})},zo=({onSubmit:s})=>{const{toast:a}=ee(),[t,r]=l.useState({name:"",category:"",quantity:"",unit:"kg",quality:"Grade A",isOrganic:!1,certifications:[],harvestDate:"",description:"",handlingPractices:"",storageConditions:"",images:[],price:"",location:"",availableFrom:"",availableTo:""}),[i,c]=l.useState({sizeUniformity:"",colorUniformity:"",defects:"",cleanlinessLevel:"",packagingType:""}),n=["Cereals","Legumes","Cash Crops","Fruits","Vegetables","Dairy","Meat"],o=["Grade A (Premium)","Grade B (Standard)","Grade C (Economy)"],m=[{id:"organic",label:"Organic Certified"},{id:"kebs",label:"KEBS Certified"},{id:"export",label:"Export Quality"},{id:"gmp",label:"Good Manufacturing Practices"}],d=x=>{const{name:N,value:k}=x.target;r(u=>({...u,[N]:k}))},p=(x,N)=>{r(k=>({...k,[x]:N}))},j=x=>{r(N=>{const k=N.certifications;return k.includes(x)?{...N,certifications:k.filter(u=>u!==x)}:{...N,certifications:[...k,x]}})},g=x=>{x.preventDefault();const N={...t,qualityDetails:i,submittedAt:new Date};console.log("Product submission:",N),s&&s(N),a({title:"Product Added Successfully",description:"Your product has been added to the marketplace."}),r({name:"",category:"",quantity:"",unit:"kg",quality:"Grade A",isOrganic:!1,certifications:[],harvestDate:"",description:"",handlingPractices:"",storageConditions:"",images:[],price:"",location:"",availableFrom:"",availableTo:""}),c({sizeUniformity:"",colorUniformity:"",defects:"",cleanlinessLevel:"",packagingType:""})};return e.jsxs(v,{className:"w-full max-w-3xl mx-auto",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Add Your Agricultural Product"}),e.jsx(B,{children:"Provide detailed information about your product to help buyers assess its quality"})]}),e.jsx(y,{children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"name",children:"Product Name"}),e.jsx(M,{id:"name",name:"name",value:t.name,onChange:d,placeholder:"e.g., Fresh Tomatoes",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"category",children:"Category"}),e.jsxs(Y,{value:t.category,onValueChange:x=>p("category",x),children:[e.jsx(H,{id:"category",children:e.jsx(W,{placeholder:"Select category"})}),e.jsx(G,{children:n.map(x=>e.jsx(C,{value:x,children:x},x))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"quantity",children:"Quantity"}),e.jsx(M,{id:"quantity",name:"quantity",type:"number",value:t.quantity,onChange:d,placeholder:"Amount",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"unit",children:"Unit"}),e.jsxs(Y,{value:t.unit,onValueChange:x=>p("unit",x),children:[e.jsx(H,{id:"unit",children:e.jsx(W,{placeholder:"Select unit"})}),e.jsxs(G,{children:[e.jsx(C,{value:"kg",children:"Kilograms (kg)"}),e.jsx(C,{value:"tonnes",children:"Tonnes"}),e.jsx(C,{value:"boxes",children:"Boxes"}),e.jsx(C,{value:"crates",children:"Crates"}),e.jsx(C,{value:"bags",children:"Bags"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"price",children:"Price (KES per unit)"}),e.jsx(M,{id:"price",name:"price",type:"number",value:t.price,onChange:d,placeholder:"e.g., 150",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"harvestDate",children:"Harvest Date"}),e.jsx(M,{id:"harvestDate",name:"harvestDate",type:"date",value:t.harvestDate,onChange:d,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"location",children:"Location"}),e.jsx(M,{id:"location",name:"location",value:t.location,onChange:d,placeholder:"e.g., Nakuru County",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"description",children:"Product Description"}),e.jsx(ge,{id:"description",name:"description",value:t.description,onChange:d,placeholder:"Describe your product in detail",rows:3,required:!0})]})]}),e.jsx(ue,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Quality Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"quality",children:"Quality Grade"}),e.jsxs(Y,{value:t.quality,onValueChange:x=>p("quality",x),children:[e.jsx(H,{id:"quality",children:e.jsx(W,{placeholder:"Select quality grade"})}),e.jsx(G,{children:o.map(x=>e.jsx(C,{value:x,children:x},x))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"sizeUniformity",children:"Size Uniformity"}),e.jsxs(Y,{value:i.sizeUniformity,onValueChange:x=>c(N=>({...N,sizeUniformity:x})),children:[e.jsx(H,{id:"sizeUniformity",children:e.jsx(W,{placeholder:"Select uniformity"})}),e.jsxs(G,{children:[e.jsx(C,{value:"very-uniform",children:"Very Uniform"}),e.jsx(C,{value:"mostly-uniform",children:"Mostly Uniform"}),e.jsx(C,{value:"somewhat-varied",children:"Somewhat Varied"}),e.jsx(C,{value:"mixed-sizes",children:"Mixed Sizes"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"defects",children:"Defects"}),e.jsxs(Y,{value:i.defects,onValueChange:x=>c(N=>({...N,defects:x})),children:[e.jsx(H,{id:"defects",children:e.jsx(W,{placeholder:"Select defect level"})}),e.jsxs(G,{children:[e.jsx(C,{value:"none",children:"None to Very Few"}),e.jsx(C,{value:"minor",children:"Minor Defects"}),e.jsx(C,{value:"moderate",children:"Moderate Defects"}),e.jsx(C,{value:"significant",children:"Significant Defects"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{children:"Certifications & Standards"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:m.map(x=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:x.id,checked:t.certifications.includes(x.id),onCheckedChange:()=>j(x.id)}),e.jsx(I,{htmlFor:x.id,className:"font-normal",children:x.label})]},x.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"handlingPractices",children:"Post-Harvest Handling Practices"}),e.jsx(ge,{id:"handlingPractices",name:"handlingPractices",value:t.handlingPractices,onChange:d,placeholder:"Describe how the produce was handled after harvesting",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"storageConditions",children:"Storage Conditions"}),e.jsx(ge,{id:"storageConditions",name:"storageConditions",value:t.storageConditions,onChange:d,placeholder:"Describe current storage conditions",rows:2})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(f,{type:"submit",className:"w-full",children:"Submit Product"})})]})})]})},Oo=()=>{const s=Ne(),{user:a}=Xe(),[t,r]=l.useState([{id:"1",name:"Maize",category:"Grains",county:"Nakuru",quantity:500,unit:"kg",qualityGrade:"A",availableFrom:"2023-10-15",farmer:"John Kariuki",farmerId:"farmer-1"},{id:"2",name:"Tomatoes",category:"Vegetables",county:"Kiambu",quantity:200,unit:"kg",qualityGrade:"B",availableFrom:"2023-10-20",farmer:"John Kariuki",farmerId:"farmer-1"}]),i=n=>{r(o=>o.filter(m=>m.id!==n))},c=n=>{console.log("Editing produce:",n)};return ns.useEffect(()=>{a||s("/auth")},[a,s]),a?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(ne,{}),e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Farmer Portal"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your farm operations and produce"})]}),e.jsxs(de,{defaultValue:"dashboard",className:"w-full",children:[e.jsxs(ce,{className:"grid w-full grid-cols-8",children:[e.jsx(K,{value:"dashboard",children:"Dashboard"}),e.jsx(K,{value:"parcels",children:"Land Parcels"}),e.jsx(K,{value:"crops",children:"Crops"}),e.jsx(K,{value:"inventory",children:"Inventory"}),e.jsx(K,{value:"finances",children:"Finances"}),e.jsx(K,{value:"analytics",children:"Analytics"}),e.jsx(K,{value:"products",children:"My Products"}),e.jsx(K,{value:"add-product",children:"Add Product"})]}),e.jsx(O,{value:"dashboard",children:e.jsx(Po,{})}),e.jsx(O,{value:"parcels",children:e.jsx(Do,{})}),e.jsx(O,{value:"crops",children:e.jsx(Eo,{})}),e.jsx(O,{value:"inventory",children:e.jsx(Fo,{})}),e.jsx(O,{value:"finances",children:e.jsx(Ko,{})}),e.jsx(O,{value:"analytics",children:e.jsx(qo,{})}),e.jsx(O,{value:"products",children:e.jsx(Io,{userProduce:t,onDeleteProduce:i,onEditProduce:c})}),e.jsx(O,{value:"add-product",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(zo,{})})})]})]})]}):null},Bo=async s=>{try{const{data:{user:a}}=await P.auth.getUser();if(!a)throw new Error("User not authenticated");const{data:t,error:r}=await P.from("farmer_exporter_collaborations").insert({farmer_id:a.id,...s}).select().single();if(r)throw console.error("Error creating farmer collaboration:",r),r;return t}catch(a){throw console.error("Error creating farmer collaboration:",a),a}},$o=async()=>{try{const{data:s,error:a}=await P.from("farmer_exporter_collaborations").select("*").eq("is_active",!0).order("created_at",{ascending:!1});return a?(console.error("Error fetching farmer collaborations:",a),[]):(s||[]).map(r=>({...r,farmer_coordinates:r.farmer_coordinates}))}catch(s){return console.error("Error fetching farmer collaborations:",s),[]}},Uo=async s=>{try{const{data:{user:a}}=await P.auth.getUser();if(!a)throw new Error("User not authenticated");const{data:t,error:r}=await P.from("exporter_profiles").insert({user_id:a.id,...s}).select().single();if(r)throw console.error("Error creating exporter profile:",r),r;return t}catch(a){throw console.error("Error creating exporter profile:",a),a}},ti=async()=>{try{const{data:s,error:a}=await P.from("exporter_profiles").select("*").eq("is_active",!0).order("rating",{ascending:!1});return a?(console.error("Error fetching exporter profiles:",a),[]):(s||[]).map(r=>({...r,office_coordinates:r.office_coordinates}))}catch(s){return console.error("Error fetching exporter profiles:",s),[]}},Vo=()=>{const[s,a]=l.useState("create"),[t,r]=l.useState(!1),[i,c]=l.useState([]),[n,o]=l.useState([]),{toast:m}=ee(),[d,p]=l.useState({farmer_name:"",farmer_phone:"",farmer_email:"",farmer_location:"",farmer_county:"",farm_size_acres:"",commodity_name:"",commodity_variety:"",estimated_quantity:"",unit:"kg",quality_grade:"",harvest_date:"",availability_period:"",farmer_experience_years:"",has_export_documentation:!1,documentation_needs:[],farmer_profile_description:"",collaboration_type:"supply_partnership",target_markets:[],pricing_expectations:"",special_requirements:[],farmer_certifications:[]});l.useEffect(()=>{j()},[]);const j=async()=>{try{const[u,h]=await Promise.all([$o(),ti()]);c(u),o(h)}catch(u){console.error("Error loading data:",u)}},g=async u=>{if(u.preventDefault(),!d.farmer_name||!d.farmer_phone||!d.commodity_name||!d.estimated_quantity){m({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}try{r(!0);const h={...d,estimated_quantity:parseFloat(d.estimated_quantity),farm_size_acres:d.farm_size_acres?parseFloat(d.farm_size_acres):void 0,farmer_experience_years:d.farmer_experience_years?parseInt(d.farmer_experience_years):void 0,collaboration_status:"seeking_exporter",is_active:!0};await Bo(h),m({title:"Success",description:"Your collaboration request has been created successfully"}),p({farmer_name:"",farmer_phone:"",farmer_email:"",farmer_location:"",farmer_county:"",farm_size_acres:"",commodity_name:"",commodity_variety:"",estimated_quantity:"",unit:"kg",quality_grade:"",harvest_date:"",availability_period:"",farmer_experience_years:"",has_export_documentation:!1,documentation_needs:[],farmer_profile_description:"",collaboration_type:"supply_partnership",target_markets:[],pricing_expectations:"",special_requirements:[],farmer_certifications:[]}),j()}catch(h){console.error("Error creating collaboration:",h),m({title:"Error",description:"Failed to create collaboration request",variant:"destructive"})}finally{r(!1)}},x=["Nairobi","Kiambu","Nakuru","Kisumu","Machakos","Uasin Gishu","Meru","Nyeri","Murang'a","Kakamega","Bungoma","Trans Nzoia","Nandi","Kericho","Bomet"],N=["Maize","Wheat","Rice","Beans","Potatoes","Sweet Potatoes","Tomatoes","Onions","Carrots","Cabbages","Spinach","Bananas","Mangoes","Avocados","Coffee","Tea","Pyrethrum","Cotton","Sunflower","Groundnuts"],k=["Export License","Phytosanitary Certificate","Certificate of Origin","Quality Certificates","Organic Certification","Fair Trade Certification"];return e.jsxs("div",{className:"container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Farmer-Exporter Collaboration"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Connect with exporters to access international markets and get help with documentation"})]}),e.jsxs(de,{value:s,onValueChange:a,children:[e.jsxs(ce,{className:"grid w-full grid-cols-3",children:[e.jsx(K,{value:"create",children:"Create Request"}),e.jsx(K,{value:"browse",children:"Browse Requests"}),e.jsx(K,{value:"exporters",children:"Find Exporters"})]}),e.jsx(O,{value:"create",className:"space-y-6",children:e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Create Collaboration Request"}),e.jsx(B,{children:"Tell exporters about your produce and what kind of collaboration you're looking for"})]}),e.jsx(y,{children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Farmer Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"farmer_name",children:"Full Name *"}),e.jsx(M,{id:"farmer_name",value:d.farmer_name,onChange:u=>p(h=>({...h,farmer_name:u.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"farmer_phone",children:"Phone Number *"}),e.jsx(M,{id:"farmer_phone",value:d.farmer_phone,onChange:u=>p(h=>({...h,farmer_phone:u.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"farmer_email",children:"Email Address"}),e.jsx(M,{id:"farmer_email",type:"email",value:d.farmer_email,onChange:u=>p(h=>({...h,farmer_email:u.target.value}))})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"farmer_county",children:"County *"}),e.jsxs(Y,{value:d.farmer_county,onValueChange:u=>p(h=>({...h,farmer_county:u})),children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Select county"})}),e.jsx(G,{children:x.map(u=>e.jsx(C,{value:u,children:u},u))})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(I,{htmlFor:"farmer_location",children:"Specific Location *"}),e.jsx(M,{id:"farmer_location",value:d.farmer_location,onChange:u=>p(h=>({...h,farmer_location:u.target.value})),placeholder:"e.g., Kiambu Town, near ABC Market",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Commodity Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"commodity_name",children:"Commodity *"}),e.jsxs(Y,{value:d.commodity_name,onValueChange:u=>p(h=>({...h,commodity_name:u})),children:[e.jsx(H,{children:e.jsx(W,{placeholder:"Select commodity"})}),e.jsx(G,{children:N.map(u=>e.jsx(C,{value:u,children:u},u))})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"commodity_variety",children:"Variety"}),e.jsx(M,{id:"commodity_variety",value:d.commodity_variety,onChange:u=>p(h=>({...h,commodity_variety:u.target.value})),placeholder:"e.g., H614 for maize"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"estimated_quantity",children:"Estimated Quantity *"}),e.jsx(M,{id:"estimated_quantity",type:"number",value:d.estimated_quantity,onChange:u=>p(h=>({...h,estimated_quantity:u.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"unit",children:"Unit"}),e.jsxs(Y,{value:d.unit,onValueChange:u=>p(h=>({...h,unit:u})),children:[e.jsx(H,{children:e.jsx(W,{})}),e.jsxs(G,{children:[e.jsx(C,{value:"kg",children:"Kilograms"}),e.jsx(C,{value:"tons",children:"Tons"}),e.jsx(C,{value:"bags",children:"Bags"}),e.jsx(C,{value:"crates",children:"Crates"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Documentation & Requirements"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"has_export_documentation",checked:d.has_export_documentation,onCheckedChange:u=>p(h=>({...h,has_export_documentation:!!u}))}),e.jsx(I,{htmlFor:"has_export_documentation",children:"I already have export documentation"})]}),!d.has_export_documentation&&e.jsxs("div",{children:[e.jsx(I,{children:"What documentation do you need help with?"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:k.map(u=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:u,checked:d.documentation_needs.includes(u),onCheckedChange:h=>{p(h?S=>({...S,documentation_needs:[...S.documentation_needs,u]}):S=>({...S,documentation_needs:S.documentation_needs.filter(T=>T!==u)}))}}),e.jsx(I,{htmlFor:u,className:"text-sm",children:u})]},u))})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"farmer_profile_description",children:"About Your Farm"}),e.jsx(ge,{id:"farmer_profile_description",value:d.farmer_profile_description,onChange:u=>p(h=>({...h,farmer_profile_description:u.target.value})),placeholder:"Tell exporters about your farming experience, practices, and what makes your produce special...",rows:4})]}),e.jsx(f,{type:"submit",disabled:t,className:"w-full",children:t?"Creating...":"Create Collaboration Request"})]})})]})}),e.jsx(O,{value:"browse",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6",children:i.map(u=>e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),u.commodity_name,u.commodity_variety&&` (${u.commodity_variety})`]}),e.jsxs(B,{className:"flex items-center gap-4 mt-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Xs,{className:"h-4 w-4"}),u.farmer_name]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"h-4 w-4"}),u.farmer_county]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"h-4 w-4"}),u.estimated_quantity," ",u.unit]})]})]}),e.jsx(_,{variant:u.collaboration_status==="seeking_exporter"?"default":"secondary",children:u.collaboration_status.replace("_"," ")})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[u.farmer_profile_description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:u.farmer_profile_description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[e.jsx(as,{className:"h-4 w-4"}),u.farmer_phone]}),u.farmer_email&&e.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ss,{className:"h-4 w-4"}),u.farmer_email]}),u.harvest_date&&e.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Harvest: ",new Date(u.harvest_date).toLocaleDateString()]})]}),!u.has_export_documentation&&u.documentation_needs&&u.documentation_needs.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Documentation Needs:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:u.documentation_needs.map(h=>e.jsx(_,{variant:"outline",className:"text-xs",children:h},h))})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Posted ",new Date(u.created_at).toLocaleDateString()]}),e.jsx(f,{size:"sm",children:"Contact Farmer"})]})]})})]},u.id))})}),e.jsx(O,{value:"exporters",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6",children:n.map(u=>e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(lt,{className:"h-5 w-5"}),u.company_name]}),e.jsxs(B,{className:"flex items-center gap-4 mt-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Xs,{className:"h-4 w-4"}),u.contact_person_name]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"h-4 w-4"}),u.office_county]}),u.years_in_business&&e.jsxs("span",{className:"text-sm",children:[u.years_in_business," years in business"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold",children:[u.rating.toFixed(1),"/5"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.total_collaborations," collaborations"]})]})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[u.company_description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:u.company_description}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Export Markets:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:u.export_markets.map(h=>e.jsxs(_,{variant:"outline",className:"text-xs",children:[e.jsx(zs,{className:"h-3 w-3 mr-1"}),h]},h))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Commodities Handled:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:u.commodities_handled.map(h=>e.jsx(_,{variant:"secondary",className:"text-xs",children:h},h))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Services Offered:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:u.services_offered.map(h=>e.jsx(_,{variant:"outline",className:"text-xs",children:h},h))})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(as,{className:"h-4 w-4"}),u.contact_phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ss,{className:"h-4 w-4"}),u.contact_email]})]}),e.jsx(f,{size:"sm",children:"Contact Exporter"})]})]})})]},u.id))})})]})]})},Ho=()=>{const[s,a]=l.useState(!1),[t,r]=l.useState(null),{toast:i}=ee(),[c,n]=l.useState({company_name:"",company_registration_number:"",business_license_number:"",export_license_number:"",company_description:"",contact_person_name:"",contact_phone:"",contact_email:"",office_location:"",office_county:"",website_url:"",years_in_business:"",export_markets:[],commodities_handled:[],services_offered:[],minimum_quantity_tons:"",maximum_quantity_tons:"",certifications:[],documentation_services:!0,logistics_services:!1,quality_assurance_services:!1,financing_services:!1,is_active:!0});l.useEffect(()=>{o()},[]);const o=async()=>{try{const g=await ti();g.length>0&&r(g[0])}catch(g){console.error("Error checking existing profile:",g)}},m=async g=>{if(g.preventDefault(),!c.company_name||!c.contact_person_name||!c.contact_phone||!c.contact_email){i({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}try{a(!0);const x={...c,years_in_business:c.years_in_business?parseInt(c.years_in_business):void 0,minimum_quantity_tons:c.minimum_quantity_tons?parseFloat(c.minimum_quantity_tons):void 0,maximum_quantity_tons:c.maximum_quantity_tons?parseFloat(c.maximum_quantity_tons):void 0};await Uo(x),i({title:"Success",description:"Your exporter profile has been created successfully"}),o()}catch(x){console.error("Error creating exporter profile:",x),i({title:"Error",description:"Failed to create exporter profile",variant:"destructive"})}finally{a(!1)}},d=["East Africa","Europe","Middle East","Asia","North America","Australia","South Africa","West Africa","South America"],p=["Maize","Wheat","Rice","Beans","Potatoes","Sweet Potatoes","Tomatoes","Onions","Carrots","Cabbages","Spinach","Bananas","Mangoes","Avocados","Coffee","Tea","Pyrethrum","Cotton","Sunflower","Groundnuts"],j=["Documentation Support","Quality Certification","Logistics Coordination","Market Access","Price Negotiation","Payment Processing","Insurance","Storage Services","Transport Arrangement","Customs Clearance"];return t?e.jsxs("div",{className:"container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Exporter Profile"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Your exporter profile is active and visible to farmers"})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(lt,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsx(w,{children:t.company_name}),e.jsx(B,{children:t.contact_person_name})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Active Profile"})]})]})}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Export Markets"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.export_markets.map(g=>e.jsxs(_,{variant:"outline",children:[e.jsx(zs,{className:"h-3 w-3 mr-1"}),g]},g))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Commodities Handled"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.commodities_handled.map(g=>e.jsxs(_,{variant:"secondary",children:[e.jsx(ke,{className:"h-3 w-3 mr-1"}),g]},g))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Services Offered"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.services_offered.map(g=>e.jsx(_,{variant:"outline",children:g},g))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.rating.toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.total_collaborations}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Collaborations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.successful_exports}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Successful Exports"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{variant:"outline",children:"Edit Profile"})})]})]})]}):e.jsxs("div",{className:"container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Exporter Profile"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Create your profile to connect with farmers who need export services"})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Exporter Information"}),e.jsx(B,{children:"Provide detailed information about your export business to help farmers find you"})]}),e.jsx(y,{children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Company Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"company_name",children:"Company Name *"}),e.jsx(M,{id:"company_name",value:c.company_name,onChange:g=>n(x=>({...x,company_name:g.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"company_registration_number",children:"Registration Number"}),e.jsx(M,{id:"company_registration_number",value:c.company_registration_number,onChange:g=>n(x=>({...x,company_registration_number:g.target.value}))})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"business_license_number",children:"Business License"}),e.jsx(M,{id:"business_license_number",value:c.business_license_number,onChange:g=>n(x=>({...x,business_license_number:g.target.value}))})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"export_license_number",children:"Export License"}),e.jsx(M,{id:"export_license_number",value:c.export_license_number,onChange:g=>n(x=>({...x,export_license_number:g.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"company_description",children:"Company Description"}),e.jsx(ge,{id:"company_description",value:c.company_description,onChange:g=>n(x=>({...x,company_description:g.target.value})),placeholder:"Describe your company, experience, and what sets you apart...",rows:4})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"contact_person_name",children:"Contact Person *"}),e.jsx(M,{id:"contact_person_name",value:c.contact_person_name,onChange:g=>n(x=>({...x,contact_person_name:g.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"contact_phone",children:"Phone Number *"}),e.jsx(M,{id:"contact_phone",value:c.contact_phone,onChange:g=>n(x=>({...x,contact_phone:g.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"contact_email",children:"Email Address *"}),e.jsx(M,{id:"contact_email",type:"email",value:c.contact_email,onChange:g=>n(x=>({...x,contact_email:g.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"website_url",children:"Website"}),e.jsx(M,{id:"website_url",type:"url",value:c.website_url,onChange:g=>n(x=>({...x,website_url:g.target.value}))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Export Markets"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:d.map(g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:g,checked:c.export_markets.includes(g),onCheckedChange:x=>{n(x?N=>({...N,export_markets:[...N.export_markets,g]}):N=>({...N,export_markets:N.export_markets.filter(k=>k!==g)}))}}),e.jsx(I,{htmlFor:g,className:"text-sm",children:g})]},g))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Commodities Handled"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:p.map(g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:g,checked:c.commodities_handled.includes(g),onCheckedChange:x=>{n(x?N=>({...N,commodities_handled:[...N.commodities_handled,g]}):N=>({...N,commodities_handled:N.commodities_handled.filter(k=>k!==g)}))}}),e.jsx(I,{htmlFor:g,className:"text-sm",children:g})]},g))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Services Offered"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:j.map(g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:g,checked:c.services_offered.includes(g),onCheckedChange:x=>{n(x?N=>({...N,services_offered:[...N.services_offered,g]}):N=>({...N,services_offered:N.services_offered.filter(k=>k!==g)}))}}),e.jsx(I,{htmlFor:g,className:"text-sm",children:g})]},g))})]}),e.jsx(f,{type:"submit",disabled:s,className:"w-full",children:s?"Creating Profile...":"Create Exporter Profile"})]})})]})]})},Lt=[{id:"1",farmerName:"John Kimani",farmerLocation:"Nakuru",farmerAvatar:"/placeholder.svg",title:"Doubling My Potato Yield with Modern Farming Techniques",summary:"How I transformed my small farm from producing 5 tons to 12 tons of potatoes per season",content:"When I started farming potatoes five years ago, I was struggling with poor yields and pest problems. After attending a training session organized by the local agricultural office, I learned about proper spacing, quality certified seeds, and integrated pest management. I implemented these practices and saw amazing results within just one season. My yields doubled, and the quality of potatoes improved significantly, allowing me to negotiate better prices with buyers. I also joined a cooperative that helped me access reliable markets and negotiate as a group.",cropType:"Potatoes",tags:["modern techniques","yield improvement","pest management","certified seeds"],likes:128,comments:23,publishedDate:new Date("2025-03-15"),verified:!0},{id:"2",farmerName:"Sarah Wanjiku",farmerLocation:"Kiambu",farmerAvatar:"/placeholder.svg",title:"From Market Frustration to Direct Exports: My Avocado Journey",summary:"How joining a farmer group helped me bypass middlemen and access export markets directly",content:"I used to sell my avocados to middlemen who would offer very low prices, claiming that the market was flooded. After joining a local farmer group, we pooled our resources to meet the volume requirements of exporters. We also invested in Global GAP certification, which opened doors to premium markets in Europe. Today, I receive three times the price I used to get from middlemen, and payments are transparent and timely. This success has allowed me to expand my farm from 1 acre to 5 acres and invest in a drip irrigation system.",cropType:"Avocados",tags:["export market","value addition","farmer group","certification"],likes:236,comments:41,publishedDate:new Date("2025-02-28"),verified:!0},{id:"3",farmerName:"David Ochieng",farmerLocation:"Kisumu",farmerAvatar:"/placeholder.svg",title:"Weather-Proofing My Farm: Success with Climate-Smart Agriculture",summary:"Using water harvesting and drought-resistant varieties to maintain profitability despite climate challenges",content:"After three consecutive seasons of crop failure due to erratic rainfall, I decided to invest in climate-smart agricultural practices. I constructed water pans that harvest rainwater during the rainy season, which I then use for supplemental irrigation during dry spells. I also switched to drought-resistant maize varieties that can withstand water stress. The results were immediate - while my neighbors experienced significant losses during a recent drought, I maintained about 80% of my normal yield. I've now become a demonstration farmer, teaching others in my community about these techniques.",cropType:"Maize",tags:["climate-smart","water harvesting","drought-resistant","adaptation"],likes:157,comments:29,publishedDate:new Date("2025-04-05"),verified:!0},{id:"4",farmerName:"Alice Muthoni",farmerLocation:"Meru",farmerAvatar:"/placeholder.svg",title:"Transforming My Tomato Business with Value Addition",summary:"How I started making tomato paste to reduce post-harvest losses and increase profits",content:"I used to lose about 30% of my tomato harvest due to gluts in the market and transportation challenges. After attending a value addition workshop, I invested in simple processing equipment to make tomato paste. Now, whenever market prices drop below profitable levels, I process the tomatoes into paste and sell it to local schools, restaurants, and individual consumers. This has increased my income by 45% and virtually eliminated post-harvest losses. I've also created employment for three young people from my community who help with processing and marketing.",cropType:"Tomatoes",tags:["value addition","post-harvest","processing","employment creation"],likes:192,comments:37,publishedDate:new Date("2025-03-22"),verified:!0}],Go=()=>{const[s,a]=l.useState("all"),[t,r]=l.useState(""),[i,c]=l.useState(Lt);l.useEffect(()=>{document.title="Farmer Success Stories | Kilimo Connect";let o=[...Lt];s!=="all"&&(o=o.filter(m=>m.cropType.toLowerCase()===s.toLowerCase())),t&&(o=o.filter(m=>m.tags.some(d=>d.toLowerCase().includes(t.toLowerCase())))),c(o)},[s,t]);const n=Array.from(new Set(Lt.flatMap(o=>o.tags)));return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsx("div",{className:"container flex h-16 items-center",children:e.jsx(es,{})})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Farmer Success Stories"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Learn from the experiences of successful farmers across Kenya"})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsx(de,{defaultValue:"all",value:s,onValueChange:a,className:"w-full sm:w-auto",children:e.jsxs(ce,{children:[e.jsx(K,{value:"all",children:"All Crops"}),e.jsx(K,{value:"potatoes",children:"Potatoes"}),e.jsx(K,{value:"avocados",children:"Avocados"}),e.jsx(K,{value:"maize",children:"Maize"}),e.jsx(K,{value:"tomatoes",children:"Tomatoes"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{variant:"outline",children:"Filter"}),e.jsx(f,{children:"Share Your Success"})]})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[e.jsx(_,{variant:t===""?"default":"outline",className:"cursor-pointer",onClick:()=>r(""),children:"All Tags"}),n.map(o=>e.jsx(_,{variant:t===o?"default":"outline",className:"cursor-pointer",onClick:()=>r(o===t?"":o),children:o},o))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.map(o=>e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(ls,{children:[e.jsx(bs,{src:o.farmerAvatar,alt:o.farmerName}),e.jsx(cs,{children:o.farmerName.substring(0,2).toUpperCase()})]}),e.jsxs("div",{children:[e.jsx(w,{className:"text-lg",children:o.farmerName}),e.jsx(B,{children:o.farmerLocation})]})]}),o.verified&&e.jsx(_,{variant:"secondary",children:"Verified Success"})]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-xl",children:o.title}),e.jsx("p",{className:"text-muted-foreground mt-1",children:o.summary})]}),e.jsx("div",{className:"text-sm line-clamp-3",children:o.content}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(_,{variant:"outline",children:o.cropType}),o.tags.slice(0,2).map(m=>e.jsx(_,{variant:"outline",children:m},m)),o.tags.length>2&&e.jsxs(_,{variant:"outline",children:["+",o.tags.length-2," more"]})]})]}),e.jsxs(J,{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Qt,{className:"h-4 w-4 mr-1"}),o.likes]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ke,{className:"h-4 w-4 mr-1"}),o.comments]}),e.jsx("span",{children:o.publishedDate.toLocaleDateString()})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(f,{variant:"ghost",size:"sm",children:[e.jsx(kn,{className:"h-4 w-4 mr-1"}),"Share"]}),e.jsx(f,{size:"sm",children:"Read More"})]})]})]},o.id)),i.length===0&&e.jsxs("div",{className:"col-span-full text-center p-12",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(pt,{className:"mx-auto h-12 w-12 opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No success stories found"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Try changing your filters or be the first to share a success story for this category."}),e.jsx(f,{className:"mt-4",children:"Share Your Success"})]})]})]})]})},ai=l.forwardRef(({className:s,...a},t)=>e.jsx(kr,{className:q("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:e.jsx(Sn,{className:q("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ai.displayName=kr.displayName;const Yo=({onSubmit:s,onCancel:a})=>{const[t,r]=l.useState(""),[i,c]=l.useState(""),[n,o]=l.useState("general"),[m,d]=l.useState(""),[p,j]=l.useState([]),[g,x]=l.useState(""),[N,k]=l.useState(!1),[u,h]=l.useState(""),[S,T]=l.useState(["",""]),A=()=>{g.trim()&&!p.includes(g.trim())&&(j([...p,g.trim()]),x(""))},D=F=>{j(p.filter(Q=>Q!==F))},L=()=>{T([...S,""])},R=(F,Q)=>{const he=[...S];he[F]=Q,T(he)},$=F=>{S.length>2&&T(S.filter((Q,he)=>he!==F))},Z=F=>{F.preventDefault();const Q={title:t,content:i,category:n,location:m||null,tags:p,poll:N?{question:u,options:S.filter(he=>he.trim())}:null};s(Q)};return e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Create New Post"})}),e.jsx(y,{children:e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"title",children:"Title"}),e.jsx(M,{id:"title",value:t,onChange:F=>r(F.target.value),placeholder:"What's your post about?",required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"content",children:"Content"}),e.jsx(ge,{id:"content",value:i,onChange:F=>c(F.target.value),placeholder:"Share your thoughts, questions, or experiences...",rows:4,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"category",children:"Category"}),e.jsxs(Y,{value:n,onValueChange:o,children:[e.jsx(H,{children:e.jsx(W,{})}),e.jsxs(G,{children:[e.jsx(C,{value:"general",children:"General Discussion"}),e.jsx(C,{value:"crops",children:"Crops & Farming"}),e.jsx(C,{value:"livestock",children:"Livestock"}),e.jsx(C,{value:"market",children:"Market Information"}),e.jsx(C,{value:"technology",children:"Technology"}),e.jsx(C,{value:"weather",children:"Weather & Climate"}),e.jsx(C,{value:"business",children:"Agribusiness"})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"location",children:"Location (Optional)"}),e.jsx(M,{id:"location",value:m,onChange:F=>d(F.target.value),placeholder:"County or region"})]})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:p.map(F=>e.jsxs(_,{variant:"secondary",className:"flex items-center gap-1",children:[F,e.jsx(Re,{className:"h-3 w-3 cursor-pointer",onClick:()=>D(F)})]},F))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{value:g,onChange:F=>x(F.target.value),placeholder:"Add a tag",onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),A())}),e.jsx(f,{type:"button",variant:"outline",onClick:A,children:e.jsx(pe,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ai,{id:"poll-toggle",checked:N,onCheckedChange:k}),e.jsxs(I,{htmlFor:"poll-toggle",className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Add a poll"]})]}),N&&e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"poll-question",children:"Poll Question"}),e.jsx(M,{id:"poll-question",value:u,onChange:F=>h(F.target.value),placeholder:"What would you like to ask?",required:N})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Poll Options"}),S.map((F,Q)=>e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(M,{value:F,onChange:he=>R(Q,he.target.value),placeholder:`Option ${Q+1}`,required:N}),S.length>2&&e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>$(Q),children:e.jsx(Re,{className:"h-4 w-4"})})]},Q)),e.jsxs(f,{type:"button",variant:"outline",size:"sm",onClick:L,className:"mt-2",children:[e.jsx(pe,{className:"h-4 w-4 mr-1"}),"Add Option"]})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(f,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),e.jsx(f,{type:"submit",children:"Create Post"})]})]})})]})},Wo=({post:s,onLike:a,onComment:t,onShare:r,onVote:i})=>{const[c,n]=l.useState(!1),[o,m]=l.useState(!1),d=()=>{n(!c),a==null||a(s.id)},p=x=>{s.poll&&!s.poll.userVote!==void 0&&(i==null||i(s.poll.id,x))},j=(x,N)=>N>0?x/N*100:0,g=()=>{m(!o),r==null||r(s.id)};return e.jsxs(v,{className:"w-full",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ls,{children:[e.jsx(bs,{src:s.author.avatar}),e.jsx(cs,{children:s.author.name.split(" ").map(x=>x[0]).join("").toUpperCase()})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:s.author.name}),s.author.isVerified&&e.jsx(_,{variant:"secondary",className:"text-xs",children:"Verified"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Ce,{className:"h-3 w-3"}),_n(new Date(s.createdAt),{addSuffix:!0}),s.location&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx(se,{className:"h-3 w-3"}),s.location]})]})]})]}),e.jsx(f,{variant:"ghost",size:"sm",children:e.jsx(An,{className:"h-4 w-4"})})]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:s.title}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.content})]}),s.poll&&e.jsxs(v,{className:"p-4 bg-muted/20",children:[e.jsx("h4",{className:"font-medium mb-3",children:s.poll.question}),e.jsx("div",{className:"space-y-2",children:s.poll.options.map((x,N)=>{const k=j(x.votes,s.poll.totalVotes),u=s.poll.userVote!==void 0,h=s.poll.userVote===N;return e.jsx("div",{className:"space-y-1",children:e.jsxs(f,{variant:h?"default":"outline",className:"w-full justify-start relative overflow-hidden",onClick:()=>p(N),disabled:u,children:[u&&e.jsx("div",{className:"absolute left-0 top-0 h-full bg-primary/20 transition-all",style:{width:`${k}%`}}),e.jsx("span",{className:"relative z-10",children:x.text}),u&&e.jsxs("span",{className:"relative z-10 ml-auto text-sm",children:[x.votes," (",k.toFixed(1),"%)"]})]})},N)})}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[s.poll.totalVotes," total votes"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(_,{variant:"outline",children:s.category}),s.tags.map(x=>e.jsxs(_,{variant:"secondary",children:["#",x]},x))]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(f,{variant:"ghost",size:"sm",onClick:d,className:c?"text-red-500":"",children:[e.jsx(Qt,{className:`h-4 w-4 mr-1 ${c?"fill-current":""}`}),s.likes]}),e.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>t==null?void 0:t(s.id),children:[e.jsx(xs,{className:"h-4 w-4 mr-1"}),s.comments]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(f,{variant:"ghost",size:"sm",onClick:g,children:e.jsx(Is,{className:"h-4 w-4"})})})]}),o&&e.jsx("div",{className:"pt-2 border-t",children:e.jsx(na,{title:`${s.title} by ${s.author.name}`,text:`${s.content}

Shared from AgriConnect Community Forum`,size:"sm"})})]})]})},Qo=({searchTerm:s,onSearchChange:a,category:t,onCategoryChange:r,sortBy:i,onSortChange:c})=>e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search posts, topics, or keywords...",value:s,onChange:n=>a(n.target.value),className:"pl-10"})]}),e.jsxs(Y,{value:t,onValueChange:r,children:[e.jsx(H,{className:"w-full sm:w-48",children:e.jsx(W,{placeholder:"All Categories"})}),e.jsxs(G,{children:[e.jsx(C,{value:"all",children:"All Categories"}),e.jsx(C,{value:"general",children:"General Discussion"}),e.jsx(C,{value:"crops",children:"Crops & Farming"}),e.jsx(C,{value:"livestock",children:"Livestock"}),e.jsx(C,{value:"market",children:"Market Information"}),e.jsx(C,{value:"technology",children:"Technology"}),e.jsx(C,{value:"weather",children:"Weather & Climate"}),e.jsx(C,{value:"business",children:"Agribusiness"})]})]}),e.jsxs(Y,{value:i,onValueChange:c,children:[e.jsx(H,{className:"w-full sm:w-48",children:e.jsx(W,{placeholder:"Sort by"})}),e.jsxs(G,{children:[e.jsx(C,{value:"recent",children:"Most Recent"}),e.jsx(C,{value:"popular",children:"Most Popular"}),e.jsx(C,{value:"commented",children:"Most Commented"}),e.jsx(C,{value:"oldest",children:"Oldest First"})]})]})]}),Jo=()=>{const{user:s}=Xe(),{toast:a}=ee(),[t,r]=l.useState([]),[i,c]=l.useState(!0),[n,o]=l.useState(!1),[m,d]=l.useState(""),[p,j]=l.useState("all"),[g,x]=l.useState("recent");l.useEffect(()=>{N()},[p,g]);const N=async()=>{try{let h=P.from("community_posts").select(`
          *,
          profiles:user_id (
            full_name,
            avatar_url,
            is_verified
          ),
          community_polls (
            id,
            question,
            options,
            total_votes
          )
        `).eq("is_active",!0);switch(p!=="all"&&(h=h.eq("category",p)),g){case"popular":h=h.order("likes_count",{ascending:!1});break;case"commented":h=h.order("comments_count",{ascending:!1});break;case"oldest":h=h.order("created_at",{ascending:!0});break;default:h=h.order("created_at",{ascending:!1})}const{data:S,error:T}=await h;if(T)throw T;r(S||[])}catch(h){console.error("Error fetching posts:",h),a({title:"Error",description:"Failed to load community posts",variant:"destructive"})}finally{c(!1)}},k=async h=>{if(!s){a({title:"Authentication Required",description:"Please sign in to create a post",variant:"destructive"});return}try{const{data:S,error:T}=await P.from("community_posts").insert({user_id:s.id,title:h.title,content:h.content,category:h.category,location:h.location,tags:h.tags}).select().single();if(T)throw T;if(h.poll&&S){const A=h.poll.options.map((L,R)=>({text:L,votes:0})),{error:D}=await P.from("community_polls").insert({post_id:S.id,user_id:s.id,question:h.poll.question,options:A});if(D)throw D}a({title:"Success",description:"Your post has been created successfully!"}),o(!1),N()}catch(S){console.error("Error creating post:",S),a({title:"Error",description:"Failed to create post",variant:"destructive"})}},u=t.filter(h=>m===""||h.title.toLowerCase().includes(m.toLowerCase())||h.content.toLowerCase().includes(m.toLowerCase())||h.tags.some(S=>S.toLowerCase().includes(m.toLowerCase())));return i?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsx("div",{className:"container mx-auto py-8",children:e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Community Forum"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect with fellow farmers and agricultural experts"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsxs(w,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Ke,{className:"h-5 w-5"}),"Active Discussions"]})}),e.jsxs(y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Posts this month"})]})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsxs(w,{className:"flex items-center gap-2 text-lg",children:[e.jsx(oe,{className:"h-5 w-5"}),"Community Members"]})}),e.jsxs(y,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"2,500+"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active farmers"})]})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsxs(w,{className:"flex items-center gap-2 text-lg",children:[e.jsx(me,{className:"h-5 w-5"}),"Popular Topics"]})}),e.jsx(y,{children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("div",{children:"#maize-farming"}),e.jsx("div",{children:"#weather-alerts"}),e.jsx("div",{children:"#market-prices"})]})})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:"Quick Actions"})}),e.jsx(y,{children:e.jsxs(f,{onClick:()=>o(!0),className:"w-full",disabled:!s,children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"New Post"]})})]})]}),n&&e.jsx("div",{className:"mb-8",children:e.jsx(Yo,{onSubmit:k,onCancel:()=>o(!1)})}),e.jsx(Qo,{searchTerm:m,onSearchChange:d,category:p,onCategoryChange:j,sortBy:g,onSortChange:x}),e.jsx("div",{className:"space-y-6",children:u.length===0?e.jsx(v,{children:e.jsxs(y,{className:"text-center py-12",children:[e.jsx(Ke,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No posts found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:m?"Try adjusting your search terms.":"Be the first to start a discussion!"}),!n&&s&&e.jsxs(f,{onClick:()=>o(!0),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Create First Post"]})]})}):u.map(h=>{var S,T,A,D;return e.jsx(Wo,{post:{id:h.id,title:h.title,content:h.content,author:{name:((S=h.profiles)==null?void 0:S.full_name)||"Anonymous",avatar:(T=h.profiles)==null?void 0:T.avatar_url,isVerified:(A=h.profiles)==null?void 0:A.is_verified},category:h.category,tags:h.tags||[],location:h.location,likes:h.likes_count||0,comments:h.comments_count||0,createdAt:h.created_at,poll:(D=h.community_polls)!=null&&D[0]?{id:h.community_polls[0].id,question:h.community_polls[0].question,options:h.community_polls[0].options||[],totalVotes:h.community_polls[0].total_votes||0}:void 0}},h.id)})})]})]})},Zo=()=>{const[s,a]=l.useState(!navigator.onLine);return l.useEffect(()=>{const t=()=>a(!1),r=()=>a(!0);return window.addEventListener("online",t),window.addEventListener("offline",r),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}},[]),s?e.jsx("div",{style:{background:"#fbbf24",color:"#1f2937",padding:"8px",textAlign:"center",position:"fixed",top:0,width:"100%",zIndex:1e3},children:"You are offline. Some features may be limited. Actions will sync when you reconnect."}):null},Xo=({formStep:s})=>e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`rounded-full w-8 h-8 flex items-center justify-center ${s>=1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"1"}),e.jsx("div",{className:`h-1 w-12 ${s>=2?"bg-primary":"bg-muted"}`}),e.jsx("div",{className:`rounded-full w-8 h-8 flex items-center justify-center ${s>=2?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"2"}),e.jsx("div",{className:`h-1 w-12 ${s>=3?"bg-primary":"bg-muted"}`}),e.jsx("div",{className:`rounded-full w-8 h-8 flex items-center justify-center ${s>=3?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"3"})]})}),ed=({formErrors:s,businessName:a,setBusinessName:t,phone:r,setPhone:i,email:c,setEmail:n,selectedCounties:o,handleCountySelection:m,businessReg:d,setBusinessReg:p,yearsInBusiness:j,setYearsInBusiness:g,description:x,setDescription:N,handleNextStep:k,user:u,counties:h})=>e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"businessName",className:s.businessName?"text-destructive":"",children:"Business Name*"}),e.jsx(M,{id:"businessName",value:a,onChange:S=>t(S.target.value),placeholder:"Your transport company name",className:s.businessName?"border-destructive":""}),s.businessName&&e.jsx("p",{className:"text-xs text-destructive",children:s.businessName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"phone",className:s.phone?"text-destructive":"",children:"Phone Number*"}),e.jsx(M,{id:"phone",value:r,onChange:S=>i(S.target.value),placeholder:"+254...",className:s.phone?"border-destructive":""}),s.phone&&e.jsx("p",{className:"text-xs text-destructive",children:s.phone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"email",className:s.email?"text-destructive":"",children:"Email Address*"}),e.jsx(M,{id:"email",type:"email",value:c,onChange:S=>n(S.target.value),placeholder:"contact@yourcompany.com",className:s.email?"border-destructive":""}),s.email&&e.jsx("p",{className:"text-xs text-destructive",children:s.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{className:s.counties?"text-destructive":"",children:"Counties Served*"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:h.map(S=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:`county-${S}`,checked:o.includes(S),onCheckedChange:()=>m(S)}),e.jsx("label",{htmlFor:`county-${S}`,className:"text-sm cursor-pointer",children:S})]},S))}),s.counties&&e.jsx("p",{className:"text-xs text-destructive",children:s.counties})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"businessReg",children:"Business Registration Number (Optional)"}),e.jsx(M,{id:"businessReg",value:d,onChange:S=>p(S.target.value),placeholder:"KE12345678"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"yearsInBusiness",className:s.yearsInBusiness?"text-destructive":"",children:"Years in Business*"}),e.jsxs(Y,{value:j,onValueChange:g,children:[e.jsx(H,{className:s.yearsInBusiness?"border-destructive":"",children:e.jsx(W,{placeholder:"Select years"})}),e.jsxs(G,{children:[e.jsx(C,{value:"<1",children:"Less than 1 year"}),e.jsx(C,{value:"1-3",children:"1-3 years"}),e.jsx(C,{value:"3-5",children:"3-5 years"}),e.jsx(C,{value:"5+",children:"More than 5 years"})]})]}),s.yearsInBusiness&&e.jsx("p",{className:"text-xs text-destructive",children:s.yearsInBusiness})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"description",className:s.description?"text-destructive":"",children:"Business Description*"}),e.jsx(ge,{id:"description",value:x,onChange:S=>N(S.target.value),placeholder:"Tell us more about your transport services...",rows:4,className:s.description?"border-destructive":""}),s.description&&e.jsx("p",{className:"text-xs text-destructive",children:s.description})]})]}),!u&&e.jsxs("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md flex items-start",children:[e.jsx(at,{className:"h-5 w-5 text-yellow-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["You are not logged in. Please ",e.jsx("a",{href:"/login",className:"text-primary font-medium",children:"sign in"})," or",e.jsx("a",{href:"/signup",className:"text-primary font-medium",children:" create an account"})," to register as a transporter."]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(f,{onClick:k,disabled:!u,children:"Continue"})})]}),sd=({formErrors:s,vehicleType:a,setVehicleType:t,vehicleCount:r,setVehicleCount:i,loadCapacity:c,setLoadCapacity:n,rates:o,setRates:m,availableTimes:d,handleAvailableTimeToggle:p,specialFeatures:j,handleSpecialFeatureToggle:g,handleSubmit:x,isSubmitting:N,setFormStep:k})=>e.jsxs(e.Fragment,{children:[e.jsx("form",{onSubmit:x,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"vehicleType",className:s.vehicleType?"text-destructive":"",children:"Vehicle Type*"}),e.jsxs(Y,{value:a,onValueChange:t,children:[e.jsx(H,{className:s.vehicleType?"border-destructive":"",children:e.jsx(W,{placeholder:"Select vehicle type"})}),e.jsxs(G,{children:[e.jsx(C,{value:"pickup",children:"Pickup"}),e.jsx(C,{value:"van",children:"Van"}),e.jsx(C,{value:"truck-small",children:"Truck (3-5 tons)"}),e.jsx(C,{value:"truck-medium",children:"Truck (5-10 tons)"}),e.jsx(C,{value:"truck-large",children:"Heavy Truck (10+ tons)"}),e.jsx(C,{value:"motorcycle",children:"Motorcycle"})]})]}),s.vehicleType&&e.jsx("p",{className:"text-xs text-destructive",children:s.vehicleType})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"vehicleCount",className:s.vehicleCount?"text-destructive":"",children:"Number of Vehicles*"}),e.jsxs(Y,{value:r,onValueChange:i,children:[e.jsx(H,{className:s.vehicleCount?"border-destructive":"",children:e.jsx(W,{placeholder:"Select count"})}),e.jsxs(G,{children:[e.jsx(C,{value:"1",children:"1"}),e.jsx(C,{value:"2-5",children:"2-5"}),e.jsx(C,{value:"6-10",children:"6-10"}),e.jsx(C,{value:"10+",children:"More than 10"})]})]}),s.vehicleCount&&e.jsx("p",{className:"text-xs text-destructive",children:s.vehicleCount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"loadCapacity",className:s.loadCapacity?"text-destructive":"",children:"Load Capacity*"}),e.jsxs(Y,{value:c,onValueChange:n,children:[e.jsx(H,{className:s.loadCapacity?"border-destructive":"",children:e.jsx(W,{placeholder:"Select capacity"})}),e.jsxs(G,{children:[e.jsx(C,{value:"<1",children:"Less than 1 ton"}),e.jsx(C,{value:"1-3",children:"1-3 tons"}),e.jsx(C,{value:"3-5",children:"3-5 tons"}),e.jsx(C,{value:"5-10",children:"5-10 tons"}),e.jsx(C,{value:"10+",children:"More than 10 tons"})]})]}),s.loadCapacity&&e.jsx("p",{className:"text-xs text-destructive",children:s.loadCapacity})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"rates",className:s.rates?"text-destructive":"",children:"Average Rates*"}),e.jsx(M,{id:"rates",value:o,onChange:u=>m(u.target.value),placeholder:"e.g., KES 5,000 per trip",className:s.rates?"border-destructive":""}),s.rates&&e.jsx("p",{className:"text-xs text-destructive",children:s.rates})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"availableTimes",className:s.availableTimes?"text-destructive":"",children:"Available Times*"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"morning",checked:d.includes("morning"),onCheckedChange:()=>p("morning")}),e.jsx("label",{htmlFor:"morning",className:"text-sm",children:"Morning (5AM-11AM)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"afternoon",checked:d.includes("afternoon"),onCheckedChange:()=>p("afternoon")}),e.jsx("label",{htmlFor:"afternoon",className:"text-sm",children:"Afternoon (11AM-4PM)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"evening",checked:d.includes("evening"),onCheckedChange:()=>p("evening")}),e.jsx("label",{htmlFor:"evening",className:"text-sm",children:"Evening (4PM-9PM)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"night",checked:d.includes("night"),onCheckedChange:()=>p("night")}),e.jsx("label",{htmlFor:"night",className:"text-sm",children:"Night (9PM-5AM)"})]})]}),s.availableTimes&&e.jsx("p",{className:"text-xs text-destructive",children:s.availableTimes})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Special Features"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"refrigeration",checked:j.includes("refrigeration"),onCheckedChange:()=>g("refrigeration")}),e.jsx("label",{htmlFor:"refrigeration",className:"text-sm",children:"Refrigerated Transport"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"tracking",checked:j.includes("tracking"),onCheckedChange:()=>g("tracking")}),e.jsx("label",{htmlFor:"tracking",className:"text-sm",children:"GPS Tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"insurance",checked:j.includes("insurance"),onCheckedChange:()=>g("insurance")}),e.jsx("label",{htmlFor:"insurance",className:"text-sm",children:"Cargo Insurance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"loading",checked:j.includes("loading"),onCheckedChange:()=>g("loading")}),e.jsx("label",{htmlFor:"loading",className:"text-sm",children:"Loading/Unloading Service"})]})]})]})]})}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(f,{variant:"outline",onClick:()=>k(1),children:"Back"}),e.jsx(f,{onClick:x,disabled:N,children:N?"Registering...":"Complete Registration"})]})]}),td=()=>{const s=Ne();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Se,{className:"w-8 h-8 text-primary"})})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"Your account has been successfully created. You will start receiving transport requests from farmers in your area soon."}),e.jsxs("div",{className:"flex flex-col items-center space-y-3 my-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Access to transport requests in your regions"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Geographic route planning and optimization"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Verified transporter badge on the platform"})]})]})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(f,{onClick:()=>s("/"),children:"Go to Dashboard"})})]})},ri=te.object({businessName:te.string().min(3,"Business name must be at least 3 characters"),phone:te.string().min(10,"Please enter a valid phone number"),email:te.string().email("Please enter a valid email address"),counties:te.array(te.string()).min(1,"Please select at least one county"),businessReg:te.string().optional(),yearsInBusiness:te.string().min(1,"Please select years in business"),description:te.string().min(20,"Description must be at least 20 characters"),vehicleType:te.string().min(1,"Please select a vehicle type"),vehicleCount:te.string().min(1,"Please select number of vehicles"),loadCapacity:te.string().min(1,"Please select load capacity"),rates:te.string().min(3,"Please provide your rates"),availableTimes:te.array(te.string()).min(1,"Please select at least one available time"),specialFeatures:te.array(te.string()).optional()}),ad=(s,a,t,r,i,c,n)=>{try{const o={businessName:s,phone:a,email:t,counties:r,businessReg:i,yearsInBusiness:c,description:n};return ri.pick({businessName:!0,phone:!0,email:!0,counties:!0,yearsInBusiness:!0,description:!0}).parse(o),{valid:!0,errors:{}}}catch(o){if(o instanceof te.ZodError){const m={};return o.errors.forEach(d=>{const p=d.path[0];m[p]=d.message}),{valid:!1,errors:m}}return{valid:!1,errors:{form:"Validation failed"}}}},rd=(s,a,t,r,i,c)=>{try{const n={vehicleType:s,vehicleCount:a,loadCapacity:t,rates:r,availableTimes:i,specialFeatures:c};return ri.pick({vehicleType:!0,vehicleCount:!0,loadCapacity:!0,rates:!0,availableTimes:!0,specialFeatures:!0}).parse(n),{valid:!0,errors:{}}}catch(n){if(n instanceof te.ZodError){const o={};return n.errors.forEach(m=>{const d=m.path[0];o[d]=m.message}),{valid:!1,errors:o}}return{valid:!1,errors:{form:"Validation failed"}}}},id=()=>{const{toast:s}=ee(),[a,t]=l.useState(!1),[r,i]=l.useState(1),[c,n]=l.useState({}),[o,m]=l.useState(null),[d,p]=l.useState(""),[j,g]=l.useState(""),[x,N]=l.useState(""),[k,u]=l.useState([]),[h,S]=l.useState(""),[T,A]=l.useState(""),[D,L]=l.useState(""),[R,$]=l.useState(""),[Z,F]=l.useState(""),[Q,he]=l.useState(""),[$e,z]=l.useState(""),[E,X]=l.useState([]),[ae,We]=l.useState([]),wt=["Nairobi","Mombasa","Kisumu","Nakuru","Kiambu","Meru","Kakamega","Nyeri","Machakos","Uasin Gishu","Kirinyaga","Bungoma","Bomet"];l.useEffect(()=>{(async()=>{var Ee;const{data:Gs}=await P.auth.getSession();m(((Ee=Gs.session)==null?void 0:Ee.user)||null)})();const{data:_e}=P.auth.onAuthStateChange((Gs,Ee)=>{m((Ee==null?void 0:Ee.user)||null)});return()=>{_e.subscription.unsubscribe()}},[]);const li=je=>{k.includes(je)?u(k.filter(_e=>_e!==je)):u([...k,je])},ci=je=>{E.includes(je)?X(E.filter(_e=>_e!==je)):X([...E,je])},oi=je=>{ae.includes(je)?We(ae.filter(_e=>_e!==je)):We([...ae,je])},di=()=>{const{valid:je,errors:_e}=ad(d,j,x,k,h,T,D);je?(n({}),i(2)):(n(_e),s({title:"Validation Error",description:"Please fix the errors in the form before continuing.",variant:"destructive"}))},mi=async je=>{je.preventDefault();const{valid:_e,errors:Gs}=rd(R,Z,Q,$e,E,ae);if(!_e){n(Gs),s({title:"Validation Error",description:"Please fix the errors in the form before submitting.",variant:"destructive"});return}if(t(!0),!o){s({title:"Authentication Required",description:"You need to be logged in to register as a transporter.",variant:"destructive"}),t(!1);return}try{const Ee={user_id:o.id,name:d,service_type:"transport",counties:k,contact_info:`${j} | ${x}`,capacity:Z,load_capacity:parseInt(Q.split("-")[0])||1e3,rates:$e,has_refrigeration:ae.includes("refrigeration"),vehicle_type:R},{data:nm,error:pa}=await P.from("transporters").insert(Ee).select();if(pa)throw new Error(pa.message);s({title:"Registration Successful",description:"Your transporter account has been created. You'll start receiving transport requests soon."}),i(3)}catch(Ee){console.error("Error submitting transporter data:",Ee),s({title:"Registration Failed",description:"There was an error creating your account. Please try again.",variant:"destructive"})}finally{t(!1)}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Transport Provider Registration"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"Join our network of transport providers and connect with farmers who need to move their produce to markets"})]}),e.jsx(Xo,{formStep:r}),e.jsxs(v,{className:"max-w-4xl mx-auto",children:[r===1&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Business Information"}),e.jsx(B,{children:"Tell us about your transport business"})]}),e.jsx(y,{children:e.jsx(ed,{formErrors:c,businessName:d,setBusinessName:p,phone:j,setPhone:g,email:x,setEmail:N,selectedCounties:k,handleCountySelection:li,businessReg:h,setBusinessReg:S,yearsInBusiness:T,setYearsInBusiness:A,description:D,setDescription:L,handleNextStep:di,user:o,counties:wt})})]}),r===2&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Vehicle & Service Details"}),e.jsx(B,{children:"Tell us about your transportation capabilities"})]}),e.jsx(y,{children:e.jsx(sd,{formErrors:c,vehicleType:R,setVehicleType:$,vehicleCount:Z,setVehicleCount:F,loadCapacity:Q,setLoadCapacity:he,rates:$e,setRates:z,availableTimes:E,handleAvailableTimeToggle:ci,specialFeatures:ae,handleSpecialFeatureToggle:oi,handleSubmit:mi,isSubmitting:a,setFormStep:i})})]}),r===3&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{children:[e.jsx(w,{className:"text-center",children:"Registration Complete!"}),e.jsx(B,{className:"text-center",children:"Thank you for joining our transport provider network"})]}),e.jsx(y,{children:e.jsx(td,{})})]})]})]})]})},nd=()=>{const s=Ne(),{toast:a}=ee(),[t,r]=l.useState(""),[i,c]=l.useState(""),[n,o]=l.useState(""),[m,d]=l.useState(["Storage","Transport","Quality Control","Market Linkage","Training","Input Supplier","Inspector"]),[p,j]=l.useState([]),[g,x]=l.useState(""),[N,k]=l.useState(""),[u,h]=l.useState(""),[S,T]=l.useState(""),[A,D]=l.useState(["Organic","Fair Trade","Affordable","Reliable","Certified"]),[L,R]=l.useState([]),[$,Z]=l.useState(!1),F=["Nairobi","Mombasa","Kisumu","Nakuru","Eldoret","Machakos","Kiambu","Nyeri","Kakamega","Kisii","Thika","Garissa","Lamu","Turkana"],Q=z=>{j(E=>E.includes(z)?E.filter(X=>X!==z):[...E,z])},he=z=>{R(E=>E.includes(z)?E.filter(X=>X!==z):[...E,z])},$e=z=>{z.preventDefault();const E={name:t,businessType:i,description:n,services:p,location:{county:g,specificLocation:N},contactInfo:u,website:S,tags:L,rates:"Contact for rates",verified:!1,rating:0,reviewCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("Submitting service provider:",E),a({title:"Service registered",description:"Your service has been submitted for verification."}),Z(!0)};return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(es,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(ws,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Service Provider Registration"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Register your agricultural service to connect with farmers in need."}),$&&e.jsxs("div",{className:"rounded-md bg-green-50 p-4 mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Registration Successful!"}),e.jsx("div",{className:"mt-2 text-sm text-green-700",children:"Your service has been registered and is awaiting verification."}),e.jsx(f,{variant:"link",onClick:()=>s("/"),children:"Back to Home"})]}),e.jsxs("form",{onSubmit:$e,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"name",children:"Service Name"}),e.jsx(M,{id:"name",type:"text",value:t,onChange:z=>r(z.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"businessType",children:"Business Type"}),e.jsxs(Y,{value:i,onValueChange:c,required:!0,children:[e.jsx(H,{id:"businessType",children:e.jsx(W,{placeholder:"Select a business type"})}),e.jsxs(G,{children:[e.jsx(C,{value:"storage",children:"Storage"}),e.jsx(C,{value:"transport",children:"Transport"}),e.jsx(C,{value:"quality-control",children:"Quality Control"}),e.jsx(C,{value:"market-linkage",children:"Market Linkage"}),e.jsx(C,{value:"training",children:"Training"}),e.jsx(C,{value:"input-supplier",children:"Input Supplier"}),e.jsx(C,{value:"inspector",children:"Inspector"})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"description",children:"Description"}),e.jsx(ge,{id:"description",value:n,onChange:z=>o(z.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Services Offered"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(z=>e.jsxs("div",{className:"space-x-2",children:[e.jsx(xe,{id:`service-${z}`,checked:p.includes(z),onCheckedChange:()=>Q(z)}),e.jsx(I,{htmlFor:`service-${z}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:z})]},z))})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"county",children:"County"}),e.jsxs(Y,{value:g,onValueChange:x,required:!0,children:[e.jsx(H,{id:"county",children:e.jsx(W,{placeholder:"Select a county"})}),e.jsx(G,{children:F.map(z=>e.jsx(C,{value:z,children:z},z))})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"specificLocation",children:"Specific Location"}),e.jsx(M,{id:"specificLocation",type:"text",value:N,onChange:z=>k(z.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"contactInfo",children:"Contact Information"}),e.jsx(M,{id:"contactInfo",type:"text",value:u,onChange:z=>h(z.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"website",children:"Website (optional)"}),e.jsx(M,{id:"website",type:"url",value:S,onChange:z=>T(z.target.value)})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(z=>e.jsxs("div",{className:"space-x-2",children:[e.jsx(xe,{id:`tag-${z}`,checked:L.includes(z),onCheckedChange:()=>he(z)}),e.jsx(I,{htmlFor:`tag-${z}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:z})]},z))})]}),e.jsx(f,{type:"submit",children:"Register Service"})]})]})]})},Ta=({data:s,title:a,type:t})=>{const r=l.useRef(null);l.useEffect(()=>{if(!r.current||!s.length)return;const m=Ct(r.current);m.selectAll("*").remove();const d={top:20,right:30,bottom:40,left:40},p=400-d.left-d.right,j=300-d.top-d.bottom,g=m.attr("width",p+d.left+d.right).attr("height",j+d.top+d.bottom).append("g").attr("transform",`translate(${d.left},${d.top})`);switch(t){case"bar":i(g,s,p,j);break;case"pie":c(g,s,p,j);break;case"scatter":n(g,s,p,j);break;case"line":o(g,s,p,j);break}},[s,t]);const i=(m,d,p,j)=>{const g=Pn().domain(d.map(N=>N.name)).range([0,p]).padding(.1),x=Cs().domain([0,Tn(d,N=>N.value)||0]).range([j,0]);m.append("g").attr("transform",`translate(0,${j})`).call(kt(g)),m.append("g").call(St(x)),m.selectAll(".bar").data(d).enter().append("rect").attr("class","bar").attr("x",N=>g(N.name)||0).attr("width",g.bandwidth()).attr("y",N=>x(N.value)).attr("height",N=>j-x(N.value)).attr("fill","#22c55e").on("mouseover",function(N,k){Ct(this).attr("fill","#16a34a")}).on("mouseout",function(N,k){Ct(this).attr("fill","#22c55e")})},c=(m,d,p,j)=>{const g=Math.min(p,j)/2,x=In(Mn),N=Dn().value(h=>h.value),k=En().innerRadius(0).outerRadius(g),u=N(d);m.attr("transform",`translate(${p/2},${j/2})`),m.selectAll(".arc").data(u).enter().append("g").attr("class","arc").append("path").attr("d",k).attr("fill",(h,S)=>x(S.toString())),m.selectAll(".arc").append("text").attr("transform",h=>`translate(${k.centroid(h)})`).attr("text-anchor","middle").text(h=>h.data.name)},n=(m,d,p,j)=>{const g=Cs().domain(Ys(d,(N,k)=>k)).range([0,p]),x=Cs().domain(Ys(d,N=>N.value)).range([j,0]);m.append("g").attr("transform",`translate(0,${j})`).call(kt(g)),m.append("g").call(St(x)),m.selectAll(".dot").data(d).enter().append("circle").attr("class","dot").attr("cx",(N,k)=>g(k)).attr("cy",N=>x(N.value)).attr("r",5).attr("fill","#3b82f6")},o=(m,d,p,j)=>{const g=Cs().domain(Ys(d,(k,u)=>u)).range([0,p]),x=Cs().domain(Ys(d,k=>k.value)).range([j,0]),N=Fn().x((k,u)=>g(u)).y(k=>x(k.value));m.append("g").attr("transform",`translate(0,${j})`).call(kt(g)),m.append("g").call(St(x)),m.append("path").datum(d).attr("fill","none").attr("stroke","#ef4444").attr("stroke-width",2).attr("d",N)};return e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{className:"text-lg",children:a})}),e.jsx(y,{children:e.jsx("svg",{ref:r})})]})},Ia={knbs:"https://www.knbs.or.ke/agricultural-statistics/",kilimo:"https://kilimo.go.ke/",fao:"https://www.fao.org/faostat/en/#country/114",worldBank:"https://data.worldbank.org/country/KE?view=chart",centralBank:"https://www.centralbank.go.ke/"},ii=[{id:"1",name:"Maize Production",category:"Staple Crops",county:"Uasin Gishu",value:"2.1 million bags",unit:"bags (90kg)",source:"KNBS Economic Survey 2023",verified:!0},{id:"2",name:"Tea Production",category:"Cash Crops",county:"Kericho",value:"485,000 tonnes",unit:"tonnes",source:"Tea Board of Kenya 2023",verified:!0},{id:"3",name:"Coffee Production",category:"Cash Crops",county:"Nyeri",value:"45,000 tonnes",unit:"tonnes",source:"Coffee Board of Kenya 2023",verified:!0},{id:"4",name:"Potato Production",category:"Food Crops",county:"Nyandarua",value:"1.8 million tonnes",unit:"tonnes",source:"KNBS Agricultural Census 2023",verified:!0},{id:"5",name:"Dairy Production",category:"Livestock",county:"Kiambu",value:"5.2 billion litres",unit:"litres/year",source:"Kenya Dairy Board 2023",verified:!0}],Ma=["Baringo","Bomet","Bungoma","Busia","Elgeyo-Marakwet","Embu","Garissa","Homa Bay","Isiolo","Kajiado","Kakamega","Kericho","Kiambu","Kilifi","Kirinyaga","Kisii","Kisumu","Kitui","Kwale","Laikipia","Lamu","Machakos","Makueni","Mandera","Marsabit","Meru","Migori","Mombasa","Murang'a","Nairobi","Nakuru","Nandi","Narok","Nyamira","Nyandarua","Nyeri","Samburu","Siaya","Taita-Taveta","Tana River","Tharaka-Nithi","Trans Nzoia","Turkana","Uasin Gishu","Vihiga","Wajir","West Pokot"],ld=async()=>Promise.resolve(ii),cd=()=>{const[s,a]=l.useState("real-data"),[t,r]=l.useState(ii),[i,c]=l.useState(""),[n,o]=l.useState("");l.useEffect(()=>{(async()=>{try{const g=await ld();r(g)}catch(g){console.error("Error loading real data:",g)}})()},[]);const m=[...new Set(t.map(j=>j.category))],d=t.filter(j=>{const g=!i||i==="All Categories"||j.category===i,x=!n||n==="All Counties"||j.county===n;return g&&x}),p=d.slice(0,10).map(j=>({name:j.name,value:parseFloat(j.value.toString().replace(/[^\d.]/g,""))||0,category:j.category}));return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-8 px-4 md:px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"Verified Agricultural Data for Kenya"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto mb-4",children:"Real-time integration with verified Kenyan government and institutional data sources"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(ds,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"All data verified from legitimate sources"})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Verified data sources:"}),Object.entries(Ia).map(([j,g])=>e.jsxs("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs bg-green-50 hover:bg-green-100 px-3 py-1 rounded-full text-green-700 hover:text-green-800 transition-colors border border-green-200",children:[e.jsx(qe,{className:"h-3 w-3 mr-1"}),j==="knbs"?"Kenya National Bureau of Statistics":j==="kilimo"?"Ministry of Agriculture":j==="fao"?"FAO Kenya":j==="worldBank"?"World Bank Kenya":"Central Bank of Kenya"]},j))]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-5 w-5 text-green-600"}),"Verified Kenya Agricultural Data"]}),e.jsx(B,{children:"Explore verified data from Kenya's leading agricultural institutions"})]}),e.jsx(y,{children:e.jsxs(de,{value:s,onValueChange:a,className:"w-full",children:[e.jsxs(ce,{className:"w-full mb-6",children:[e.jsx(K,{value:"real-data",children:"Verified Data"}),e.jsx(K,{value:"sources",children:"Data Sources"})]}),e.jsxs(O,{value:"real-data",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-end gap-4",children:[e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx(I,{htmlFor:"category",className:"mb-2 block",children:"Category"}),e.jsxs(Y,{value:i,onValueChange:c,children:[e.jsx(H,{id:"category",children:e.jsx(W,{placeholder:"All Categories"})}),e.jsxs(G,{children:[e.jsx(C,{value:"All Categories",children:"All Categories"}),m.map(j=>e.jsx(C,{value:j,children:j},j))]})]})]}),e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx(I,{htmlFor:"county",className:"mb-2 block",children:"County"}),e.jsxs(Y,{value:n,onValueChange:o,children:[e.jsx(H,{id:"county",children:e.jsx(W,{placeholder:"All Counties"})}),e.jsxs(G,{children:[e.jsx(C,{value:"All Counties",children:"All Counties"}),Ma.map(j=>e.jsx(C,{value:j,children:j},j))]})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Commodity"}),e.jsx("th",{className:"text-left p-2",children:"Category"}),e.jsx("th",{className:"text-left p-2",children:"County"}),e.jsx("th",{className:"text-right p-2",children:"Production"}),e.jsx("th",{className:"text-left p-2",children:"Source"}),e.jsx("th",{className:"text-center p-2",children:"Verified"})]})}),e.jsx("tbody",{children:d.map(j=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-2 font-medium",children:j.name}),e.jsx("td",{className:"p-2",children:e.jsx(_,{variant:"outline",children:j.category})}),e.jsx("td",{className:"p-2",children:j.county}),e.jsx("td",{className:"p-2 text-right font-medium",children:j.value}),e.jsx("td",{className:"p-2 text-sm text-muted-foreground",children:j.source||"Verified Source"}),e.jsx("td",{className:"p-2 text-center",children:j.verified&&e.jsx(ds,{className:"h-4 w-4 text-green-600 mx-auto"})})]},j.id))})]})})]}),e.jsx(O,{value:"sources",children:e.jsx("div",{className:"space-y-4",children:Object.entries(Ia).map(([j,g])=>e.jsx(v,{children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:j==="knbs"?"Kenya National Bureau of Statistics":j==="kilimo"?"Ministry of Agriculture & Livestock Development":j==="fao"?"Food and Agriculture Organization (Kenya)":j==="worldBank"?"World Bank (Kenya Data)":"Central Bank of Kenya"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Official government/institutional source"})]}),e.jsxs("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-800",children:["Visit Source ",e.jsx(qe,{className:"h-4 w-4"})]})]})})},j))})})]})})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Real Data Visualizations"}),e.jsx(B,{children:"Interactive charts based on verified Kenyan agricultural data"})]}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Ta,{data:p,title:"Production by Category",type:"bar"}),e.jsx(Ta,{data:p,title:"County Distribution",type:"pie"})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-amber-600"}),"Data Integrity Notice"]})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"All data displayed is sourced from verified Kenyan government and institutional sources. We do not use mock, sample, or fabricated data."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ds,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Government verified"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ds,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Real-time updates"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ds,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Institutional sources"})]})]})]})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Kenya Agricultural Overview"})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:Ma.length}),e.jsx("div",{className:"text-sm text-green-600",children:"Counties Covered"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:m.length}),e.jsx("div",{className:"text-sm text-blue-600",children:"Crop Categories"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-700",children:"100%"}),e.jsx("div",{className:"text-sm text-purple-600",children:"Data Verified"})]})]})})]})]})]})]})]})},od=()=>e.jsxs(v,{className:"border-green-200",children:[e.jsx(b,{children:e.jsx(w,{children:"Production API Overview"})}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Base URL"}),e.jsx("code",{className:"bg-muted p-2 rounded-md block",children:"https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Available API Endpoints"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(v,{className:"flex flex-col border-green-200 bg-green-50",children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:"Farmers API"})}),e.jsxs(y,{className:"flex-grow",children:[e.jsx("p",{className:"text-sm mb-4",children:"Access farmer data from across Kenya with different access levels based on your subscription tier."}),e.jsx("div",{className:"text-xs bg-white p-2 rounded",children:e.jsx("code",{children:"GET /api-farmers"})})]})]}),e.jsxs(v,{className:"flex flex-col border-green-200 bg-green-50",children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:"Markets API"})}),e.jsxs(y,{className:"flex-grow",children:[e.jsx("p",{className:"text-sm mb-4",children:"Get market information with real price data and analytics. Available to Developer and Enterprise tiers."}),e.jsx("div",{className:"text-xs bg-white p-2 rounded",children:e.jsx("code",{children:"GET /api-markets"})})]})]}),e.jsxs(v,{className:"flex flex-col border-green-200 bg-green-50",children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:"Commodities API"})}),e.jsxs(y,{className:"flex-grow",children:[e.jsx("p",{className:"text-sm mb-4",children:"Access commodity pricing and trend data with different data depths based on subscription tier."}),e.jsx("div",{className:"text-xs bg-white p-2 rounded",children:e.jsx("code",{children:"GET /api-commodities"})})]})]}),e.jsxs(v,{className:"flex flex-col border-green-200 bg-green-50",children:[e.jsx(b,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:"Supply Chain API"})}),e.jsxs(y,{className:"flex-grow",children:[e.jsx("p",{className:"text-sm mb-4",children:"Enterprise-tier access to comprehensive supply chain analytics, logistics data, and forecasts."}),e.jsx("div",{className:"text-xs bg-white p-2 rounded",children:e.jsx("code",{children:"GET /api-supply-chain"})})]})]})]})]}),e.jsxs("div",{className:"bg-green-100 p-4 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Production Features"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Security"}),e.jsxs("ul",{className:"space-y-2 list-disc pl-5 text-sm",children:[e.jsx("li",{children:"API key authentication with SHA-256 hashing"}),e.jsx("li",{children:"Rate limiting by subscription tier"}),e.jsx("li",{children:"Request validation and sanitization"}),e.jsx("li",{children:"Row-level security policies"}),e.jsx("li",{children:"Comprehensive request logging"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Performance"}),e.jsxs("ul",{className:"space-y-2 list-disc pl-5 text-sm",children:[e.jsx("li",{children:"Auto-scaling serverless functions"}),e.jsx("li",{children:"Response time monitoring"}),e.jsx("li",{children:"Traffic-based optimization"}),e.jsx("li",{children:"Global CDN distribution"}),e.jsx("li",{children:"Request caching mechanisms"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Getting Started"}),e.jsxs("ol",{className:"space-y-2 list-decimal pl-5",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Generate an API key: "}),e.jsxs(V,{to:"/api-docs?tab=keys",className:"text-blue-600 inline-flex items-center hover:underline",children:["Visit the API Keys tab ",e.jsx(qe,{className:"h-3 w-3 ml-1"})]})]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Send requests with your key: "}),"Include your API key in the X-API-Key header"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Upgrade your subscription: "}),"Purchase a business advertisement to access higher tiers"]})]})]})]})]}),dd=()=>(ee(),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"API Authentication"})}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"API Key Authentication"}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg mb-4",children:[e.jsx("p",{className:"font-medium text-green-800 mb-2",children:"âœ… Production-Ready API Keys"}),e.jsx("p",{className:"text-sm mb-4",children:"You can generate real API keys that work with our endpoints by visiting the API Keys tab."}),e.jsx(V,{to:"/api-docs?tab=keys",children:e.jsxs(f,{className:"flex items-center",children:["Go to API Keys Management",e.jsx(ut,{className:"ml-2 h-4 w-4"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Using Your API Key"}),e.jsxs("p",{className:"mb-4",children:["Include your API key in the ",e.jsx("code",{children:"X-API-Key"})," header of all API requests:"]}),e.jsx("div",{className:"bg-muted p-3 rounded-md",children:e.jsx("pre",{className:"text-xs overflow-auto",children:`// Example: X-API-Key header
X-API-Key: your_api_key_here

// Example curl request
curl -H "X-API-Key: your_api_key_here" https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-farmers`})}),e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"âš ï¸ API Key Security"}),e.jsxs("ul",{className:"space-y-2 text-sm list-disc pl-5 text-yellow-800",children:[e.jsx("li",{children:"Never expose your API key in client-side code"}),e.jsx("li",{children:"Use environment variables to store keys in your server code"}),e.jsx("li",{children:"Set up proper CORS policies on your server"}),e.jsx("li",{children:"Rotate your API keys periodically for added security"}),e.jsx("li",{children:"Delete inactive API keys to prevent unauthorized access"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Rate Limiting"}),e.jsx("p",{className:"mb-2",children:"Our API enforces the following rate limits based on your subscription tier:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border px-4 py-2 text-left",children:"Subscription"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Rate Limit"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Monthly Requests"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Data Access"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",children:"Free"}),e.jsx("td",{className:"border px-4 py-2",children:"100 req/minute"}),e.jsx("td",{className:"border px-4 py-2",children:"1,000"}),e.jsx("td",{className:"border px-4 py-2",children:"Basic (Limited)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",children:"Developer"}),e.jsx("td",{className:"border px-4 py-2",children:"500 req/minute"}),e.jsx("td",{className:"border px-4 py-2",children:"50,000"}),e.jsx("td",{className:"border px-4 py-2",children:"Standard"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",children:"Enterprise"}),e.jsx("td",{className:"border px-4 py-2",children:"2,000 req/minute"}),e.jsx("td",{className:"border px-4 py-2",children:"500,000"}),e.jsx("td",{className:"border px-4 py-2",children:"Premium (Full)"})]})]})]})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"â„¹ï¸ Rate Limit Response"}),e.jsx("p",{className:"text-sm mb-2 text-blue-700",children:"When rate limited, the API returns a 429 status code with headers:"}),e.jsx("pre",{className:"bg-white p-2 rounded text-xs",children:`{
  "error": "Rate limit exceeded",
  "meta": {
    "limit": 100,
    "remaining": 0,
    "reset_time": "2025-06-11T12:30:00Z"
  }
}`})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Handling"}),e.jsx("p",{className:"mb-2",children:"Common API error responses:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{children:[e.jsx("code",{children:"401 Unauthorized"})," - Invalid or missing API key"]}),e.jsxs("li",{children:[e.jsx("code",{children:"403 Forbidden"})," - Subscription level doesn't allow access"]}),e.jsxs("li",{children:[e.jsx("code",{children:"404 Not Found"})," - Endpoint or resource not found"]}),e.jsxs("li",{children:[e.jsx("code",{children:"429 Too Many Requests"})," - Rate limit exceeded"]}),e.jsxs("li",{children:[e.jsx("code",{children:"500 Internal Server Error"})," - Server-side error"]})]})]})]})]}));class Rt{static async getUserApiKeys(){var a;try{const{data:{session:t}}=await P.auth.getSession();if(!t)throw new Error("Not authenticated");const r=await P.functions.invoke("api-keys-management",{method:"GET",headers:{Authorization:`Bearer ${t.access_token}`}});if(r.error)throw new Error("Failed to fetch API keys");return((a=r.data)==null?void 0:a.data)||[]}catch(t){return console.error("Error fetching API keys:",t),[]}}static async createApiKey(a){try{const{data:{session:t}}=await P.auth.getSession();if(!t)throw new Error("Not authenticated");const r=await P.functions.invoke("api-keys-management",{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"},body:{name:a}});if(r.error)throw new Error("Failed to create API key");return r.data}catch(t){throw console.error("Error creating API key:",t),t}}static async deleteApiKey(a){try{const{data:{session:t}}=await P.auth.getSession();if(!t)throw new Error("Not authenticated");if((await P.functions.invoke("api-keys-management",{method:"DELETE",headers:{Authorization:`Bearer ${t.access_token}`},body:{id:a}})).error)throw new Error("Failed to delete API key")}catch(t){throw console.error("Error deleting API key:",t),t}}}const md=()=>{const[s,a]=l.useState([]),[t,r]=l.useState(!0),[i,c]=l.useState(!1),[n,o]=l.useState(""),[m,d]=l.useState(""),[p,j]=l.useState(!1),{toast:g}=ee();l.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0);const h=await Rt.getUserApiKeys();a(h)}catch{g({title:"Error",description:"Failed to load API keys",variant:"destructive"})}finally{r(!1)}},N=async()=>{if(!n.trim()){g({title:"Error",description:"Please enter a name for the API key",variant:"destructive"});return}try{const h=await Rt.createApiKey(n);d(h.api_key),j(!0),o(""),c(!1),await x(),g({title:"Success",description:"API key created successfully"})}catch{g({title:"Error",description:"Failed to create API key",variant:"destructive"})}},k=async h=>{try{await Rt.deleteApiKey(h),await x(),g({title:"Success",description:"API key deleted successfully"})}catch{g({title:"Error",description:"Failed to delete API key",variant:"destructive"})}},u=h=>{navigator.clipboard.writeText(h),g({title:"Copied!",description:"API key copied to clipboard"})};return t?e.jsx(v,{children:e.jsx(y,{className:"p-6",children:e.jsx("div",{className:"text-center",children:"Loading API keys..."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{children:"API Key Management"}),e.jsxs(gs,{open:i,onOpenChange:c,children:[e.jsx(yt,{asChild:!0,children:e.jsxs(f,{children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Create API Key"]})}),e.jsxs(is,{children:[e.jsx(js,{children:e.jsx(fs,{children:"Create New API Key"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"keyName",children:"API Key Name"}),e.jsx(M,{id:"keyName",value:n,onChange:h=>o(h.target.value),placeholder:"e.g., Production API Key"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(f,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(f,{onClick:N,children:"Create Key"})]})]})]})]})]})}),e.jsx(y,{children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No API keys found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first API key to start accessing the API"})]}):e.jsx("div",{className:"space-y-4",children:s.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:h.name}),e.jsx(_,{variant:h.is_active?"default":"secondary",children:h.is_active?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Key: ",h.key_preview]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(h.created_at).toLocaleDateString(),h.last_used_at&&e.jsxs("span",{className:"ml-4",children:["Last used: ",new Date(h.last_used_at).toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Zr,{children:[e.jsx(Xr,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"sm",children:e.jsx(vt,{className:"h-4 w-4"})})}),e.jsxs(la,{children:[e.jsxs(ca,{children:[e.jsx(da,{children:"Delete API Key"}),e.jsx(ma,{children:"Are you sure you want to delete this API key? This action cannot be undone."})]}),e.jsxs(oa,{children:[e.jsx(xa,{children:"Cancel"}),e.jsx(ua,{onClick:()=>k(h.id),children:"Delete"})]})]})]})})]},h.id))})})]}),m&&e.jsx(gs,{open:p,onOpenChange:j,children:e.jsxs(is,{children:[e.jsx(js,{children:e.jsx(fs,{children:"API Key Created Successfully"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Your API Key:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 text-sm bg-background p-2 rounded border",children:m}),e.jsx(f,{size:"sm",variant:"outline",onClick:()=>u(m),children:e.jsx(us,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium mb-1",children:"Important:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"This is the only time you'll see this key"}),e.jsx("li",{children:"Store it securely in your application"}),e.jsx("li",{children:"Never share your API key publicly"})]})]}),e.jsx(f,{onClick:()=>j(!1),className:"w-full",children:"I've Saved My API Key"})]})]})})]})};class ud{static async createAdvertisement(a){try{const{data:{user:t}}=await P.auth.getUser();if(!t)return{success:!1,error:"User not authenticated"};const{data:r,error:i}=await P.from("business_advertisements").insert({user_id:t.id,business_name:a.business_name,business_description:a.business_description,business_category:a.business_category,contact_email:a.contact_email,contact_phone:a.contact_phone,location:a.location,website_url:a.website_url,image_url:a.image_url,ad_content:a.ad_content,target_audience:a.target_audience}).select().single();return i?(console.error("Error creating advertisement:",i),{success:!1,error:i.message}):{success:!0,id:r.id}}catch(t){return console.error("Error in createAdvertisement:",t),{success:!1,error:"Failed to create advertisement"}}}static async getActiveAdvertisements(){try{const{data:a,error:t}=await P.from("business_advertisements").select("*").eq("is_active",!0).eq("payment_status","paid").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});return t?(console.error("Error fetching advertisements:",t),[]):(a||[]).map(r=>({...r,payment_status:r.payment_status}))}catch(a){return console.error("Error in getActiveAdvertisements:",a),[]}}static async getUserAdvertisements(){try{const{data:{user:a}}=await P.auth.getUser();if(!a)return[];const{data:t,error:r}=await P.from("business_advertisements").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});return r?(console.error("Error fetching user advertisements:",r),[]):(t||[]).map(i=>({...i,payment_status:i.payment_status}))}catch(a){return console.error("Error in getUserAdvertisements:",a),[]}}static async updatePaymentStatus(a,t,r){try{const i=r==="paid"?new Date(Date.now()+2592e6).toISOString():null,{error:c}=await P.from("business_advertisements").update({payment_status:r,payment_id:t,is_active:r==="paid",expires_at:i,amount_paid:r==="paid"?20:null}).eq("id",a);return c?(console.error("Error updating payment status:",c),{success:!1,error:c.message}):{success:!0}}catch(i){return console.error("Error in updatePaymentStatus:",i),{success:!1,error:"Failed to update payment status"}}}static async recordTransaction(a){try{const{data:{user:t}}=await P.auth.getUser();if(!t)return{success:!1,error:"User not authenticated"};const{error:r}=await P.from("payment_transactions").insert({user_id:t.id,advertisement_id:a.advertisement_id,payment_provider:a.payment_provider,transaction_id:a.transaction_id,amount:a.amount,currency:a.currency,status:a.status,payment_details:a.payment_details});return r?(console.error("Error recording transaction:",r),{success:!1,error:r.message}):{success:!0}}catch(t){return console.error("Error in recordTransaction:",t),{success:!1,error:"Failed to record transaction"}}}static async checkApiAccess(){try{const{data:{user:a}}=await P.auth.getUser();if(!a)return{hasAccess:!1,subscriptionType:null,requestsRemaining:0};const{data:t,error:r}=await P.from("business_advertisements").select("payment_status, expires_at, amount_paid").eq("user_id",a.id).eq("payment_status","paid").gt("expires_at",new Date().toISOString());if(r)return console.error("Error checking API access:",r),{hasAccess:!1,subscriptionType:"free",requestsRemaining:1e3};let i="free",c=1e3,n;if(t&&t.length>0){const o=t.reduce((m,d)=>(d.amount_paid||0)>(m.amount_paid||0)?d:m);o.amount_paid&&(o.amount_paid>=15e3?(i="enterprise",c=5e5):o.amount_paid>=2500&&(i="developer",c=5e4),n=o.expires_at)}return{hasAccess:!0,subscriptionType:i,requestsRemaining:c,expiresAt:n}}catch(a){return console.error("Error in checkApiAccess:",a),{hasAccess:!1,subscriptionType:"free",requestsRemaining:1e3}}}static async incrementViewCount(a){try{const{data:t}=await P.from("business_advertisements").select("views_count").eq("id",a).single();if(t){const r=(t.views_count||0)+1;await P.from("business_advertisements").update({views_count:r}).eq("id",a)}}catch(t){console.error("Error incrementing view count:",t)}}static async incrementClickCount(a){try{const{data:t}=await P.from("business_advertisements").select("clicks_count").eq("id",a).single();if(t){const r=(t.clicks_count||0)+1;await P.from("business_advertisements").update({clicks_count:r}).eq("id",a)}}catch(t){console.error("Error incrementing click count:",t)}}static async getAnalytics(){try{const[a,t]=await Promise.all([P.from("business_advertisements").select("id",{count:"exact"}),P.from("business_advertisements").select("id",{count:"exact"}).eq("is_active",!0)]),{data:r}=await P.from("business_advertisements").select("amount_paid").eq("payment_status","paid"),i=(r==null?void 0:r.reduce((m,d)=>m+(d.amount_paid||0),0))||0,{data:c}=await P.from("business_advertisements").select("business_category"),n={};c==null||c.forEach(m=>{n[m.business_category]=(n[m.business_category]||0)+1});const o=Object.entries(n).map(([m,d])=>({category:m,count:d})).sort((m,d)=>d.count-m.count).slice(0,5);return{totalAds:a.count||0,activeAds:t.count||0,totalRevenue:i,topCategories:o}}catch(a){return console.error("Error in getAnalytics:",a),{totalAds:0,activeAds:0,totalRevenue:0,topCategories:[]}}}static async renewAdvertisement(a){try{const t=new Date(Date.now()+2592e6).toISOString(),{error:r}=await P.from("business_advertisements").update({expires_at:t,is_active:!0,payment_status:"paid"}).eq("id",a);return r?(console.error("Error renewing advertisement:",r),{success:!1,error:r.message}):{success:!0}}catch(t){return console.error("Error in renewAdvertisement:",t),{success:!1,error:"Failed to renew advertisement"}}}}class xd{static async getPricingTiers(){try{const{data:a,error:t}=await P.from("pricing_tiers").select("*").eq("is_active",!0).order("price",{ascending:!0});return t?(console.error("Error fetching pricing tiers:",t),[{id:"free",name:"Free Tier",price:0,currency:"KES",period:"/month",requests:30,features:["Basic API access","Community support","Standard rate limits","30 API calls per month"],is_popular:!1,is_active:!0},{id:"developer",name:"Developer",price:2500,currency:"KES",period:"/month",requests:1e4,features:["Advanced API access","Email support","Higher rate limits","Analytics dashboard","10,000 API calls per month"],is_popular:!0,is_active:!0},{id:"enterprise",name:"Enterprise",price:15e3,currency:"KES",period:"/month",requests:1e5,features:["Full API access","Priority support","Custom rate limits","Dedicated account manager","Custom integrations","100,000 API calls per month"],is_popular:!1,is_active:!0}]):a||[]}catch(a){return console.error("Error fetching pricing tiers:",a),[]}}static async updatePricingTier(a){try{const{error:t}=await P.from("pricing_tiers").update({name:a.name,price:a.price,currency:a.currency,period:a.period,requests:a.requests,features:a.features,is_popular:a.is_popular,is_active:a.is_active}).eq("id",a.id);return!t}catch(t){return console.error("Error updating pricing tier:",t),!1}}}const hd=()=>{const[s,a]=l.useState(!1),[t,r]=l.useState({hasAccess:!1,subscriptionType:null,requestsRemaining:0}),[i,c]=l.useState([]),[n,o]=l.useState(!0),{toast:m}=ee(),{user:d}=Xe();l.useEffect(()=>{p(),j()},[]);const p=async()=>{const N=await ud.checkApiAccess();r(N)},j=async()=>{o(!0);const N=await xd.getPricingTiers();c(N),o(!1)},g=N=>{navigator.clipboard.writeText(N),a(!0),m({title:"Copied!",description:"API example copied to clipboard"}),setTimeout(()=>a(!1),2e3)},x=N=>{m({title:"Subscription Required",description:`Please purchase a business advertisement to access ${N} tier API features.`})};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-white border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"AgriConnect API Documentation"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl",children:"Production-ready API access to Kenya's agricultural data, market information, and supply chain intelligence"}),e.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.hasAccess?e.jsx(Ln,{className:"h-4 w-4 text-green-600"}):e.jsx(sa,{className:"h-4 w-4 text-red-600"}),e.jsxs("span",{className:"text-sm",children:["Current Plan: ",e.jsx(_,{variant:t.subscriptionType==="free"?"outline":"default",children:t.subscriptionType||"None"})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Requests Remaining: ",t.requestsRemaining.toLocaleString()]})]})]}),d&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Welcome, ",d.email]})]})})}),e.jsx("main",{className:"py-8 px-4 md:px-6 max-w-7xl mx-auto",children:e.jsxs(de,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ce,{className:"grid grid-cols-5 w-full max-w-2xl mx-auto",children:[e.jsx(K,{value:"overview",children:"Overview"}),e.jsx(K,{value:"authentication",children:"Auth"}),e.jsx(K,{value:"endpoints",children:"Endpoints"}),e.jsx(K,{value:"keys",children:"API Keys"}),e.jsx(K,{value:"pricing",children:"Pricing"})]}),e.jsx(O,{value:"overview",children:e.jsx(od,{})}),e.jsx(O,{value:"authentication",children:e.jsx(dd,{})}),e.jsx(O,{value:"endpoints",className:"space-y-6",children:e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Production API Endpoints"}),e.jsx("p",{className:"text-muted-foreground",children:"Live API endpoints with authentication and subscription-based access control"})]}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Authentication"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Include your API key in the ",e.jsx("code",{children:"X-API-Key"})," header:"]}),e.jsx("code",{className:"bg-muted p-2 rounded-md block text-sm",children:"X-API-Key: your_api_key_here"})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"secondary",children:"GET"}),e.jsx("code",{className:"text-sm",children:"/api-farmers"}),e.jsx(_,{variant:"outline",className:"text-xs",children:"All Tiers"})]}),e.jsxs(f,{size:"sm",variant:"outline",onClick:()=>g('curl -H "X-API-Key: YOUR_API_KEY" https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-farmers'),children:[s?e.jsx(Se,{className:"h-4 w-4"}):e.jsx(us,{className:"h-4 w-4"}),"Copy"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Get farmer data (limited by subscription tier)"}),e.jsx("div",{className:"bg-muted p-2 rounded text-xs",children:e.jsxs("pre",{children:['curl -H "X-API-Key: YOUR_API_KEY" \\',`
`,"     https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-farmers"]})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"secondary",children:"GET"}),e.jsx("code",{className:"text-sm",children:"/api-markets"}),e.jsx(_,{variant:"outline",className:"text-xs",children:"Developer+ Required"})]}),e.jsxs(f,{size:"sm",variant:"outline",onClick:()=>g('curl -H "X-API-Key: YOUR_API_KEY" https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-markets'),children:[s?e.jsx(Se,{className:"h-4 w-4"}):e.jsx(us,{className:"h-4 w-4"}),"Copy"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Access real market prices and demand data"}),e.jsx("div",{className:"bg-muted p-2 rounded text-xs",children:e.jsxs("pre",{children:['curl -H "X-API-Key: YOUR_API_KEY" \\',`
`,"     https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-markets"]})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"secondary",children:"GET"}),e.jsx("code",{className:"text-sm",children:"/api-supply-chain"}),e.jsx(_,{variant:"destructive",className:"text-xs",children:"Enterprise Only"})]}),e.jsxs(f,{size:"sm",variant:"outline",onClick:()=>g('curl -H "X-API-Key: YOUR_API_KEY" https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-supply-chain'),children:[s?e.jsx(Se,{className:"h-4 w-4"}):e.jsx(us,{className:"h-4 w-4"}),"Copy"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Comprehensive supply chain analytics"}),e.jsx("div",{className:"bg-muted p-2 rounded text-xs",children:e.jsxs("pre",{children:['curl -H "X-API-Key: YOUR_API_KEY" \\',`
`,"     https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-supply-chain"]})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"secondary",children:"GET"}),e.jsx("code",{className:"text-sm",children:"/api-commodities"}),e.jsx(_,{variant:"outline",className:"text-xs",children:"All Tiers"})]}),e.jsxs(f,{size:"sm",variant:"outline",onClick:()=>g('curl -H "X-API-Key: YOUR_API_KEY" https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-commodities'),children:[s?e.jsx(Se,{className:"h-4 w-4"}):e.jsx(us,{className:"h-4 w-4"}),"Copy"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Get commodity prices and market trends"}),e.jsx("div",{className:"bg-muted p-2 rounded text-xs",children:e.jsxs("pre",{children:['curl -H "X-API-Key: YOUR_API_KEY" \\',`
`,"     https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-commodities"]})})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2 text-green-800",children:"âœ… Production Ready"}),e.jsx("p",{className:"text-sm text-green-700",children:"All endpoints are fully functional with authentication, rate limiting, and subscription-tier access control. Try them with a valid API key!"})]})]})]})}),e.jsx(O,{value:"keys",className:"space-y-6",children:e.jsx(md,{})}),e.jsx(O,{value:"pricing",children:e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"API Pricing Plans"}),e.jsx("p",{className:"text-muted-foreground",children:"API access is linked to your business advertisement subscription. Purchase an advertisement to unlock higher API tiers."})]}),e.jsxs(y,{children:[n?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map((N,k)=>{const u=N.name==="Free Tier"||N.name==="Developer"&&(t.subscriptionType==="developer"||t.subscriptionType==="enterprise")||N.name==="Enterprise"&&t.subscriptionType==="enterprise";return e.jsxs("div",{className:`border rounded-lg p-6 ${N.is_popular?"border-primary shadow-lg":""} ${u?"bg-green-50":"bg-gray-50"}`,children:[N.is_popular&&e.jsx(_,{className:"mb-4",children:"Most Popular"}),u&&e.jsx(_,{variant:"outline",className:"mb-4 bg-green-100 text-green-800",children:"Active"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:N.name}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[N.currency," ",N.price.toLocaleString()]}),e.jsx("span",{className:"text-muted-foreground",children:N.period})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Up to ",N.requests.toLocaleString()," API requests per month"]}),e.jsx("ul",{className:"space-y-2 mb-6",children:N.features.map((h,S)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Se,{className:"h-4 w-4 text-green-500"}),h]},S))}),e.jsx(f,{className:"w-full",variant:N.is_popular?"default":"outline",disabled:u||N.name==="Free Tier",onClick:()=>x(N.name),children:u?"Current Plan":N.name==="Free Tier"?"Active":"Subscribe"})]},N.id)})}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"How API Access Works:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"â€¢ Free tier: Available to all registered users"}),e.jsx("li",{children:"â€¢ Developer tier: Unlocked by purchasing business advertisements (KES 2,500+)"}),e.jsx("li",{children:"â€¢ Enterprise tier: Unlocked by purchasing premium advertisements (KES 15,000+)"}),e.jsx("li",{children:"â€¢ API access renews automatically with your advertisement subscription"})]})]})]})]})})]})})]})},pd=()=>{const[s,a]=l.useState(!1),[t,r]=l.useState("developer"),{user:i}=Xe(),c=d=>{navigator.clipboard.writeText(d),a(!0),setTimeout(()=>a(!1),2e3)},n=[{id:"starter",name:"Free Tier",price:0,currency:"KES",period:"month",requests:"30",features:["Basic market data access","County-level statistics","Standard rate limits","Community support"],popular:!1,buttonText:"Get Started Free"},{id:"developer",name:"Developer",price:2500,currency:"KES",period:"month",requests:"10,000",features:["Full market data access","Real-time price feeds","Supply chain analytics","Priority email support","API analytics dashboard"],popular:!0,buttonText:"Start Developer Plan"},{id:"enterprise",name:"Enterprise",price:15e3,currency:"KES",period:"month",requests:"100,000+",features:["Unlimited API access","Custom integrations","Dedicated account manager","SLA guarantees","Custom data feeds","White-label options"],popular:!1,buttonText:"Contact Sales"}],o=[{method:"GET",endpoint:"/api/v1/supply-chain/farmers",description:"Retrieve farmer data across Kenya with location and crop information",example:'curl -H "Authorization: Bearer YOUR_API_KEY" https://api.agriconnect.co.ke/v1/supply-chain/farmers?county=nakuru'},{method:"GET",endpoint:"/api/v1/supply-chain/markets",description:"Access real-time market prices and demand data for agricultural commodities",example:'curl -H "Authorization: Bearer YOUR_API_KEY" https://api.agriconnect.co.ke/v1/supply-chain/markets?commodity=maize'},{method:"GET",endpoint:"/api/v1/supply-chain/logistics",description:"Transportation and warehouse data for supply chain optimization",example:'curl -H "Authorization: Bearer YOUR_API_KEY" https://api.agriconnect.co.ke/v1/supply-chain/logistics?type=transport'},{method:"GET",endpoint:"/api/v1/supply-chain/analytics",description:"Advanced analytics and forecasting for agricultural supply chains",example:'curl -H "Authorization: Bearer YOUR_API_KEY" https://api.agriconnect.co.ke/v1/supply-chain/analytics?metric=price-forecast'}],m=[{title:"Agribusiness Integration",description:"Integrate real-time market data into your agricultural business applications",icon:e.jsx(Ve,{className:"h-8 w-8 text-blue-600"}),revenue:"KES 500K+/month"},{title:"Fintech Agriculture",description:"Build financial products for farmers using our verified agricultural data",icon:e.jsx(De,{className:"h-8 w-8 text-green-600"}),revenue:"KES 1M+/month"},{title:"Logistics Optimization",description:"Optimize transportation routes and costs using our supply chain APIs",icon:e.jsx(ye,{className:"h-8 w-8 text-orange-600"}),revenue:"KES 300K+/month"},{title:"Research & Analytics",description:"Access comprehensive datasets for agricultural research and analysis",icon:e.jsx(ps,{className:"h-8 w-8 text-purple-600"}),revenue:"KES 200K+/month"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"Supply Chain API Platform"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto mb-4",children:"Monetized access to Kenya's most comprehensive agricultural supply chain data and analytics"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx(_,{className:"bg-green-100 text-green-800",children:"Live API âœ…"}),e.jsx(_,{className:"bg-blue-100 text-blue-800",children:"99.9% Uptime"}),e.jsx(_,{className:"bg-purple-100 text-purple-800",children:"Enterprise Ready"}),e.jsx(_,{className:"bg-orange-100 text-orange-800",children:"Hosted: Supabase Edge Functions"})]}),i&&e.jsxs("div",{className:"text-sm text-muted-foreground mb-4",children:["Signed in as: ",i.email]})]}),e.jsx("div",{className:"mb-8 max-w-4xl mx-auto",children:e.jsx(v,{className:"border-green-200 bg-green-50",children:e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Os,{className:"h-6 w-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"API Security Status"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-700",children:"âœ… Authentication"}),e.jsx("div",{className:"text-green-600",children:"API Key validation active"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-700",children:"âœ… Rate Limiting"}),e.jsx("div",{className:"text-green-600",children:"Per-tier limits enforced"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-700",children:"âœ… Monitoring"}),e.jsx("div",{className:"text-green-600",children:"Usage tracking enabled"})]})]})]})})}),e.jsxs("main",{className:"py-8 px-4 md:px-6 max-w-7xl mx-auto",children:[e.jsxs(de,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ce,{className:"grid grid-cols-4 w-full max-w-2xl mx-auto",children:[e.jsx(K,{value:"overview",children:"Overview"}),e.jsx(K,{value:"pricing",children:"Pricing"}),e.jsx(K,{value:"endpoints",children:"API Docs"}),e.jsx(K,{value:"examples",children:"Examples"})]}),e.jsxs(O,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(v,{children:e.jsxs(y,{className:"p-6 text-center",children:[e.jsx(zs,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"47"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Counties Covered"})]})}),e.jsx(v,{children:e.jsxs(y,{className:"p-6 text-center",children:[e.jsx(oe,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"50K+"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Registered Farmers"})]})}),e.jsx(v,{children:e.jsxs(y,{className:"p-6 text-center",children:[e.jsx(it,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"2M+"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"API Calls/Month"})]})}),e.jsx(v,{children:e.jsxs(y,{className:"p-6 text-center",children:[e.jsx(De,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"99.9%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"API Uptime"})]})})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Revenue-Generating Use Cases"})}),e.jsx(y,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map((d,p)=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[d.icon,e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:d.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:d.description}),e.jsxs(_,{variant:"outline",className:"text-green-600 border-green-200",children:["Revenue Potential: ",d.revenue]})]})]})},p))})})]})]}),e.jsxs(O,{value:"pricing",className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Choose Your API Plan"}),e.jsx("p",{className:"text-muted-foreground",children:"Updated pricing with new request limits"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.map(d=>e.jsxs(v,{className:`relative ${d.popular?"border-green-500 shadow-lg":""}`,children:[d.popular&&e.jsx(_,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-green-600",children:"Most Popular"}),e.jsxs(b,{className:"text-center",children:[e.jsx(w,{children:d.name}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[d.currency," ",d.price.toLocaleString()]}),e.jsxs("span",{className:"text-muted-foreground",children:["/",d.period]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Up to ",d.requests," API requests"]})]}),e.jsxs(y,{children:[e.jsx("ul",{className:"space-y-2 mb-6",children:d.features.map((p,j)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Se,{className:"h-4 w-4 text-green-500"}),p]},j))}),e.jsx(f,{className:"w-full",variant:d.popular?"default":"outline",onClick:()=>r(d.id),children:d.buttonText})]})]},d.id))})]}),e.jsx(O,{value:"endpoints",className:"space-y-6",children:e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"API Endpoints"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete reference for our supply chain API"})]}),e.jsx(y,{children:e.jsx("div",{className:"space-y-4",children:o.map((d,p)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_,{variant:"secondary",className:"bg-green-100 text-green-800",children:d.method}),e.jsx("code",{className:"text-sm font-mono",children:d.endpoint})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:d.description}),e.jsx("div",{className:"bg-muted p-3 rounded text-sm font-mono overflow-x-auto",children:d.example}),e.jsxs(f,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>c(d.example),children:[s?e.jsx(Se,{className:"h-4 w-4"}):e.jsx(us,{className:"h-4 w-4"}),"Copy Example"]})]},p))})})]})}),e.jsxs(O,{value:"examples",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"JavaScript/Node.js"})}),e.jsx(y,{children:e.jsx("div",{className:"bg-muted p-4 rounded-md",children:e.jsx("pre",{className:"text-sm overflow-auto",children:`const response = await fetch(
  'https://api.agriconnect.co.ke/v1/supply-chain/farmers',
  {
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    }
  }
);

const farmers = await response.json();
console.log(\`Found \${farmers.length} farmers\`);`})})})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Python"})}),e.jsx(y,{children:e.jsx("div",{className:"bg-muted p-4 rounded-md",children:e.jsx("pre",{className:"text-sm overflow-auto",children:`import requests

headers = {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
}

response = requests.get(
    'https://api.agriconnect.co.ke/v1/supply-chain/markets',
    headers=headers
)

markets = response.json()
print(f"Found {len(markets)} markets")`})})})]})]}),e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Revenue Integration Example"})}),e.jsx(y,{children:e.jsx("div",{className:"bg-muted p-4 rounded-md",children:e.jsx("pre",{className:"text-sm overflow-auto",children:`// Example: Building a profitable agritech app
const buildProfitableApp = async () => {
  // Get market data for price predictions
  const markets = await agriConnectAPI.getMarkets();
  
  // Get farmer data for targeted services
  const farmers = await agriConnectAPI.getFarmers();
  
  // Build premium features with our data
  const premiumInsights = await agriConnectAPI.getAnalytics();
  
  // Monetize with subscription model
  return {
    monthlyRevenue: 'KES 500,000+',
    userBase: farmers.length,
    features: premiumInsights
  };
};`})})})]})]})]}),e.jsx(v,{className:"mt-12 bg-gradient-to-r from-green-50 to-blue-50",children:e.jsxs(y,{className:"p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ready to Build the Future of Agriculture?"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Join hundreds of developers building profitable agricultural applications with our comprehensive API platform"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(f,{size:"lg",className:"bg-green-600 hover:bg-green-700",children:"Start Building Today"}),e.jsx(f,{size:"lg",variant:"outline",children:"Contact Enterprise Sales"})]})]})})]})]})},gd=()=>e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Data Management & Integration Strategy"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Comprehensive overview of how AgriTender Connect handles, stores, and secures agricultural data"})]}),e.jsxs(de,{defaultValue:"overview",className:"w-full",children:[e.jsxs(ce,{className:"grid w-full grid-cols-5",children:[e.jsx(K,{value:"overview",children:"Overview"}),e.jsx(K,{value:"sources",children:"Data Sources"}),e.jsx(K,{value:"storage",children:"Storage"}),e.jsx(K,{value:"security",children:"Security"}),e.jsx(K,{value:"apis",children:"API Integration"})]}),e.jsx(O,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5 text-blue-600"}),"Real-Time Data"]}),e.jsx(B,{children:"Live integration with government and institutional sources"})]}),e.jsx(y,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Market prices updated hourly"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Production statistics from KNBS"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Weather data integration"]})]})})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-5 w-5 text-green-600"}),"Data Integrity"]}),e.jsx(B,{children:"100% verified sources with transparency badges"})]}),e.jsx(y,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Government source verification"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"No fake or sample data"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Source attribution required"]})]})})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(it,{className:"h-5 w-5 text-yellow-600"}),"Performance"]}),e.jsx(B,{children:"Optimized for field operations and mobile use"})]}),e.jsx(y,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Sub-second response times"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Offline capability"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Mobile-first design"]})]})})]})]})}),e.jsx(O,{value:"sources",className:"space-y-6",children:e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Verified Data Sources"}),e.jsx(B,{children:"All data is sourced from legitimate Kenyan government and institutional sources"})]}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Kenya National Bureau of Statistics (KNBS)"}),e.jsx(_,{variant:"outline",className:"text-green-600 border-green-600",children:"Verified"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Official agricultural census, production statistics, and economic surveys"}),e.jsxs("a",{href:"https://www.knbs.or.ke/agricultural-statistics/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm",children:[e.jsx(qe,{className:"h-4 w-4 mr-1"}),"knbs.or.ke/agricultural-statistics"]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Ministry of Agriculture & Livestock Development"}),e.jsx(_,{variant:"outline",className:"text-green-600 border-green-600",children:"Verified"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Policy updates, crop forecasts, and agricultural development programs"}),e.jsxs("a",{href:"https://kilimo.go.ke/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm",children:[e.jsx(qe,{className:"h-4 w-4 mr-1"}),"kilimo.go.ke"]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Nairobi Grain Exchange"}),e.jsx(_,{variant:"outline",className:"text-green-600 border-green-600",children:"Verified"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Real-time commodity prices and trading data"})]})]})})]})}),e.jsx(O,{value:"storage",className:"space-y-6",children:e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Rn,{className:"h-5 w-5"}),"Data Storage Architecture"]}),e.jsx(B,{children:"Enterprise-grade storage with Supabase PostgreSQL backend"})]}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Kn,{className:"h-4 w-4 text-blue-600"}),"Primary Storage"]}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"â€¢ Supabase PostgreSQL database"}),e.jsx("li",{children:"â€¢ Row Level Security (RLS) enabled"}),e.jsx("li",{children:"â€¢ Automatic backups every 6 hours"}),e.jsx("li",{children:"â€¢ 99.9% uptime guarantee"})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(it,{className:"h-4 w-4 text-yellow-600"}),"Caching Layer"]}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"â€¢ Redis for real-time data"}),e.jsx("li",{children:"â€¢ CDN for static assets"}),e.jsx("li",{children:"â€¢ Browser caching optimization"}),e.jsx("li",{children:"â€¢ Smart cache invalidation"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Data Retention Policy"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Market Prices:"}),e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground",children:"5 years historical data"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Production Data:"}),e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground",children:"10 years for analysis"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"User Data:"}),e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground",children:"As per user preferences"})]})]})]})]})})]})}),e.jsx(O,{value:"security",className:"space-y-6",children:e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(sa,{className:"h-5 w-5 text-red-600"}),"Data Security & Privacy"]}),e.jsx(B,{children:"Enterprise-grade security protecting farmer and market data"})]}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Encryption & Access Control"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"AES-256 encryption at rest"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"TLS 1.3 for data in transit"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Row Level Security (RLS)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Multi-factor authentication"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Compliance & Auditing"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Kenya Data Protection Act compliance"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Regular security audits"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Activity logging and monitoring"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-green-600"}),"Incident response procedures"]})]})]})]})})]})}),e.jsx(O,{value:"apis",className:"space-y-6",children:e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"API Data Integration"}),e.jsx(B,{children:"How external data is integrated, validated, and used throughout the platform"})]}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Data Integration Pipeline"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-semibold text-sm",children:"1"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Data Ingestion"}),e.jsx("br",{}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Automated fetching from verified sources every hour"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-semibold text-sm",children:"2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Validation & Cleaning"}),e.jsx("br",{}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Data quality checks and format standardization"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-600 font-semibold text-sm",children:"3"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Storage & Indexing"}),e.jsx("br",{}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Optimized storage for fast retrieval and analysis"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-semibold text-sm",children:"4"}),e.jsxs("div",{children:[e.jsx("strong",{children:"API Distribution"}),e.jsx("br",{}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Real-time access through our monetized API platform"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Real-Time Updates"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"â€¢ Market prices: Every 30 minutes"}),e.jsx("li",{children:"â€¢ Weather data: Every 15 minutes"}),e.jsx("li",{children:"â€¢ Production stats: Daily"}),e.jsx("li",{children:"â€¢ Policy updates: As announced"})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Data Quality Assurance"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"â€¢ Source verification checks"}),e.jsx("li",{children:"â€¢ Anomaly detection algorithms"}),e.jsx("li",{children:"â€¢ Historical trend validation"}),e.jsx("li",{children:"â€¢ Manual review for critical data"})]})]})]})]})})]})})]})]})});class Ws{static async getAllStats(a){try{let t=P.from("kilimo_statistics").select("*").order("created_at",{ascending:!1});a!=null&&a.category&&(t=t.eq("category",a.category)),a!=null&&a.county&&(t=t.eq("county",a.county)),a!=null&&a.fetch_date&&(t=t.eq("fetch_date",a.fetch_date));const{data:r,error:i}=await t;return i?(console.error("Error fetching Kilimo stats:",i),[]):r||[]}catch(t){return console.error("Error in getAllStats:",t),[]}}static async getLatestStats(a=50){try{const{data:t,error:r}=await P.from("kilimo_statistics").select("*").order("fetch_date",{ascending:!1}).order("created_at",{ascending:!1}).limit(a);return r?(console.error("Error fetching latest stats:",r),[]):t||[]}catch(t){return console.error("Error in getLatestStats:",t),[]}}static async getFetchLogs(a=20){try{const{data:t,error:r}=await P.from("data_fetch_logs").select("*").order("created_at",{ascending:!1}).limit(a);return r?(console.error("Error fetching logs:",r),[]):t||[]}catch(t){return console.error("Error in getFetchLogs:",t),[]}}static async triggerManualFetch(){try{const a=await P.functions.invoke("fetch-kilimo-data",{body:{manual:!0}});return a.error?(console.error("Error invoking function:",a.error),{success:!1,message:a.error.message||"Failed to trigger manual fetch"}):a.data||{success:!0,message:"Data fetch triggered successfully"}}catch(a){return console.error("Error triggering manual fetch:",a),{success:!1,message:"Failed to trigger manual fetch"}}}static async getAnalytics(){try{const[a,t]=await Promise.all([this.getAllStats(),this.getFetchLogs(5)]),r=new Set(a.map(n=>n.category)),i=new Set(a.map(n=>n.county)),c=a.length>0?a[0].fetch_date:"Never";return{totalRecords:a.length,categoriesCount:r.size,countiesCount:i.size,lastUpdateDate:c,recentActivity:t}}catch(a){return console.error("Error in getAnalytics:",a),{totalRecords:0,categoriesCount:0,countiesCount:0,lastUpdateDate:"Never",recentActivity:[]}}}}const jd=()=>{const[s,a]=l.useState(!0),[t,r]=l.useState(null),[i,c]=l.useState([]),[n,o]=l.useState(null),[m,d]=l.useState([]),{toast:p}=ee();l.useEffect(()=>{j()},[]);const j=async()=>{var x;a(!0);try{console.log("Testing Kilimo API...");const N=await fetch("https://statistics.kilimo.go.ke/en/api/apputils/",{method:"GET",headers:{Accept:"application/json"}});if(N.ok){const k=await N.json();r({status:"success",message:`API working. Counties: ${((x=k.county)==null?void 0:x.length)||0}`,data:k}),console.log("API Response:",k)}else r({status:"error",message:`API returned ${N.status}`,data:null})}catch(N){console.error("API Test Error:",N),r({status:"error",message:"Failed to connect to API",data:null})}try{const[N,k,u]=await Promise.all([Ws.getLatestStats(20),Ws.getAnalytics(),Ws.getFetchLogs(10)]);c(N),o(k),d(u),console.log("Database Data:",{data:N.length,analytics:k})}catch(N){console.error("Database Error:",N)}a(!1)},g=async()=>{try{p({title:"Triggering data fetch...",description:"Please wait while we fetch new data"});const x=await Ws.triggerManualFetch();x.success?(p({title:"Success",description:x.message}),setTimeout(()=>j(),2e3)):p({title:"Error",description:x.message||"Failed to fetch data",variant:"destructive"})}catch(x){console.error("Manual fetch error:",x),p({title:"Error",description:"Failed to trigger data fetch",variant:"destructive"})}};return s?e.jsx("div",{className:"min-h-screen bg-background p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})})}):e.jsx("div",{className:"min-h-screen bg-background p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"System Data Status Check"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time verification of API connectivity and data collection"}),e.jsxs(f,{onClick:j,className:"mt-4 mr-4",children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Refresh Status"]}),e.jsxs(f,{onClick:g,variant:"outline",children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Trigger Data Fetch"]})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[(t==null?void 0:t.status)==="success"?e.jsx(le,{className:"h-5 w-5 text-green-600"}):e.jsx(Xt,{className:"h-5 w-5 text-red-600"}),"Kilimo API Status"]}),e.jsx(B,{children:"Direct connection to https://statistics.kilimo.go.ke/"})]}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx(_,{variant:(t==null?void 0:t.status)==="success"?"default":"destructive",children:(t==null?void 0:t.status)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Message:"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t==null?void 0:t.message})]}),(t==null?void 0:t.data)&&e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"API Response Sample:"}),e.jsxs("pre",{className:"text-xs overflow-x-auto",children:[JSON.stringify(t.data,null,2).slice(0,500),"..."]})]}),e.jsxs("a",{href:"https://statistics.kilimo.go.ke/en/api/apputils/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 text-sm",children:["Test API Directly ",e.jsx(qe,{className:"h-4 w-4"})]})]})})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5 text-blue-600"}),"Database Storage Status"]}),e.jsx(B,{children:"Stored data from automatic and manual fetches"})]}),e.jsxs(y,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.totalRecords)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Records"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.categoriesCount)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Categories"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.countiesCount)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Counties"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.lastUpdateDate)!=="Never"?new Date(n.lastUpdateDate).toLocaleDateString():"Never"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Update"})]})]}),i.length>0?e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Recent Data Sample:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Name"}),e.jsx("th",{className:"text-left p-2",children:"Category"}),e.jsx("th",{className:"text-left p-2",children:"County"}),e.jsx("th",{className:"text-left p-2",children:"Value"}),e.jsx("th",{className:"text-left p-2",children:"Date"})]})}),e.jsx("tbody",{children:i.slice(0,5).map((x,N)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:x.name}),e.jsx("td",{className:"p-2",children:e.jsx(_,{variant:"outline",children:x.category})}),e.jsx("td",{className:"p-2",children:x.county}),e.jsx("td",{className:"p-2",children:x.value}),e.jsx("td",{className:"p-2",children:new Date(x.fetch_date).toLocaleDateString()})]},N))})]})})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No data found in database. Try triggering a manual fetch."})]})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Recent Fetch Logs"}),e.jsx(B,{children:"History of data collection attempts"})]}),e.jsx(y,{children:m.length>0?e.jsx("div",{className:"space-y-3",children:m.map((x,N)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:x.status==="success"?"default":"destructive",children:x.status}),e.jsx("span",{className:"font-medium",children:x.source})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(x.created_at).toLocaleString()})]}),e.jsxs("div",{className:"text-sm",children:["Records: ",x.records_count," | Time: ",x.execution_time_ms,"ms",x.error_message&&e.jsxs("div",{className:"text-red-600 mt-1",children:["Error: ",x.error_message]})]})]},N))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No fetch logs found"})})]})]})})},fd=()=>{const[s,a]=l.useState({daily:!1,weekly:!1,monthly:!1,all:!1,test:!1}),[t,r]=l.useState({}),i=async m=>{a(d=>({...d,[m]:!0}));try{let d;switch(m){case"daily":d=await qr();break;case"weekly":d=await zr();break;case"monthly":d=await Or();break;case"all":d=await Tl();break;case"test":d=await Il();break}r(p=>({...p,[m]:d})),d.success!==!1?_t.success(`${m.charAt(0).toUpperCase()+m.slice(1)} job completed successfully`):_t.error(`${m.charAt(0).toUpperCase()+m.slice(1)} job failed: ${d.message}`)}catch(d){console.error(`Error running ${m} job:`,d),_t.error(`Error running ${m} job: ${d}`)}finally{a(d=>({...d,[m]:!1}))}},c=m=>new Date(m).toLocaleString(),n=m=>m?e.jsx("div",{className:"bg-muted p-4 rounded-md overflow-auto max-h-[400px]",children:e.jsx("pre",{className:"text-xs",children:JSON.stringify(m,null,2)})}):null,o=m=>{const d=t[m];if(!d||!d.data)return null;let p=[];return Array.isArray(d.data)&&(p=d.data.slice(0,3).map((j,g)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"font-medium",children:j.commodity}),e.jsxs("span",{className:"text-right",children:["KES ",j.price," per ",j.unit]})]},g))),p.length>0?e.jsxs("div",{className:"mt-4 border rounded-md p-3 bg-muted/30",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Latest Prices:"}),p]}):null};return e.jsxs("div",{className:"container py-10",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Data Jobs & API Integration"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and test automated data jobs for AMIS Kenya and Kilimo statistics integration"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Daily AMIS Kenya Updates"}),e.jsx(B,{children:"Fetch latest prices from AMIS Kenya (daily updates)"})]}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Run this job to fetch the most recent commodity prices from AMIS Kenya markets."}),o("daily")]}),e.jsx(J,{children:e.jsx(f,{onClick:()=>i("daily"),disabled:s.daily,className:"w-full",children:s.daily?"Running...":"Run Daily Job"})})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Weekly Kilimo Stats"}),e.jsx(B,{children:"Update agricultural statistics from Kilimo (weekly)"})]}),e.jsx(y,{children:e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Run this job to update agricultural statistics from the Kilimo platform."})}),e.jsx(J,{children:e.jsx(f,{onClick:()=>i("weekly"),disabled:s.weekly,className:"w-full",children:s.weekly?"Running...":"Run Weekly Job"})})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Monthly Data Archive"}),e.jsx(B,{children:"Archive historical data for trend analysis"})]}),e.jsx(y,{children:e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Run this job to archive current data snapshots for long-term trend analysis."})}),e.jsx(J,{children:e.jsx(f,{onClick:()=>i("monthly"),disabled:s.monthly,className:"w-full",children:s.monthly?"Running...":"Run Monthly Job"})})]})]}),e.jsxs("div",{className:"mt-8 grid gap-6 md:grid-cols-2",children:[e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Run All Jobs"}),e.jsx(B,{children:"Execute all scheduled jobs at once"})]}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"This will run all automated jobs in sequence and report results."}),e.jsx(f,{onClick:()=>i("all"),disabled:s.all,className:"w-full",children:s.all?"Running All Jobs...":"Run All Jobs"})]})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Test Data Extraction"}),e.jsx(B,{children:"Test API connectivity and data extraction"})]}),e.jsxs(y,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"This will test connectivity to the APIs and extract sample data to verify integration."}),e.jsx(f,{onClick:()=>i("test"),disabled:s.test,className:"w-full",variant:"secondary",children:s.test?"Testing...":"Run Extraction Test"})]})]})]}),e.jsxs(v,{className:"mt-8",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Job Results"}),e.jsx(B,{children:"View the results of your most recent job runs"})]}),e.jsx(y,{children:e.jsxs(de,{defaultValue:"daily",children:[e.jsxs(ce,{className:"grid grid-cols-5 mb-4",children:[e.jsx(K,{value:"daily",children:"Daily"}),e.jsx(K,{value:"weekly",children:"Weekly"}),e.jsx(K,{value:"monthly",children:"Monthly"}),e.jsx(K,{value:"all",children:"All Jobs"}),e.jsx(K,{value:"test",children:"Test"})]}),e.jsx(O,{value:"daily",children:t.daily?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{variant:t.daily.success!==!1?"default":"destructive",children:t.daily.success!==!1?"Success":"Failed"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.daily.timestamp&&c(t.daily.timestamp)})]}),n(t.daily)]}):e.jsx("p",{className:"text-center py-6 text-muted-foreground",children:"No results yet. Run the daily job to see data here."})}),e.jsx(O,{value:"weekly",children:t.weekly?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{variant:t.weekly.success!==!1?"default":"destructive",children:t.weekly.success!==!1?"Success":"Failed"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.weekly.timestamp&&c(t.weekly.timestamp)})]}),n(t.weekly)]}):e.jsx("p",{className:"text-center py-6 text-muted-foreground",children:"No results yet. Run the weekly job to see data here."})}),e.jsx(O,{value:"monthly",children:t.monthly?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{variant:t.monthly.success!==!1?"default":"destructive",children:t.monthly.success!==!1?"Success":"Failed"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.monthly.timestamp&&c(t.monthly.timestamp)})]}),n(t.monthly)]}):e.jsx("p",{className:"text-center py-6 text-muted-foreground",children:"No results yet. Run the monthly job to see data here."})}),e.jsx(O,{value:"all",children:t.all?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{variant:"outline",children:"Combined Results"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.all.timestamp&&c(t.all.timestamp)})]}),n(t.all)]}):e.jsx("p",{className:"text-center py-6 text-muted-foreground",children:"No results yet. Run all jobs to see combined data here."})}),e.jsx(O,{value:"test",children:t.test?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{variant:t.test.success!==!1?"default":"destructive",children:t.test.success!==!1?"Success":"Failed"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.test.timestamp&&c(t.test.timestamp)})]}),n(t.test)]}):e.jsx("p",{className:"text-center py-6 text-muted-foreground",children:"No results yet. Run the test to see extraction results here."})})]})})]})]})},Kt={name:"AgriTender Connect",version:"2.0.0",description:"Comprehensive Agricultural Platform for Kenya",api:{baseUrl:"https://api.agritender.co.ke/v1",timeout:1e4,retryAttempts:3,rateLimit:{requests:100,window:6e4}},database:{maxConnections:100,connectionTimeout:3e4,queryTimeout:15e3,retryAttempts:3},cache:{defaultTTL:3e5,maxSize:1e3,enableCompression:!0},performance:{enableLazyLoading:!0,chunkSize:50,prefetchDistance:2,virtualScrolling:!0},security:{enableCSP:!0,enableHSTS:!0,maxFileSize:10*1024*1024,allowedFileTypes:["jpg","jpeg","png","pdf","doc","docx"],sessionTimeout:24*60*60*1e3},features:{realTimeUpdates:!0,advancedAnalytics:!0,mobileApp:!0,offlineMode:!1,betaFeatures:!1},services:{amis:{baseUrl:"https://amis.kilimo.go.ke/en/api",timeout:5e3,retryAttempts:2},weather:{enabled:!0,provider:"openweather"},maps:{enabled:!0,provider:"mapbox"}}};class vd{constructor(){Qe(this,"startTime",Date.now())}async checkDatabase(){const a=Date.now();try{const{data:t,error:r}=await P.from("profiles").select("count").limit(1),i=Date.now()-a;return r?{service:"database",status:"unhealthy",responseTime:i,details:r.message,timestamp:new Date}:{service:"database",status:i>1e3?"degraded":"healthy",responseTime:i,timestamp:new Date}}catch(t){return{service:"database",status:"unhealthy",responseTime:Date.now()-a,details:t instanceof Error?t.message:"Unknown error",timestamp:new Date}}}async checkExternalAPI(){const a=Date.now();try{const t=await fetch(Kt.services.amis.baseUrl,{method:"HEAD",signal:AbortSignal.timeout(Kt.services.amis.timeout)}),r=Date.now()-a;return{service:"external_api",status:t.ok?r>2e3?"degraded":"healthy":"unhealthy",responseTime:r,details:t.ok?void 0:`HTTP ${t.status}`,timestamp:new Date}}catch(t){return{service:"external_api",status:"unhealthy",responseTime:Date.now()-a,details:t instanceof Error?t.message:"Connection failed",timestamp:new Date}}}async checkMemoryUsage(){const a=Date.now();try{const t=performance.memory;if(!t)return{service:"memory",status:"healthy",responseTime:Date.now()-a,details:"Memory API not available",timestamp:new Date};const r=t.usedJSHeapSize/1024/1024,i=t.totalJSHeapSize/1024/1024,c=r/i*100;let n="healthy";return c>90?n="unhealthy":c>75&&(n="degraded"),{service:"memory",status:n,responseTime:Date.now()-a,details:`${r.toFixed(1)}MB / ${i.toFixed(1)}MB (${c.toFixed(1)}%)`,timestamp:new Date}}catch(t){return{service:"memory",status:"unhealthy",responseTime:Date.now()-a,details:t instanceof Error?t.message:"Memory check failed",timestamp:new Date}}}async performHealthCheck(){const a=await Promise.all([this.checkDatabase(),this.checkExternalAPI(),this.checkMemoryUsage()]),t=a.filter(c=>c.status==="healthy").length,r=a.filter(c=>c.status==="unhealthy").length;let i="healthy";return r>0?i="unhealthy":t<a.length&&(i="degraded"),{overall:i,services:a,uptime:Date.now()-this.startTime,version:Kt.version}}}const yd=new vd,Nd=({size:s="md",className:a,text:t})=>{const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return e.jsxs("div",{className:q("flex flex-col items-center justify-center",a),children:[e.jsx(Es,{className:q("animate-spin text-primary",r[s])}),t&&e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:t})]})},bd=()=>{const[s,a]=l.useState(null),[t,r]=l.useState(!0),[i,c]=l.useState(null),n=async()=>{r(!0);try{const p=await yd.performHealthCheck();a(p),c(new Date)}catch(p){console.error("Health check failed:",p)}finally{r(!1)}};l.useEffect(()=>{n();const p=setInterval(n,3e4);return()=>clearInterval(p)},[]);const o=p=>{switch(p){case"healthy":return e.jsx(le,{className:"h-4 w-4 text-green-500"});case"degraded":return e.jsx(at,{className:"h-4 w-4 text-yellow-500"});case"unhealthy":return e.jsx(Xt,{className:"h-4 w-4 text-red-500"});default:return e.jsx(at,{className:"h-4 w-4 text-gray-500"})}},m=p=>{switch(p){case"healthy":return"bg-green-100 text-green-800";case"degraded":return"bg-yellow-100 text-yellow-800";case"unhealthy":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=p=>{const j=Math.floor(p/1e3),g=Math.floor(j/60),x=Math.floor(g/60),N=Math.floor(x/24);return N>0?`${N}d ${x%24}h ${g%60}m`:x>0?`${x}h ${g%60}m`:g>0?`${g}m ${j%60}s`:`${j}s`};return t&&!s?e.jsx(v,{children:e.jsx(y,{className:"p-6",children:e.jsx(Nd,{text:"Performing health check..."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between",children:[e.jsx(w,{children:"System Health Dashboard"}),e.jsxs(f,{variant:"outline",size:"sm",onClick:n,disabled:t,children:[e.jsx(Ds,{className:`h-4 w-4 mr-2 ${t?"animate-spin":""}`}),"Refresh"]})]}),e.jsx(y,{children:s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[o(s.overall),e.jsx("span",{className:"font-medium",children:"Overall Status"})]}),e.jsx(_,{className:m(s.overall),children:s.overall.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Version"}),e.jsx("p",{className:"font-mono text-lg",children:s.version})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uptime"}),e.jsx("p",{className:"font-mono text-lg",children:d(s.uptime)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-mono text-lg",children:i?i.toLocaleTimeString():"Never"})]})]})]})})]}),s&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.services.map(p=>e.jsxs(v,{children:[e.jsx(b,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{className:"text-base capitalize",children:p.service.replace("_"," ")}),o(p.status)]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),e.jsx(_,{className:m(p.status),variant:"outline",children:p.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Response Time:"}),e.jsxs("span",{className:"text-sm font-mono",children:[p.responseTime,"ms"]})]}),p.details&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Details:"}),e.jsx("p",{className:"text-xs font-mono bg-muted p-1 rounded",children:p.details})]})]})})]},p.service))})]})},wd=()=>{const[s,a]=l.useState({isConnected:!1,isHealthy:!1,latency:0,lastChecked:new Date,retryCount:0}),t=l.useCallback(async()=>{const i=Date.now();try{const{data:c,error:n}=await P.from("profiles").select("count").limit(1),o=Date.now()-i;if(n)throw n;return a(m=>({...m,isConnected:!0,isHealthy:o<1e3,latency:o,lastChecked:new Date,retryCount:0})),!0}catch(c){return console.error("Supabase connection check failed:",c),a(n=>({...n,isConnected:!1,isHealthy:!1,latency:Date.now()-i,lastChecked:new Date,retryCount:n.retryCount+1})),!1}},[]),r=l.useCallback(async(i=3)=>{for(let c=0;c<i;c++){if(await t())return!0;const o=Math.min(1e3*Math.pow(2,c),1e4);await new Promise(m=>setTimeout(m,o))}return!1},[t]);return l.useEffect(()=>{t();const i=setInterval(t,3e4);return()=>clearInterval(i)},[t]),{status:s,checkConnection:t,reconnect:r}},Cd=(s={enableMonitoring:!0,sampleRate:.1,reportingInterval:3e4})=>{const[a,t]=l.useState({loadTime:0,renderTime:0,memoryUsage:0,networkLatency:0}),[r,i]=l.useState(!1),c=l.useCallback(()=>{if(!s.enableMonitoring||Math.random()>s.sampleRate)return;const m=performance.getEntriesByType("navigation")[0],d=performance.memory,p={loadTime:m?m.loadEventEnd-m.loadEventStart:0,renderTime:m?m.domContentLoadedEventEnd-m.domContentLoadedEventStart:0,memoryUsage:d?d.usedJSHeapSize/1024/1024:0,networkLatency:m?m.responseEnd-m.requestStart:0};t(p),i(p.loadTime<3e3&&p.renderTime<1e3&&p.memoryUsage<100&&p.networkLatency<2e3)},[s]),n=l.useCallback(()=>{s.enableMonitoring&&console.log("Performance Metrics:",a)},[a,s.enableMonitoring]);l.useEffect(()=>{c();const m=setInterval(n,s.reportingInterval);return()=>clearInterval(m)},[c,n,s.reportingInterval]);const o=l.useCallback(()=>{"caches"in window&&caches.keys().then(m=>{m.forEach(d=>{(d.includes("old")||d.includes("v1"))&&caches.delete(d)})}),window.gc&&window.gc(),setTimeout(c,1e3)},[c]);return{metrics:a,isOptimized:r,optimizePerformance:o,measurePerformance:c}};class kd{constructor(){Qe(this,"sessionId");Qe(this,"isProduction");Qe(this,"logs",[]);Qe(this,"maxLogs",1e3);this.sessionId=crypto.randomUUID(),this.isProduction=!0}createLogEntry(a,t,r){return{level:a,message:t,timestamp:new Date,context:r,sessionId:this.sessionId}}debug(a,t){const r=this.createLogEntry("DEBUG",a,t);this.isProduction||console.debug(`[${r.timestamp.toISOString()}] DEBUG: ${a}`,t),this.addToBuffer(r)}info(a,t){const r=this.createLogEntry("INFO",a,t);console.info(`[${r.timestamp.toISOString()}] INFO: ${a}`,t),this.addToBuffer(r)}warn(a,t){const r=this.createLogEntry("WARN",a,t);console.warn(`[${r.timestamp.toISOString()}] WARN: ${a}`,t),this.addToBuffer(r),this.isProduction&&this.sendToExternalService(r)}error(a,t,r){const i={...r,error:t?{name:t.name,message:t.message,stack:t.stack}:void 0},c=this.createLogEntry("ERROR",a,i);console.error(`[${c.timestamp.toISOString()}] ERROR: ${a}`,t,r),this.addToBuffer(c),this.isProduction&&this.sendToExternalService(c)}addToBuffer(a){this.logs.push(a),this.logs.length>this.maxLogs&&this.logs.shift()}async sendToExternalService(a){try{await fetch("/api/logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}catch(t){console.error("Failed to send log to external service:",t)}}startTimer(a){const t=performance.now();return()=>{const r=performance.now()-t;this.info(`Performance: ${a}`,{duration:`${r.toFixed(2)}ms`})}}trackUserAction(a,t){this.info(`User Action: ${a}`,{action:a,properties:t,url:window.location.href,userAgent:navigator.userAgent})}trackApiCall(a,t,r,i){const c=r>=400?"ERROR":r>=300?"WARN":"INFO";this[c.toLowerCase()](`API Call: ${a} ${t}`,{method:a,url:t,status:r,duration:`${i}ms`})}getRecentLogs(a=50){return this.logs.slice(-a)}clearLogs(){this.logs=[]}}const Sd=new kd,_d=()=>{const{status:s}=wd(),{metrics:a,isOptimized:t}=Cd(),[r,i]=l.useState({totalUsers:0,activeUsers:0,totalTrades:0,systemUptime:0});l.useEffect(()=>{i({totalUsers:1250,activeUsers:89,totalTrades:3420,systemUptime:Date.now()-new Date("2025-01-01").getTime()})},[]);const c=o=>{const m=Math.floor(o/864e5),d=Math.floor(o%(1e3*60*60*24)/(1e3*60*60));return`${m}d ${d}h`},n=o=>e.jsx(_,{variant:o?"default":"destructive",children:o?"Good":"Issues"});return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"System Status Dashboard"}),e.jsx(f,{variant:"outline",onClick:()=>window.location.reload(),children:"Refresh"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(v,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ps,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Database"})]}),n(s.isHealthy)]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Latency: ",s.latency,"ms"]})]})}),e.jsx(v,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"font-medium",children:"Performance"})]}),n(t)]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Memory: ",a.memoryUsage.toFixed(1),"MB"]})]})}),e.jsx(v,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Users"})]}),e.jsx("span",{className:"font-bold",children:r.activeUsers})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Total: ",r.totalUsers.toLocaleString()]})]})}),e.jsx(v,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Uptime"})]}),e.jsx("span",{className:"font-bold",children:c(r.systemUptime)})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Trades: ",r.totalTrades.toLocaleString()]})]})})]}),e.jsxs(de,{defaultValue:"health",className:"w-full",children:[e.jsxs(ce,{className:"grid w-full grid-cols-4",children:[e.jsx(K,{value:"health",children:"Health Check"}),e.jsx(K,{value:"performance",children:"Performance"}),e.jsx(K,{value:"logs",children:"System Logs"}),e.jsx(K,{value:"analytics",children:"Analytics"})]}),e.jsx(O,{value:"health",children:e.jsx(bd,{})}),e.jsx(O,{value:"performance",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Performance Metrics"})}),e.jsx(y,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Load Times"}),e.jsxs("p",{className:"text-sm",children:["Page Load: ",a.loadTime,"ms"]}),e.jsxs("p",{className:"text-sm",children:["Render Time: ",a.renderTime,"ms"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Network"}),e.jsxs("p",{className:"text-sm",children:["Latency: ",a.networkLatency,"ms"]}),e.jsxs("p",{className:"text-sm",children:["Status: ",t?"Optimized":"Needs Attention"]})]})]})})]})}),e.jsx(O,{value:"logs",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Recent System Logs"})}),e.jsx(y,{children:e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Sd.getRecentLogs(20).map((o,m)=>e.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[e.jsx(_,{variant:o.level==="ERROR"?"destructive":o.level==="WARN"?"secondary":"outline",className:"text-xs",children:o.level}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{children:o.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o.timestamp.toLocaleString()})]})]},m))})})]})}),e.jsx(O,{value:"analytics",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"System Analytics"})}),e.jsx(y,{children:e.jsx("p",{className:"text-muted-foreground",children:"Detailed analytics and monitoring coming soon. This will include user behavior, API usage, and performance trends."})})]})})]})]})};class Ad extends l.Component{constructor(t){super(t);Qe(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorId:""})});Qe(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorId:""}}static getDerivedStateFromError(t){const r=`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return{hasError:!0,error:t,errorId:r}}componentDidCatch(t,r){console.error("Error Boundary Caught:",{error:t.message,stack:t.stack,componentStack:r.componentStack,errorId:this.state.errorId}),fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({errorId:this.state.errorId,message:t.message,stack:t.stack,componentStack:r.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})}).catch(()=>{})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-50",children:e.jsxs(v,{className:"w-full max-w-md",children:[e.jsxs(b,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 text-red-500",children:e.jsx(ve,{className:"h-full w-full"})}),e.jsx(w,{className:"text-xl font-semibold text-gray-900",children:"Something went wrong"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"We're sorry! An unexpected error occurred. Our team has been notified."}),!1,e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Error ID: ",this.state.errorId]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(f,{onClick:this.handleRetry,className:"flex-1",variant:"outline",children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Try Again"]}),e.jsxs(f,{onClick:this.handleGoHome,className:"flex-1",children:[e.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Go Home"]})]})]})]})}):this.props.children}}const Pd=()=>e.jsx(Ad,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(ne,{}),e.jsx("main",{children:e.jsx(_d,{})})]})}),Td=On,As=l.forwardRef(({className:s,...a},t)=>e.jsx(qn,{ref:t,className:q("border-b",s),...a}));As.displayName="AccordionItem";const Ps=l.forwardRef(({className:s,children:a,...t},r)=>e.jsx(zn,{className:"flex",children:e.jsxs(Sr,{ref:r,className:q("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...t,children:[a,e.jsx(nt,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Ps.displayName=Sr.displayName;const Ts=l.forwardRef(({className:s,children:a,...t},r)=>e.jsx(_r,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:e.jsx("div",{className:q("pb-4 pt-0",s),children:a})}));Ts.displayName=_r.displayName;const Id=()=>e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(w,{children:"Frequently Asked Questions"})}),e.jsx(y,{children:e.jsxs(Td,{type:"single",collapsible:!0,children:[e.jsxs(As,{value:"item-1",children:[e.jsx(Ps,{children:"How do I register as a farmer?"}),e.jsx(Ts,{children:'You can register by clicking the sign-up button and selecting "Farmer" as your account type.'})]}),e.jsxs(As,{value:"item-2",children:[e.jsx(Ps,{children:"How do I list my products for sale?"}),e.jsx(Ts,{children:'Go to your Farmer Portal and use the "Add Product" tab to list your agricultural products.'})]}),e.jsxs(As,{value:"item-3",children:[e.jsx(Ps,{children:"Is there a mobile app available?"}),e.jsx(Ts,{children:"Yes, AgriConnect is available as a mobile app for both Android and iOS devices."})]}),e.jsxs(As,{value:"item-4",children:[e.jsx(Ps,{children:"How do I contact customer support?"}),e.jsx(Ts,{children:"You can contact our support team through the Contact page or email support@agriconnect.com"})]})]})})]})}),Md=()=>e.jsx("div",{className:"container mx-auto py-8 max-w-4xl",children:e.jsxs(v,{children:[e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Os,{className:"h-8 w-8 text-green-600"}),e.jsx(w,{className:"text-3xl",children:"Privacy Policy - AgriConnect"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(_,{variant:"outline",children:"Effective: January 1, 2024"}),e.jsxs(_,{variant:"outline",children:["Last Updated: ",new Date().toLocaleDateString()]}),e.jsx(_,{variant:"outline",children:"Version 2.1"})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Cr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-blue-800",children:"This Privacy Policy complies with Kenya's Data Protection Act (2019) and international standards. By using AgriConnect, you agree to these terms and the collection and use of your information as described."})]})]})})]}),e.jsxs(y,{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(ht,{className:"mr-2 h-6 w-6 text-green-600"}),"1. Information We Collect"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Personal Information"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Account Data:"})," Full name, email address, phone number, location (county/region)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Profile Information:"})," Farm type, farm size, experience years, specialization, bio"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Contact Details:"})," Business information for service providers, contact preferences"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Authentication Data:"})," Login credentials, session information, authentication tokens"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Agricultural Data"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Crop Information:"})," Types of crops, planting schedules, harvest data, yield records"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Production Data:"})," Quantities, quality grades, organic certifications, storage conditions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Market Activity:"})," Pricing information, trade history, market preferences"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Farm Management:"})," Task tracking, inventory management, financial records"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Usage and Technical Data"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Device Information:"})," Browser type, operating system, device identifiers"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Usage Analytics:"})," Pages visited, features used, time spent, interaction patterns"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Location Data:"})," GPS coordinates (with permission), county/regional data for market matching"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"API Usage:"})," Request logs, response times, error rates for service optimization"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-amber-50",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center",children:[e.jsx(ve,{className:"mr-2 h-5 w-5 text-amber-600"}),"External Data Sources"]}),e.jsx("p",{className:"text-sm mb-2",children:"We collect agricultural data from legitimate Kenyan government sources:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Kilimo Statistics API:"})," County agricultural data, crop statistics"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Kenya National Bureau of Statistics:"})," Market prices, production data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Weather Services:"})," Climate data, weather alerts for farming decisions"]})]})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(Bn,{className:"mr-2 h-6 w-6 text-green-600"}),"2. How We Use Your Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(v,{children:[e.jsx(b,{className:"pb-3",children:e.jsx(w,{className:"text-lg",children:"Platform Services"})}),e.jsxs(y,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"â€¢ Connect farmers with buyers and service providers"}),e.jsx("p",{children:"â€¢ Provide real-time market prices and forecasts"}),e.jsx("p",{children:"â€¢ Facilitate transportation and logistics matching"}),e.jsx("p",{children:"â€¢ Enable warehouse booking and storage solutions"}),e.jsx("p",{children:"â€¢ Support quality control and certification tracking"})]})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-3",children:e.jsx(w,{className:"text-lg",children:"AI-Powered Features"})}),e.jsxs(y,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"â€¢ Provide personalized crop recommendations"}),e.jsx("p",{children:"â€¢ Analyze market trends and price predictions"}),e.jsx("p",{children:"â€¢ Offer farming advice and best practices"}),e.jsx("p",{children:"â€¢ Support pest and disease identification"}),e.jsx("p",{children:"â€¢ Optimize supply chain operations"})]})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-3",children:e.jsx(w,{className:"text-lg",children:"Communication"})}),e.jsxs(y,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"â€¢ Send market opportunity notifications"}),e.jsx("p",{children:"â€¢ Provide weather alerts and farming tips"}),e.jsx("p",{children:"â€¢ Deliver customer support and assistance"}),e.jsx("p",{children:"â€¢ Share platform updates and new features"}),e.jsx("p",{children:"â€¢ Facilitate user-to-user communications"})]})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-3",children:e.jsx(w,{className:"text-lg",children:"Legal Compliance"})}),e.jsxs(y,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"â€¢ Comply with Kenyan agricultural regulations"}),e.jsx("p",{children:"â€¢ Maintain transaction records as required by law"}),e.jsx("p",{children:"â€¢ Support tax reporting and business compliance"}),e.jsx("p",{children:"â€¢ Respond to legal requests and court orders"}),e.jsx("p",{children:"â€¢ Prevent fraud and ensure platform security"})]})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(sa,{className:"mr-2 h-6 w-6 text-green-600"}),"3. Data Sharing and Disclosure"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"WE DO NOT SELL YOUR PERSONAL DATA"}),e.jsx("p",{className:"text-sm text-red-800",children:"AgriConnect never sells, trades, or rents your personal information to third parties for marketing purposes. Your data is used solely to improve our agricultural platform and connect you with legitimate opportunities."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Limited Sharing Scenarios:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Service Providers"}),e.jsx("p",{className:"text-sm",children:"Trusted partners who help operate our platform (Supabase for data storage, SMS providers, payment processors)"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Platform Users"}),e.jsx("p",{className:"text-sm",children:"Basic profile information visible to other users for legitimate agricultural business purposes"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Legal Requirements"}),e.jsx("p",{className:"text-sm",children:"When required by Kenyan law, court orders, or regulatory authorities (KNBS, Ministry of Agriculture)"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Aggregated Data"}),e.jsx("p",{className:"text-sm",children:"Anonymous, aggregated agricultural trends shared with research institutions for farming improvements"})]})]})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"4. Data Security Measures"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(v,{children:[e.jsx(b,{className:"pb-3",children:e.jsx(w,{className:"text-lg",children:"Technical Safeguards"})}),e.jsxs(y,{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Encryption:"})," AES-256 for sensitive data at rest"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Transmission:"})," TLS 1.3 for all communications"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Authentication:"})," Multi-factor authentication (SMS/Email)"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Access Control:"})," Role-based permissions and audit logs"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Database Security:"})," Row-level security and SQL injection protection"]})]})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-3",children:e.jsx(w,{className:"text-lg",children:"Operational Security"})}),e.jsxs(y,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"â€¢ Regular security audits and vulnerability assessments"}),e.jsx("p",{children:"â€¢ Employee access controls and security training"}),e.jsx("p",{children:"â€¢ Incident response and breach notification procedures"}),e.jsx("p",{children:"â€¢ Compliance with ISO 27001 security standards"}),e.jsx("p",{children:"â€¢ Regular backups and disaster recovery procedures"})]})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"5. Your Rights and Choices"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Data Protection Rights (Kenya Data Protection Act 2019)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Access Rights"}),e.jsx("p",{className:"text-sm",children:"Request a copy of all personal data we hold about you"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Correction Rights"}),e.jsx("p",{className:"text-sm",children:"Update or correct any inaccurate information"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Deletion Rights"}),e.jsx("p",{className:"text-sm",children:"Request deletion of your account and associated data"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Portability Rights"}),e.jsx("p",{className:"text-sm",children:"Export your data in a machine-readable format"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Communication Preferences"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Manage notification settings in your account preferences"}),e.jsx("li",{children:"Opt-out of marketing communications via email or SMS"}),e.jsx("li",{children:"Control weather alerts and price notifications"}),e.jsx("li",{children:"Customize AI assistant interaction preferences"})]})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"6. Data Retention Policy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium",children:"Active Accounts"}),e.jsx("p",{className:"text-sm",children:"Data retained while account is active and for 2 years after last login"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium",children:"Transaction Records"}),e.jsx("p",{className:"text-sm",children:"Kept for 7 years for tax compliance and agricultural business records"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium",children:"Communication Logs"}),e.jsx("p",{className:"text-sm",children:"Retained for 1 year for customer support and dispute resolution"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium",children:"Aggregated Analytics"}),e.jsx("p",{className:"text-sm",children:"Anonymous data may be retained indefinitely for agricultural research"})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"7. Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(v,{children:[e.jsx(b,{className:"pb-3",children:e.jsx(w,{className:"text-lg",children:"Data Protection Officer"})}),e.jsxs(y,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," privacy@agriconnect.co.ke"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +254 700 000 000"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," Nairobi, Kenya"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Response Time:"})," 48-72 hours"]})]})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-3",children:e.jsx(w,{className:"text-lg",children:"Regulatory Authority"})}),e.jsxs(y,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Office:"})," Data Protection Commissioner"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," P.O. Box 66156 â€“ 00800, Nairobi"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," info@odpc.go.ke"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Website:"})," www.odpc.go.ke"]})]})]})]})]}),e.jsx("div",{className:"mt-8 p-4 bg-green-50 border border-green-200 rounded-lg text-center",children:e.jsx("p",{className:"text-sm font-medium text-green-900",children:"By using AgriConnect, you acknowledge that you have read, understood, and agree to this Privacy Policy. This policy is governed by Kenyan data protection laws and international best practices."})})]})]})}),Dd=()=>e.jsx("div",{className:"container mx-auto py-8 max-w-4xl",children:e.jsxs(v,{children:[e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($n,{className:"h-8 w-8 text-blue-600"}),e.jsx(w,{className:"text-3xl",children:"Terms of Service - AgriConnect"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(_,{variant:"outline",children:"Effective: January 1, 2024"}),e.jsxs(_,{variant:"outline",children:["Last Updated: ",new Date().toLocaleDateString()]}),e.jsx(_,{variant:"outline",children:"Version 2.2"})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"Share Our Terms"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Help other farmers understand AgriConnect's commitment to transparency and data protection."})]}),e.jsx(na,{title:"AgriConnect Terms of Service",text:"AgriConnect is committed to transparent agricultural technology. Our Terms of Service outline our commitment to farmers, data protection, and open agriculture policies in Kenya.",size:"sm"})]})}),e.jsx("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ve,{className:"h-5 w-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900",children:"Legal Agreement"}),e.jsx("p",{className:"text-sm text-red-800",children:"These Terms of Service constitute a legally binding agreement between you and AgriConnect. By accessing or using our platform, you agree to be bound by these terms and all applicable laws."})]})]})})]}),e.jsxs(y,{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(pt,{className:"mr-2 h-6 w-6 text-blue-600"}),"1. Acceptance of Terms"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm leading-relaxed",children:"By accessing, browsing, or using the AgriConnect platform (website, mobile application, or API services), you acknowledge that you have read, understood, and agree to be bound by these Terms of Service and our Privacy Policy."}),e.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Platform Scope"}),e.jsx("p",{className:"text-sm",children:"AgriConnect is an agricultural technology platform that connects farmers, buyers, service providers, and other stakeholders in Kenya's agricultural ecosystem. We facilitate connections but do not control or guarantee the quality, legality, or availability of products or services offered by users."})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-amber-50",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center",children:[e.jsx(ve,{className:"mr-2 h-4 w-4 text-amber-600"}),"User Eligibility"]}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"You must be at least 18 years old to use AgriConnect"}),e.jsx("li",{children:"You must have legal capacity to enter into binding agreements"}),e.jsx("li",{children:"You must comply with all applicable laws in Kenya and your jurisdiction"}),e.jsx("li",{children:"Business users must have proper registration and licensing as required by law"})]})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(ps,{className:"mr-2 h-6 w-6 text-blue-600"}),"2. Open Data Policy Compliance"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-green-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Kenya Ministry of Agriculture Open Data Adherence"}),e.jsx("p",{className:"text-sm mb-3",children:"AgriConnect fully adheres to the Kenya Ministry of Agriculture and Livestock Development's Open Data Policy, ensuring transparent, accessible, and responsible agricultural data sharing."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-700 mb-2",children:"Data Quality Standards"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Complete data without privacy violations"}),e.jsx("li",{children:"Primary data traceable to source"}),e.jsx("li",{children:"Timely updates preserving data value"}),e.jsx("li",{children:"Accessible to widest user range"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-700 mb-2",children:"Technical Standards"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Machine-processable structured data"}),e.jsx("li",{children:"Non-discriminatory access policies"}),e.jsx("li",{children:"License-free, non-proprietary formats"}),e.jsx("li",{children:"Reviewable with designated contacts"})]})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Our Data Commitments"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Open by Default:"})," Non-sensitive agricultural data freely available"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"High-Quality APIs:"})," Free, reliable application programming interfaces"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Government Partnerships:"})," Collaboration with MoA&LD and counties"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Security Standards:"})," Highest privacy and security protections"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Systematic Renewal:"})," Regular data updates and historical preservation"]})]})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(oe,{className:"mr-2 h-6 w-6 text-blue-600"}),"3. User Responsibilities and Conduct"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Account Security"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm",children:[e.jsx("li",{children:"Maintain the confidentiality of your account credentials"}),e.jsx("li",{children:"Notify us immediately of any unauthorized access to your account"}),e.jsx("li",{children:"Provide accurate, current, and complete information during registration"}),e.jsx("li",{children:"Update your information promptly when changes occur"}),e.jsx("li",{children:"You are responsible for all activities that occur under your account"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Acceptable Use"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-700 mb-2",children:"âœ“ Permitted Activities"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Legitimate agricultural trading and business"}),e.jsx("li",{children:"Seeking or providing agricultural services"}),e.jsx("li",{children:"Sharing educational farming content"}),e.jsx("li",{children:"Participating in community discussions"}),e.jsx("li",{children:"Using APIs for business integration"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-700 mb-2",children:"âœ— Prohibited Activities"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Fraudulent or deceptive practices"}),e.jsx("li",{children:"Selling illegal or harmful products"}),e.jsx("li",{children:"Harassment or abusive behavior"}),e.jsx("li",{children:"Spam or unsolicited communications"}),e.jsx("li",{children:"Unauthorized data scraping or API abuse"})]})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-red-50",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center",children:[e.jsx(ve,{className:"mr-2 h-5 w-5 text-red-600"}),"Strictly Prohibited Activities"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Money laundering or financial crimes"}),e.jsx("li",{children:"Tax evasion or fraudulent reporting"}),e.jsx("li",{children:"Selling counterfeit agricultural products"}),e.jsx("li",{children:"Misrepresenting crop quality or certifications"})]}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Violating intellectual property rights"}),e.jsx("li",{children:"Distributing malware or viruses"}),e.jsx("li",{children:"Attempting to hack or compromise the platform"}),e.jsx("li",{children:"Creating multiple accounts to circumvent restrictions"})]})]})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(Os,{className:"mr-2 h-6 w-6 text-blue-600"}),"4. Platform Disclaimers and Limitations"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-yellow-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Platform Role Disclaimer"}),e.jsxs("p",{className:"text-sm mb-2",children:[e.jsx("strong",{children:"AgriConnect is a technology platform that facilitates connections."})," We do not:"]}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Own, sell, or directly control any agricultural products or services"}),e.jsx("li",{children:"Guarantee the quality, safety, legality, or availability of user offerings"}),e.jsx("li",{children:"Manage farming operations or provide direct agricultural services"}),e.jsx("li",{children:"Act as a financial institution or provide banking services"}),e.jsx("li",{children:"Assume responsibility for user transactions or business relationships"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Data and Information Disclaimer"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Market Prices:"})," Provided for informational purposes only; not investment advice"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Weather Data:"})," Based on third-party sources; users should verify independently"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Agricultural Advice:"})," AI-generated suggestions are not professional consultations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"External APIs:"})," We integrate with Kilimo Statistics API and other government sources but cannot guarantee their accuracy"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-red-50",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center",children:[e.jsx(ve,{className:"mr-2 h-4 w-4 text-red-600"}),"Service Availability"]}),e.jsx("p",{className:"text-sm",children:"While we strive for 99.9% uptime, we cannot guarantee uninterrupted service. The platform may be temporarily unavailable due to maintenance, updates, or technical issues. We are not liable for losses resulting from service interruptions."})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(Un,{className:"mr-2 h-6 w-6 text-blue-600"}),"5. Limitation of Liability"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-red-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Maximum Liability Cap"}),e.jsx("p",{className:"text-sm",children:e.jsx("strong",{children:"AgriConnect's total liability to you for any claims arising from your use of the platform shall not exceed KES 50,000 or the amount you paid us in the 12 months preceding the claim, whichever is lower."})})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Excluded Damages"}),e.jsx("p",{className:"text-sm mb-2",children:"We are not liable for:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Crop losses or agricultural failures"}),e.jsx("li",{children:"Business losses or lost profits"}),e.jsx("li",{children:"Failed transactions between users"}),e.jsx("li",{children:"Data loss or corruption"})]}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Third-party service failures"}),e.jsx("li",{children:"Consequential or indirect damages"}),e.jsx("li",{children:"User negligence or misuse"}),e.jsx("li",{children:"Force majeure events"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"User Indemnification"}),e.jsx("p",{className:"text-sm",children:"You agree to indemnify and hold AgriConnect harmless from any claims, damages, or expenses arising from your use of the platform, violation of these terms, or infringement of third-party rights."})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"6. Intellectual Property Rights"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"AgriConnect Intellectual Property"}),e.jsx("p",{className:"text-sm mb-2",children:"All platform content, features, and functionality are owned by AgriConnect, including:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Software code, algorithms, and AI models"}),e.jsx("li",{children:"Trademarks, logos, and brand elements"}),e.jsx("li",{children:"Database structures and aggregated data"}),e.jsx("li",{children:"User interface designs and documentation"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"User Content Rights"}),e.jsx("p",{className:"text-sm mb-2",children:"You retain ownership of content you submit but grant us a license to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Display your content on the platform"}),e.jsx("li",{children:"Use aggregated data for agricultural research"}),e.jsx("li",{children:"Moderate and remove inappropriate content"}),e.jsx("li",{children:"Create anonymized analytics and insights"})]})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"7. Payment and Financial Terms"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Platform Fees"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Basic Services:"})," Free for farmers and basic users"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Premium Features:"})," API access, advanced analytics (fees apply)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Business Services:"})," Advertising, premium listings (KES 2,500-15,000/month)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Transaction Fees:"})," May apply to facilitated payments (clearly disclosed)"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-amber-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Tax Responsibilities"}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Users are solely responsible for their tax obligations."})," This includes: income tax on sales, VAT where applicable, and proper record-keeping for tax authorities. AgriConnect provides transaction records but does not provide tax advice."]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Payment Processing"}),e.jsx("p",{className:"text-sm",children:"Payments are processed through secure third-party providers (PayPal, M-Pesa). We do not store payment card information. Refunds are subject to our refund policy and the terms of the specific service purchased."})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"8. Dispute Resolution"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Internal Resolution Process"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Direct Communication:"})," Users should first attempt to resolve disputes directly"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Platform Mediation:"})," AgriConnect can facilitate discussions if requested"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Documentation:"})," Keep records of all communications and transactions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Support Escalation:"})," Contact support@agriconnect.co.ke for assistance"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Legal Jurisdiction"}),e.jsx("p",{className:"text-sm",children:"These terms are governed by Kenyan law. Any legal disputes will be resolved in Kenyan courts, specifically in Nairobi. Users agree to submit to the jurisdiction of these courts."})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Alternative Dispute Resolution"}),e.jsx("p",{className:"text-sm",children:"Before initiating legal proceedings, parties agree to attempt resolution through the Nairobi Centre for International Arbitration or another mutually agreed arbitration service."})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"9. Termination"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"User Termination Rights"}),e.jsx("p",{className:"text-sm mb-2",children:"You may terminate your account at any time by:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Using the account deletion feature in your profile settings"}),e.jsx("li",{children:"Contacting our support team at support@agriconnect.co.ke"}),e.jsx("li",{children:"Data will be deleted according to our Privacy Policy retention schedule"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-red-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"AgriConnect Termination Rights"}),e.jsx("p",{className:"text-sm mb-2",children:"We may suspend or terminate accounts for:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Violation of these Terms of Service"}),e.jsx("li",{children:"Fraudulent or illegal activities"}),e.jsx("li",{children:"Abuse of platform features or other users"}),e.jsx("li",{children:"Extended inactivity (12+ months with notice)"})]})]})]})]}),e.jsx(ue,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"10. Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(v,{children:[e.jsx(b,{className:"pb-3",children:e.jsx(w,{className:"text-lg",children:"Legal Department"})}),e.jsxs(y,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," legal@agriconnect.co.ke"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +254 700 000 001"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," Nairobi, Kenya"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Response Time:"})," 5-7 business days"]})]})]}),e.jsxs(v,{children:[e.jsx(b,{className:"pb-3",children:e.jsx(w,{className:"text-lg",children:"Customer Support"})}),e.jsxs(y,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," support@agriconnect.co.ke"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +254 700 000 002"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hours:"})," 8 AM - 6 PM EAT, Mon-Fri"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Emergency:"})," 24/7 for critical issues"]})]})]})]})]}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"By using AgriConnect, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service. These terms constitute the entire agreement between you and AgriConnect regarding the use of our platform."}),e.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"For questions about these terms, please contact our legal department at legal@agriconnect.co.ke"})]})]})]})}),Ed=()=>{const s=xt();return l.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("h1",{className:"text-6xl font-bold mb-4 text-gray-800",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Oops! Page not found"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("p",{className:"text-gray-500 mb-6",children:"The page you're looking for doesn't exist or may have been moved."}),e.jsx(V,{to:"/",className:"text-blue-500 hover:text-blue-700 underline block mb-4",children:"Return to Home"}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"You might be interested in:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(V,{to:"/sentiment-analysis",children:e.jsx(f,{variant:"outline",className:"w-full",children:"Sentiment Analysis"})}),e.jsx(V,{to:"/market-demand-hotspot",children:e.jsx(f,{variant:"outline",className:"w-full",children:"Market Demand Hotspots"})}),e.jsx(V,{to:"/farmer-success-stories",children:e.jsx(f,{variant:"outline",className:"w-full",children:"Farmer Success Stories"})}),e.jsx(V,{to:"/commodity-trading",children:e.jsx(f,{variant:"outline",className:"w-full",children:"Commodity Trading"})})]})]})]})]})})},ha=async()=>P.from("farm_input_suppliers").select("*"),Fd=async s=>{const a=["price_per_unit","product_category","product_name","supplier_id","unit_of_measure"];for(const t of a)if(!(t in s)||s[t]===void 0)throw new Error(`Missing required field: ${t}`);return P.from("farm_input_products").insert([s])},Ld=async s=>P.from("farm_input_products").select("*, category:category_id(*), supplier:supplier_id(*)"),ni=async()=>P.from("farm_input_categories").select("*").eq("is_active",!0),Rd=async s=>{const{name:a,...t}=s;return P.from("farm_input_categories").insert([{name:a,...t}])},Kd=async s=>P.from("farm_input_orders").select("*, items:order_items(*)"),qd=async(s,a)=>P.from("farm_input_orders").update(a).eq("id",s),zd=async(s,a)=>P.from("farm_input_product_likes").insert([{product_id:s,user_id:a}]),Od=async(s,a)=>P.from("farm_input_product_bookmarks").insert([{product_id:s,user_id:a}]),Bd=async(s,a,t,r)=>P.from("farm_input_product_ratings").insert([{product_id:s,user_id:a,rating:t,comment:r}]),$d=async(s,a)=>P.from("farm_input_supplier_likes").insert([{supplier_id:s,user_id:a}]),Ud=async(s,a,t,r)=>P.from("farm_input_supplier_ratings").insert([{supplier_id:s,user_id:a,rating:t,comment:r}]),Vd=async(s,a,t,r)=>P.from("marketplace_flags").insert([{entity_type:s,entity_id:a,user_id:t,reason:r}]),Hd=async(s,a,t,r)=>P.from("marketplace_ban_recommendations").insert([{entity_type:s,entity_id:a,user_id:t,reason:r}]),Gd=()=>{const[s,a]=l.useState([]),[t,r]=l.useState(""),[i,c]=l.useState(""),[n,o]=l.useState(!1),[m,d]=l.useState(""),p=async()=>{o(!0);const{data:g,error:x}=await ni();x?d(x.message):a(g||[]),o(!1)};l.useEffect(()=>{p()},[]);const j=async g=>{g.preventDefault(),o(!0),d("");const{error:x}=await Rd({name:t,description:i});x?d(x.message):(r(""),c(""),p()),o(!1)};return e.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Manage Farm Input Categories"}),e.jsxs("form",{onSubmit:j,className:"mb-6",children:[e.jsx("input",{className:"border rounded px-2 py-1 mr-2",placeholder:"Category name",value:t,onChange:g=>r(g.target.value),required:!0}),e.jsx("input",{className:"border rounded px-2 py-1 mr-2",placeholder:"Description (optional)",value:i,onChange:g=>c(g.target.value)}),e.jsx("button",{type:"submit",className:"bg-green-700 text-white px-4 py-1 rounded",disabled:n,children:"Add"})]}),m&&e.jsx("div",{className:"text-red-600 mb-2",children:m}),e.jsx("ul",{className:"divide-y",children:s.map(g=>e.jsxs("li",{className:"py-2",children:[e.jsx("span",{className:"font-semibold",children:g.name})," - ",g.description]},g.id))})]})},Ss="demo-user-id",Yd=()=>{const[s,a]=l.useState([]);l.useState({supplier_name:"",contact_phone:"",contact_email:"",contact_person:"",county:"",physical_address:"",specialization:"",user_id:"",is_active:!0});const[t,r]=l.useState(!1),[i,c]=l.useState(""),[n,o]=l.useState(null),[m,d]=l.useState(null),[p,j]=l.useState(null),[g,x]=l.useState(""),[N,k]=l.useState(""),[u,h]=l.useState(null),[S,T]=l.useState(null),A=async()=>{r(!0);const{data:F,error:Q}=await ha();Q?c(Q.message):a(F||[]),r(!1)};l.useEffect(()=>{A()},[]);const D=async F=>{o(F),await $d(F,Ss),await A(),o(null)},L=async(F,Q)=>{d(F),await Ud(F,Ss,Q,g),x(""),await A(),d(null)},R=async F=>{h(F),await Vd("supplier",F,Ss,N),k(""),h(null)},$=async F=>{T(F),await Hd("supplier",F,Ss,"Recommended for ban"),T(null)},Z=async F=>{j(F),await Od(F,Ss),j(null)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Supplier Manager"}),i&&e.jsx("div",{className:"text-red-500 mb-4",children:i}),t?e.jsx("div",{children:"Loading suppliers..."}):e.jsx("div",{children:s.map(F=>e.jsxs("div",{className:"border rounded p-4 mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:F.supplier_name}),e.jsxs("div",{className:"text-gray-700",children:[F.contact_person," | ",F.contact_phone," | ",F.contact_email]}),e.jsxs("div",{className:"text-gray-500 text-sm",children:[F.physical_address,", ",F.county]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-red-600 border rounded px-2 py-1",onClick:()=>D(F.id),disabled:n===F.id,children:"â¤ï¸ Like"}),e.jsx("button",{className:"text-yellow-600 border rounded px-2 py-1",onClick:()=>L(F.id,5),disabled:m===F.id,children:"â­ 5-Star"}),F.products&&F.products.length>0&&e.jsx("button",{className:"text-blue-600 border rounded px-2 py-1",onClick:()=>Z(F.products[0].id),disabled:p===F.products[0].id,children:"ðŸ”– Bookmark Product"})]}),e.jsxs("div",{className:"flex gap-2 items-center mt-1",children:[e.jsx("input",{className:"border rounded px-2 py-1",placeholder:"Add a comment to your rating",value:g,onChange:Q=>x(Q.target.value),style:{minWidth:180}}),e.jsx("button",{className:"text-yellow-700 border rounded px-2 py-1",onClick:()=>L(F.id,5),disabled:m===F.id||!g,children:"Submit Comment"})]}),e.jsxs("div",{className:"flex gap-2 items-center mt-1",children:[e.jsx("input",{className:"border rounded px-2 py-1",placeholder:"Flag reason",value:N,onChange:Q=>k(Q.target.value),style:{minWidth:180}}),e.jsx("button",{className:"text-orange-700 border rounded px-2 py-1",onClick:()=>R(F.id),disabled:u===F.id||!N,children:"ðŸš© Flag Supplier"}),e.jsx("button",{className:"text-red-800 border rounded px-2 py-1",onClick:()=>$(F.id),disabled:S===F.id,children:"â›” Recommend Ban"})]})]})]},F.id))})]})},Wd=()=>{const[s,a]=l.useState([]),[t,r]=l.useState(null),[i,c]=l.useState(null);l.useState(null);const n="demo-user-id",o=async L=>{r(L),await zd(L,n),T(),r(null)},m=async(L,R)=>{c(L),await Bd(L,n,R),T(),c(null)},[d,p]=l.useState([]),[j,g]=l.useState([]),[x,N]=l.useState({product_name:"",product_description:"",supplier_id:"",category_id:"",price_per_unit:"",unit_of_measure:"",product_category:"",is_available:!0}),[k,u]=l.useState(!1),[h,S]=l.useState(""),T=async()=>{u(!0);const[{data:L},{data:R},{data:$}]=await Promise.all([Ld(),ni(),ha()]);a(L||[]),p(R||[]),g($||[]),u(!1)};l.useEffect(()=>{T()},[]);const A=L=>{N({...x,[L.target.name]:L.target.value})},D=async L=>{L.preventDefault(),u(!0),S("");const R={product_name:x.product_name,product_description:x.product_description,supplier_id:x.supplier_id,category_id:x.category_id,price_per_unit:Number(x.price_per_unit),unit_of_measure:x.unit_of_measure,product_category:x.product_category,is_available:x.is_available},{error:$}=await Fd(R);$?S($.message):(N({product_name:"",product_description:"",supplier_id:"",category_id:"",price_per_unit:"",unit_of_measure:"",product_category:"",is_available:!0}),T()),u(!1)};return e.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Manage Farm Input Products"}),e.jsxs("form",{onSubmit:D,className:"mb-6",children:[e.jsx("input",{className:"border rounded px-2 py-1 mr-2 mb-2",placeholder:"Product name",name:"product_name",value:x.product_name,onChange:A,required:!0}),e.jsx("input",{className:"border rounded px-2 py-1 mr-2 mb-2",placeholder:"Description",name:"product_description",value:x.product_description,onChange:A}),e.jsxs("select",{className:"border rounded px-2 py-1 mr-2 mb-2",name:"category_id",value:x.category_id,onChange:A,required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),d.map(L=>e.jsx("option",{value:L.id,children:L.name},L.id))]}),e.jsxs("select",{className:"border rounded px-2 py-1 mr-2 mb-2",name:"supplier_id",value:x.supplier_id,onChange:A,required:!0,children:[e.jsx("option",{value:"",children:"Select Supplier"}),j.map(L=>e.jsx("option",{value:L.id,children:L.supplier_name},L.id))]}),e.jsx("input",{className:"border rounded px-2 py-1 mr-2 mb-2",placeholder:"Price per unit",name:"price_per_unit",type:"number",value:x.price_per_unit,onChange:A,required:!0}),e.jsx("input",{className:"border rounded px-2 py-1 mr-2 mb-2",placeholder:"Unit of measure (e.g. kg, L, pcs)",name:"unit_of_measure",value:x.unit_of_measure,onChange:A,required:!0}),e.jsx("input",{className:"border rounded px-2 py-1 mr-2 mb-2",placeholder:"Product category (e.g. Fertilizer, Seed)",name:"product_category",value:x.product_category,onChange:A,required:!0}),e.jsx("button",{type:"submit",className:"bg-green-700 text-white px-4 py-1 rounded",disabled:k,children:"Add"})]}),h&&e.jsx("div",{className:"text-red-600 mb-2",children:h}),e.jsx("ul",{className:"divide-y",children:s.map(L=>{var R,$;return e.jsxs("li",{className:"py-2 flex flex-col gap-1",children:[e.jsx("span",{className:"font-semibold",children:L.product_name})," - ",L.product_description," | Category: ",(R=L.category)==null?void 0:R.name," | Supplier: ",($=L.supplier)==null?void 0:$.supplier_name," | Price: ",L.price_per_unit,e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("button",{className:"text-red-600 border rounded px-2 py-1",onClick:()=>o(L.id),disabled:t===L.id,children:"â¤ï¸ Like"}),e.jsx("button",{className:"text-yellow-600 border rounded px-2 py-1",onClick:()=>m(L.id,5),disabled:i===L.id,children:"â­ 5-Star"})]})]},L.id)})})]})},Qd=()=>{const[s,a]=l.useState([]),[t,r]=l.useState([]),[i,c]=l.useState(!1),[n,o]=l.useState(""),m=async()=>{c(!0);const[{data:p},{data:j}]=await Promise.all([Kd(),ha()]);a(p||[]),r(j||[]),c(!1)};l.useEffect(()=>{m()},[]);const d=async(p,j)=>{c(!0),o("");const{error:g}=await qd(p,{order_status:j});g&&o(g.message),m(),c(!1)};return e.jsxs("div",{className:"max-w-xl mx-auto p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Manage Farm Input Orders"}),n&&e.jsx("div",{className:"text-red-600 mb-2",children:n}),e.jsx("ul",{className:"divide-y",children:s.map(p=>{var j;return e.jsxs("li",{className:"py-2",children:[e.jsxs("div",{className:"font-semibold",children:["Order #",p.id]}),e.jsxs("div",{children:["Supplier: ",((j=t.find(g=>g.id===p.supplier_id))==null?void 0:j.supplier_name)||p.supplier_id]}),e.jsxs("div",{children:["Buyer: ",p.buyer_id]}),e.jsxs("div",{children:["Status: ",p.status||"N/A"]}),e.jsxs("div",{children:["Created: ",p.created_at]}),e.jsxs("div",{children:[e.jsx("button",{className:"bg-green-700 text-white px-2 py-1 rounded mr-2",onClick:()=>d(p.id,"approved"),disabled:i,children:"Approve"}),e.jsx("button",{className:"bg-gray-500 text-white px-2 py-1 rounded",onClick:()=>d(p.id,"rejected"),disabled:i,children:"Reject"})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Items:",e.jsx("ul",{className:"list-disc ml-6",children:(p.items||[]).map(g=>e.jsxs("li",{children:[g.product_id," x ",g.quantity]},g.id))})]})]},p.id)})})]})},Jd=()=>e.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Admin Panel"}),e.jsx("div",{className:"mb-8",children:e.jsx(Gd,{})}),e.jsx("div",{className:"mb-8",children:e.jsx(Yd,{})}),e.jsx("div",{className:"mb-8",children:e.jsx(Wd,{})}),e.jsx("div",{className:"mb-8",children:e.jsx(Qd,{})})]}),Zd=()=>{const[s,a]=l.useState(""),[t,r]=l.useState("all"),[i,c]=l.useState([]),[n,o]=l.useState([]),[m,d]=l.useState(!0),{toast:p}=ee();l.useEffect(()=>{j()},[]);const j=async()=>{try{d(!0);const{data:u,error:h}=await P.from("farm_input_products").select(`
          *,
          supplier:farm_input_suppliers (
            id,
            supplier_name,
            contact_phone
          )
        `).eq("is_active",!0);if(h)throw h;c(u||[])}catch(u){console.error("Error fetching products:",u),p({title:"Error",description:"Failed to load products. Please try again.",variant:"destructive"})}finally{d(!1)}},g=i.filter(u=>{var T;const h=u.product_name.toLowerCase().includes(s.toLowerCase())||((T=u.product_description)==null?void 0:T.toLowerCase().includes(s.toLowerCase())),S=t==="all"||!t||u.product_category===t;return h&&S}),x=Array.from(new Set(i.map(u=>u.product_category))),N=(u,h)=>{const S={id:u.id,product_name:u.product_name,quantity:h,price_per_unit:u.price_per_unit,supplier:{id:u.supplier.id,supplier_name:u.supplier.supplier_name,contact_phone:u.supplier.contact_phone}};o(T=>T.find(D=>D.id===u.id)?T.map(D=>D.id===u.id?{...D,quantity:D.quantity+h}:D):[...T,S]),p({title:"Added to Cart",description:`${h} ${u.unit_of_measure} of ${u.product_name} added to cart`})},k=async()=>{var u,h;if(n.length!==0)try{d(!0);const{data:{user:S}}=await P.auth.getUser();if(!S){p({title:"Authentication Required",description:"Please log in to place orders.",variant:"destructive"});return}const T=n.reduce((A,D)=>{const L=D.supplier.id;return A[L]||(A[L]={supplier:D.supplier,items:[],total:0}),A[L].items.push(D),A[L].total+=D.quantity*D.price_per_unit,A},{});for(const[A,D]of Object.entries(T)){const{data:L,error:R}=await P.from("farm_input_orders").insert({buyer_id:S.id,supplier_id:A,total_amount:D.total,delivery_method:"pickup",buyer_name:((u=S.user_metadata)==null?void 0:u.full_name)||"John Farmer",buyer_phone:((h=S.user_metadata)==null?void 0:h.phone)||"+254700000000",delivery_county:"Nairobi"}).select().single();if(R)throw R;const $=D.items.map(F=>({order_id:L.id,product_id:F.id,quantity:F.quantity,unit_price:F.price_per_unit,total_price:F.quantity*F.price_per_unit})),{error:Z}=await P.from("farm_input_order_items").insert($);if(Z)throw Z}o([]),p({title:"Orders Placed Successfully",description:`${Object.keys(T).length} order(s) have been placed with different suppliers.`})}catch(S){console.error("Error placing order:",S),p({title:"Error",description:"Failed to place order. Please try again.",variant:"destructive"})}finally{d(!1)}};return m?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsx("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-lg",children:"Loading farm inputs..."})})})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(ne,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Farm Input Marketplace"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Source quality agricultural inputs from verified suppliers"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(He,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search products...",value:s,onChange:u=>a(u.target.value),className:"pl-10"})]}),e.jsxs(Y,{value:t,onValueChange:r,children:[e.jsx(H,{className:"w-full sm:w-48",children:e.jsx(W,{placeholder:"All Categories"})}),e.jsxs(G,{children:[e.jsx(C,{value:"all",children:"All Categories"}),x.map(u=>e.jsx(C,{value:u,children:u},u))]})]}),e.jsxs(f,{variant:"outline",children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),e.jsx("div",{className:"grid gap-6",children:g.map(u=>e.jsxs(v,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(b,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(w,{className:"text-xl mb-2",children:u.product_name}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(_,{variant:"secondary",children:u.product_category}),e.jsxs(_,{variant:"default",children:[u.price_per_unit," KES / ",u.unit_of_measure]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:u.supplier.supplier_name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:u.supplier.contact_phone})]})]})}),e.jsxs(y,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:u.product_description}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Available Stock:"}),e.jsx("div",{className:"text-sm font-medium",children:u.stock_quantity})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Brand:"}),e.jsx("div",{className:"text-sm font-medium",children:u.brand_name||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(M,{type:"number",placeholder:"Quantity",defaultValue:1,className:"w-24"}),e.jsxs(f,{onClick:()=>N(u,1),className:"flex-1",children:[e.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})]})]})]},u.id))}),g.length===0&&e.jsx(v,{className:"text-center py-12",children:e.jsxs(y,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search criteria to find what you're looking for."})]})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Vt,{className:"h-5 w-5"}),e.jsxs("span",{className:"font-medium",children:[n.length," items in cart"]})]}),e.jsx("div",{children:e.jsx(f,{onClick:k,disabled:n.length===0||m,children:m?e.jsx(e.Fragment,{children:"Placing Order..."}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Place Order"]})})})]})})]})},Xd=()=>{const{user:s,session:a}=si();l.useState(null),l.useState("main");const[t,r]=l.useState([]),[i,c]=l.useState([]),[n,o]=l.useState(!0),[m,d]=l.useState(""),[p,j]=l.useState("all");l.useState(!1),l.useState(!1),l.useState({market_name:"",city:"",county:"",physical_address:"",operating_hours:"",operating_days:[],commodities_traded:[],average_daily_traders:""});const[g,x]=l.useState([]),[N,k]=l.useState(!1);return t.filter(u=>p==="all"||u.county===p).filter(u=>u.market_name.toLowerCase().includes(m.toLowerCase())||u.city.toLowerCase().includes(m.toLowerCase())),l.useEffect(()=>{P.from("counties").select("name").then(({data:u,error:h})=>{if(h||!u||Array.isArray(u)&&u.some(S=>"error"in S)){_s({title:"Error loading counties",description:(h==null?void 0:h.message)||"Invalid data"}),x([]);return}x(u.filter(S=>typeof S=="object"&&S!==null&&"name"in S).map(S=>S.name))}),P.from("city_markets").select("*").then(({data:u,error:h})=>{if(h||!u||Array.isArray(u)&&u.some(S=>"error"in S)){_s({title:"Error loading markets",description:(h==null?void 0:h.message)||"Invalid data"}),r([]),o(!1);return}r(u),o(!1)}),P.from("market_participants").select("*").then(({data:u,error:h})=>{if(h||!u||Array.isArray(u)&&u.some(S=>"error"in S)){_s({title:"Error loading participants",description:(h==null?void 0:h.message)||"Invalid data"}),c([]);return}c(u)}),s&&P.from("users").select("role").eq("id",s.id).single().then(({data:u,error:h})=>{if(h||!u||typeof u=="object"&&u&&"error"in u){_s({title:"Error checking admin",description:(h==null?void 0:h.message)||"Invalid data"}),k(!1);return}k((u==null?void 0:u.role)==="admin")})},[s]),e.jsx(ns.Fragment,{children:e.jsx("div",{className:"min-h-screen",children:e.jsx(ne,{})})})},em=()=>{const{pathname:s}=xt();return l.useEffect(()=>{window.scrollTo(0,0)},[s]),null},sm=ns.lazy(()=>Rs(()=>import("./BatchTrackingPage-DOYKIcCj.js"),__vite__mapDeps([2,0,1])).then(s=>({default:s.BatchTrackingPage}))),tm=ns.lazy(()=>Rs(()=>import("./CarbonForumPage-CBPMlK8W.js"),__vite__mapDeps([3,0,1])).then(s=>({default:s.CarbonForumPage}))),am=ns.lazy(()=>Rs(()=>import("./NetworkingPage-Bln3VaYR.js"),__vite__mapDeps([4,0,1])).then(s=>({default:s.NetworkingPage})));function rm(){return e.jsx(Hn,{children:e.jsx(Jn,{defaultTheme:"light",storageKey:"vite-ui-theme",children:e.jsxs("div",{className:"min-h-screen bg-background font-sans antialiased",children:[e.jsx(Zo,{}),e.jsxs(sl,{children:[e.jsx(ns.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsxs(Gn,{children:[e.jsx(U,{path:"/",element:e.jsx(Ul,{})}),e.jsx(U,{path:"/auth",element:e.jsx(rc,{})}),e.jsx(U,{path:"/about",element:e.jsx(ic,{})}),e.jsx(U,{path:"/contact",element:e.jsx(nc,{})}),e.jsx(U,{path:"/profile",element:e.jsx(dc,{})}),e.jsx(U,{path:"/search",element:e.jsx(mc,{})}),e.jsx(U,{path:"/logistics",element:e.jsx(hc,{})}),e.jsx(U,{path:"/farm-input-marketplace",element:e.jsx(Zd,{})}),e.jsx(U,{path:"/inputs/group-orders",element:e.jsx(Hl,{})}),e.jsx(U,{path:"/inputs/pricing-verification",element:e.jsx(Wl,{})}),e.jsx(U,{path:"/bulk-auctions",element:e.jsx(Xl,{})}),e.jsx(U,{path:"/f2c-subscriptions",element:e.jsx(tc,{})}),e.jsx(U,{path:"/service-providers",element:e.jsx(Ac,{})}),e.jsx(U,{path:"/quality-control-discussions",element:e.jsx(Mc,{})}),e.jsx(U,{path:"/training-events",element:e.jsx(Dc,{})}),e.jsx(U,{path:"/market-linkages",element:e.jsx(Fc,{})}),e.jsx(U,{path:"/sentiment-analysis",element:e.jsx(Bc,{})}),e.jsx(U,{path:"/supply-chain-problems",element:e.jsx($c,{})}),e.jsx(U,{path:"/supply-chain-problems/logistics-issues",element:e.jsx(Wc,{})}),e.jsx(U,{path:"/supply-chain-problems/market-access",element:e.jsx(Qc,{})}),e.jsx(U,{path:"/supply-chain-problems/post-harvest-losses",element:e.jsx(Jc,{})}),e.jsx(U,{path:"/supply-chain-problems/price-volatility",element:e.jsx(Zc,{})}),e.jsx(U,{path:"/supply-chain-problems/quality-control",element:e.jsx(Xc,{})}),e.jsx(U,{path:"/batch-tracking",element:e.jsx(sm,{farmerId:"USER_ID_PLACEHOLDER"})}),e.jsx(U,{path:"/carbon-forum",element:e.jsx(tm,{userId:"USER_ID_PLACEHOLDER"})}),e.jsx(U,{path:"/networking",element:e.jsx(am,{userId:"USER_ID_PLACEHOLDER"})}),e.jsx(U,{path:"/logistics-solutions-map",element:e.jsx(co,{})}),e.jsx(U,{path:"/market-demand-hotspot",element:e.jsx(oo,{})}),e.jsx(U,{path:"/commodity-trading",element:e.jsx(wo,{})}),e.jsx(U,{path:"/barter-exchange",element:e.jsx(Co,{})}),e.jsx(U,{path:"/marketplace",element:e.jsx(ko,{})}),e.jsx(U,{path:"/price-trends",element:e.jsx(So,{})}),e.jsx(U,{path:"/my-trades",element:e.jsx(_o,{})}),e.jsx(U,{path:"/community-forums",element:e.jsx(Ao,{})}),e.jsx(U,{path:"/city-markets",element:e.jsx(Xd,{})}),e.jsx(U,{path:"/farmer-portal",element:e.jsx(Oo,{})}),e.jsx(U,{path:"/farmer-exporter-collaboration",element:e.jsx(Vo,{})}),e.jsx(U,{path:"/exporter-profile",element:e.jsx(Ho,{})}),e.jsx(U,{path:"/farmer-success-stories",element:e.jsx(Go,{})}),e.jsx(U,{path:"/community-forum",element:e.jsx(Jo,{})}),e.jsx(U,{path:"/transporter-signup",element:e.jsx(id,{})}),e.jsx(U,{path:"/service-provider-registration",element:e.jsx(nd,{})}),e.jsx(U,{path:"/kilimo-ams-data",element:e.jsx(cd,{})}),e.jsx(U,{path:"/api-docs",element:e.jsx(hd,{})}),e.jsx(U,{path:"/supply-chain-api",element:e.jsx(pd,{})}),e.jsx(U,{path:"/data-management",element:e.jsx(gd,{})}),e.jsx(U,{path:"/data-status",element:e.jsx(jd,{})}),e.jsx(U,{path:"/data-jobs",element:e.jsx(fd,{})}),e.jsx(U,{path:"/system-status",element:e.jsx(Pd,{})}),e.jsx(U,{path:"/admin",element:e.jsx(Jd,{})}),e.jsx(U,{path:"/faq",element:e.jsx(Id,{})}),e.jsx(U,{path:"/privacy-policy",element:e.jsx(Md,{})}),e.jsx(U,{path:"/terms-of-service",element:e.jsx(Dd,{})}),e.jsx(U,{path:"*",element:e.jsx(Ed,{})})]})}),e.jsx(Yn,{}),e.jsx(em,{})]})]})})})}function im(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(s=>{console.log("ServiceWorker registration successful:",s)},s=>{console.log("ServiceWorker registration failed:",s)})})}Wn(document.getElementById("root")).render(e.jsx(rm,{}));im();
